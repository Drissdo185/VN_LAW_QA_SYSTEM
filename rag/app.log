[2025-03-07 22:40:44,195] INFO [__main__] Starting application
[2025-03-07 22:40:44,197] INFO [__main__] Selected LLM provider: openai
[2025-03-07 22:40:44,198] INFO [__main__] Initializing components with LLM provider: openai
[2025-03-07 22:40:44,198] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-07 22:40:44,198] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-07 22:40:44,199] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-07 22:40:44,829] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-07 22:40:45,137] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-07 22:40:45,139] INFO [retrieval.vector_store] Collection exists: True
[2025-03-07 22:40:45,140] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-07 22:40:45,140] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:40:45,143] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:40:51,278] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-07 22:40:51,785] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-07 22:40:51,797] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-07 22:40:51,798] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-07 22:40:53,953] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:40:53,953] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-07 22:40:53,953] INFO [reasoning.auto_rag] Setting up OpenAI LLM with model: gpt-4o-mini
[2025-03-07 22:40:53,953] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.OPENAI
[2025-03-07 22:40:53,953] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-07 22:40:53,953] INFO [__main__] Initializing web search integration
[2025-03-07 22:40:53,954] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-07 22:40:53,954] INFO [__main__] Components initialized successfully
[2025-03-07 22:40:53,954] INFO [__main__] Processing new question: Mức phạt nồng độ cồn 2025 đối với xe máy
[2025-03-07 22:40:53,956] INFO [__main__] Processing question: Mức phạt nồng độ cồn 2025 đối với xe máy
[2025-03-07 22:40:53,956] INFO [reasoning.auto_rag] Question validated as traffic-related via keyword: phạt
[2025-03-07 22:40:53,956] INFO [reasoning.auto_rag] Iteration 1: Retrieving documents for query: Mức phạt nồng độ cồn 2025 đối với xe máy
[2025-03-07 22:40:53,956] INFO [reasoning.auto_rag] Tokenized query: mức phạt nồng_độ cồn 2025 đối_với xe_máy
[2025-03-07 22:40:53,956] INFO [reasoning.auto_rag] Using basic DocumentRetriever for retrieval
[2025-03-07 22:40:53,957] INFO [retrieval.retriever] Original query: 'Mức phạt nồng độ cồn 2025 đối với xe máy'
[2025-03-07 22:40:53,957] INFO [retrieval.retriever] Tokenized query: 'mức phạt nồng_độ cồn 2025 đối_với xe_máy'
[2025-03-07 22:40:54,787] INFO [retrieval.retriever] Retrieved 5 documents for query
[2025-03-07 22:40:54,788] INFO [retrieval.retriever] Top result score: 0.9107164144515991
[2025-03-07 22:40:54,788] INFO [retrieval.retriever] Score range: 0.6929110288619995 to 0.9107164144515991
[2025-03-07 22:40:54,789] INFO [reasoning.auto_rag] DocumentRetriever returned 5 documents
[2025-03-07 22:40:54,789] INFO [reasoning.auto_rag] Retrieved document details:
[2025-03-07 22:40:54,790] INFO [reasoning.auto_rag] Doc 1 score: 0.9107164144515991
[2025-03-07 22:40:54,790] INFO [reasoning.auto_rag] Doc 1 metadata: {'category': 'ô tô', 'fine_amount': 'Tước quyền sử dụng giấy phép lái xe từ 22 tháng đến 24 tháng', 'violation_type': 'nồng_độ_cồn', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Tước quyền sử dụng giấy phép lái xe từ 22 tháng đến 24 tháng\nNội dung vi phạm: Không chấp hành yêu cầu kiểm tra về chất ma túy hoặc chất kích thích khác mà pháp luật cấm sử dụng'}
[2025-03-07 22:40:54,790] INFO [reasoning.auto_rag] Doc 2 score: 0.8166821002960205
[2025-03-07 22:40:54,791] INFO [reasoning.auto_rag] Doc 2 metadata: {'category': 'ô tô', 'fine_amount': 'Phạt tiền từ 30.000.000 đồng đến 40.000.000 đồng', 'violation_type': 'nồng_độ_cồn', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Phạt tiền từ 30.000.000 đồng đến 40.000.000 đồng\nNội dung vi phạm: Không chấp hành yêu cầu kiểm tra về chất ma túy hoặc chất kích thích khác mà pháp luật cấm sử dụng của người thi hành công vụ'}
[2025-03-07 22:40:54,791] INFO [reasoning.auto_rag] Doc 3 score: 0.7691859006881714
[2025-03-07 22:40:54,791] INFO [reasoning.auto_rag] Doc 3 metadata: {'category': 'ô tô', 'fine_amount': 'Phạt tiền từ 6.000.000 đồng đến 8.000.000 đồng', 'violation_type': 'nồng_độ_cồn', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Phạt tiền từ 6.000.000 đồng đến 8.000.000 đồng\nNội dung vi phạm: Điều khiển xe trên đường mà trong máu hoặc hơi thở có nồng độ cồn nhưng chưa vượt quá 50 miligam/100 mililít máu hoặc chưa vượt quá 0,25 miligam/1 lít khí thở'}
[2025-03-07 22:40:54,792] INFO [reasoning.auto_rag] Context length: 1285 characters
[2025-03-07 22:40:54,795] INFO [reasoning.auto_rag] Input tokens: 639
[2025-03-07 22:40:58,244] INFO [httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-03-07 22:40:58,247] INFO [reasoning.auto_rag] Output tokens: 178
[2025-03-07 22:40:58,248] INFO [reasoning.auto_rag] Decision: Cần thêm thông tin
[2025-03-07 22:40:58,248] INFO [reasoning.auto_rag] Need more information, next query: Tìm kiếm thông tin về mức phạt nồng độ cồn đối với xe máy trong năm 2025.
[2025-03-07 22:40:58,248] INFO [reasoning.auto_rag] Iteration 2: Retrieving documents for query: Tìm kiếm thông tin về mức phạt nồng độ cồn đối với xe máy trong năm 2025.
[2025-03-07 22:40:58,248] INFO [reasoning.auto_rag] Tokenized query: tìm_kiếm thông_tin về mức phạt nồng_độ cồn đối_với xe_máy trong năm 2025 .
[2025-03-07 22:40:58,248] INFO [reasoning.auto_rag] Using basic DocumentRetriever for retrieval
[2025-03-07 22:40:58,249] INFO [retrieval.retriever] Original query: 'Tìm kiếm thông tin về mức phạt nồng độ cồn đối với xe máy trong năm 2025.'
[2025-03-07 22:40:58,249] INFO [retrieval.retriever] Tokenized query: 'tìm_kiếm thông_tin về mức phạt nồng_độ cồn đối_với xe_máy trong năm 2025 .'
[2025-03-07 22:40:58,854] INFO [retrieval.retriever] Retrieved 5 documents for query
[2025-03-07 22:40:58,854] INFO [retrieval.retriever] Top result score: 0.8750579357147217
[2025-03-07 22:40:58,855] INFO [retrieval.retriever] Score range: 0.6940207481384277 to 0.8750579357147217
[2025-03-07 22:40:58,855] INFO [reasoning.auto_rag] DocumentRetriever returned 5 documents
[2025-03-07 22:40:58,855] INFO [reasoning.auto_rag] Retrieved document details:
[2025-03-07 22:40:58,855] INFO [reasoning.auto_rag] Doc 1 score: 0.8750579357147217
[2025-03-07 22:40:58,855] INFO [reasoning.auto_rag] Doc 1 metadata: {'category': 'ô tô', 'fine_amount': 'Tước quyền sử dụng giấy phép lái xe từ 22 tháng đến 24 tháng', 'violation_type': 'nồng_độ_cồn', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Tước quyền sử dụng giấy phép lái xe từ 22 tháng đến 24 tháng\nNội dung vi phạm: Không chấp hành yêu cầu kiểm tra về chất ma túy hoặc chất kích thích khác mà pháp luật cấm sử dụng'}
[2025-03-07 22:40:58,855] INFO [reasoning.auto_rag] Doc 2 score: 0.80940842628479
[2025-03-07 22:40:58,855] INFO [reasoning.auto_rag] Doc 2 metadata: {'category': 'ô tô', 'fine_amount': 'Phạt tiền từ 30.000.000 đồng đến 40.000.000 đồng', 'violation_type': 'nồng_độ_cồn', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Phạt tiền từ 30.000.000 đồng đến 40.000.000 đồng\nNội dung vi phạm: Không chấp hành yêu cầu kiểm tra về chất ma túy hoặc chất kích thích khác mà pháp luật cấm sử dụng của người thi hành công vụ'}
[2025-03-07 22:40:58,855] INFO [reasoning.auto_rag] Doc 3 score: 0.7671982049942017
[2025-03-07 22:40:58,855] INFO [reasoning.auto_rag] Doc 3 metadata: {'category': 'ô tô', 'fine_amount': 'Phạt tiền từ 6.000.000 đồng đến 8.000.000 đồng', 'violation_type': 'nồng_độ_cồn', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Phạt tiền từ 6.000.000 đồng đến 8.000.000 đồng\nNội dung vi phạm: Điều khiển xe trên đường mà trong máu hoặc hơi thở có nồng độ cồn nhưng chưa vượt quá 50 miligam/100 mililít máu hoặc chưa vượt quá 0,25 miligam/1 lít khí thở'}
[2025-03-07 22:40:58,856] INFO [reasoning.auto_rag] Context length: 2479 characters
[2025-03-07 22:40:58,857] INFO [reasoning.auto_rag] Input tokens: 1046
[2025-03-07 22:41:02,135] INFO [httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-03-07 22:41:02,139] INFO [reasoning.auto_rag] Output tokens: 187
[2025-03-07 22:41:02,140] INFO [reasoning.auto_rag] Decision: Cần thêm thông tin
[2025-03-07 22:41:02,140] INFO [reasoning.auto_rag] Need more information, next query: Tìm kiếm thông tin về mức phạt nồng độ cồn đối với xe máy trong năm 2025.
[2025-03-07 22:41:02,140] WARNING [reasoning.auto_rag] Exiting loop without sufficient information
[2025-03-07 22:41:02,141] INFO [utils] Function process_question completed in 8.19 seconds
[2025-03-07 22:41:02,142] INFO [__main__] Question processed in 8.19 seconds
[2025-03-07 22:41:02,143] INFO [__main__] Needs web search: True
[2025-03-07 22:41:02,144] INFO [__main__] Web search prompt triggered
[2025-03-07 22:41:02,145] INFO [__main__] Displaying results
[2025-03-07 22:41:02,146] INFO [__main__] Response generated using: OpenAI GPT-4o mini
[2025-03-07 22:41:02,152] INFO [__main__] Cleaning up components
[2025-03-07 22:41:02,153] INFO [retrieval.vector_store] Closing Weaviate client connection
[2025-03-07 22:41:02,159] INFO [retrieval.vector_store] Weaviate client connection closed
[2025-03-07 22:41:02,160] INFO [__main__] Displaying web search prompt
[2025-03-07 22:43:30,737] INFO [__main__] Starting application
[2025-03-07 22:43:30,745] INFO [__main__] Selected LLM provider: openai
[2025-03-07 22:43:30,747] INFO [__main__] Initializing components with LLM provider: openai
[2025-03-07 22:43:30,748] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-07 22:43:30,749] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-07 22:43:30,749] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-07 22:43:31,540] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-07 22:43:31,758] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-07 22:43:31,763] INFO [retrieval.vector_store] Collection exists: True
[2025-03-07 22:43:31,763] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-07 22:43:31,763] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:43:31,766] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:43:36,305] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-07 22:43:36,531] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-07 22:43:36,536] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-07 22:43:36,536] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-07 22:43:38,875] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:43:38,875] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-07 22:43:38,875] INFO [reasoning.auto_rag] Setting up OpenAI LLM with model: gpt-4o-mini
[2025-03-07 22:43:38,875] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.OPENAI
[2025-03-07 22:43:38,875] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-07 22:43:38,875] INFO [__main__] Initializing web search integration
[2025-03-07 22:43:38,875] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-07 22:43:38,875] INFO [__main__] Components initialized successfully
[2025-03-07 22:43:38,876] INFO [__main__] Displaying web search prompt
[2025-03-07 22:43:41,287] INFO [__main__] Starting application
[2025-03-07 22:43:41,293] INFO [__main__] Selected LLM provider: openai
[2025-03-07 22:43:41,293] INFO [__main__] Initializing components with LLM provider: openai
[2025-03-07 22:43:41,294] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-07 22:43:41,294] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-07 22:43:41,294] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-07 22:43:41,389] INFO [__main__] Starting application
[2025-03-07 22:43:41,391] INFO [__main__] Selected LLM provider: openai
[2025-03-07 22:43:41,392] INFO [__main__] Initializing components with LLM provider: openai
[2025-03-07 22:43:41,392] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-07 22:43:41,392] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-07 22:43:41,392] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-07 22:43:41,715] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-07 22:43:41,925] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-07 22:43:41,945] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-07 22:43:41,951] INFO [retrieval.vector_store] Collection exists: True
[2025-03-07 22:43:41,951] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-07 22:43:41,951] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:43:41,952] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:43:42,157] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-07 22:43:42,161] INFO [retrieval.vector_store] Collection exists: True
[2025-03-07 22:43:42,161] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-07 22:43:42,161] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:43:42,162] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:43:46,632] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-07 22:43:46,857] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-07 22:43:46,861] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-07 22:43:46,862] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-07 22:43:47,996] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-07 22:43:48,533] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-07 22:43:48,536] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-07 22:43:48,536] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-07 22:43:49,140] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:43:49,140] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-07 22:43:49,140] INFO [reasoning.auto_rag] Setting up OpenAI LLM with model: gpt-4o-mini
[2025-03-07 22:43:49,141] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.OPENAI
[2025-03-07 22:43:49,141] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-07 22:43:49,141] INFO [__main__] Initializing web search integration
[2025-03-07 22:43:49,141] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-07 22:43:49,141] INFO [__main__] Components initialized successfully
[2025-03-07 22:43:49,142] INFO [__main__] Processing new question: Mức phạt nồng độ cồn 2025 đối với xe ô tô
[2025-03-07 22:43:49,143] INFO [__main__] Processing question: Mức phạt nồng độ cồn 2025 đối với xe ô tô
[2025-03-07 22:43:49,143] INFO [reasoning.auto_rag] Question validated as traffic-related via keyword: phạt
[2025-03-07 22:43:49,143] INFO [reasoning.auto_rag] Iteration 1: Retrieving documents for query: Mức phạt nồng độ cồn 2025 đối với xe ô tô
[2025-03-07 22:43:49,143] INFO [reasoning.auto_rag] Tokenized query: mức phạt nồng_độ cồn 2025 đối_với xe ô_tô
[2025-03-07 22:43:49,143] INFO [reasoning.auto_rag] Using basic DocumentRetriever for retrieval
[2025-03-07 22:43:49,144] INFO [retrieval.retriever] Original query: 'Mức phạt nồng độ cồn 2025 đối với xe ô tô'
[2025-03-07 22:43:49,144] INFO [retrieval.retriever] Tokenized query: 'mức phạt nồng_độ cồn 2025 đối_với xe ô_tô'
[2025-03-07 22:43:50,205] INFO [retrieval.retriever] Retrieved 5 documents for query
[2025-03-07 22:43:50,205] INFO [retrieval.retriever] Top result score: 0.9035042524337769
[2025-03-07 22:43:50,205] INFO [retrieval.retriever] Score range: 0.693583607673645 to 0.9035042524337769
[2025-03-07 22:43:50,205] INFO [reasoning.auto_rag] DocumentRetriever returned 5 documents
[2025-03-07 22:43:50,205] INFO [reasoning.auto_rag] Retrieved document details:
[2025-03-07 22:43:50,206] INFO [reasoning.auto_rag] Doc 1 score: 0.9035042524337769
[2025-03-07 22:43:50,206] INFO [reasoning.auto_rag] Doc 1 metadata: {'category': 'ô tô', 'fine_amount': 'Tước quyền sử dụng giấy phép lái xe từ 22 tháng đến 24 tháng', 'violation_type': 'nồng_độ_cồn', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Tước quyền sử dụng giấy phép lái xe từ 22 tháng đến 24 tháng\nNội dung vi phạm: Không chấp hành yêu cầu kiểm tra về chất ma túy hoặc chất kích thích khác mà pháp luật cấm sử dụng'}
[2025-03-07 22:43:50,206] INFO [reasoning.auto_rag] Doc 2 score: 0.8224883079528809
[2025-03-07 22:43:50,206] INFO [reasoning.auto_rag] Doc 2 metadata: {'category': 'ô tô', 'fine_amount': 'Phạt tiền từ 30.000.000 đồng đến 40.000.000 đồng', 'violation_type': 'nồng_độ_cồn', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Phạt tiền từ 30.000.000 đồng đến 40.000.000 đồng\nNội dung vi phạm: Không chấp hành yêu cầu kiểm tra về chất ma túy hoặc chất kích thích khác mà pháp luật cấm sử dụng của người thi hành công vụ'}
[2025-03-07 22:43:50,206] INFO [reasoning.auto_rag] Doc 3 score: 0.7692970037460327
[2025-03-07 22:43:50,207] INFO [reasoning.auto_rag] Doc 3 metadata: {'category': 'ô tô', 'fine_amount': 'Phạt tiền từ 6.000.000 đồng đến 8.000.000 đồng', 'violation_type': 'nồng_độ_cồn', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Phạt tiền từ 6.000.000 đồng đến 8.000.000 đồng\nNội dung vi phạm: Điều khiển xe trên đường mà trong máu hoặc hơi thở có nồng độ cồn nhưng chưa vượt quá 50 miligam/100 mililít máu hoặc chưa vượt quá 0,25 miligam/1 lít khí thở'}
[2025-03-07 22:43:50,207] INFO [reasoning.auto_rag] Context length: 1285 characters
[2025-03-07 22:43:50,208] INFO [reasoning.auto_rag] Input tokens: 640
[2025-03-07 22:43:50,927] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:43:50,927] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-07 22:43:50,927] INFO [reasoning.auto_rag] Setting up OpenAI LLM with model: gpt-4o-mini
[2025-03-07 22:43:50,927] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.OPENAI
[2025-03-07 22:43:50,927] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-07 22:43:50,927] INFO [__main__] Initializing web search integration
[2025-03-07 22:43:50,927] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-07 22:43:50,927] INFO [__main__] Components initialized successfully
[2025-03-07 22:44:03,379] INFO [httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-03-07 22:44:03,381] INFO [reasoning.auto_rag] Output tokens: 507
[2025-03-07 22:44:03,382] INFO [reasoning.auto_rag] Decision: Đã đủ thông tin
[2025-03-07 22:44:03,382] INFO [reasoning.auto_rag] Found sufficient information, returning final answer
[2025-03-07 22:44:03,382] INFO [utils] Function process_question completed in 14.24 seconds
[2025-03-07 22:44:03,382] INFO [__main__] Question processed in 14.24 seconds
[2025-03-07 22:44:03,382] INFO [__main__] Needs web search: False
[2025-03-07 22:44:03,383] INFO [__main__] Displaying results
[2025-03-07 22:44:03,383] INFO [__main__] Response generated using: OpenAI GPT-4o mini
[2025-03-07 22:44:03,385] INFO [__main__] Cleaning up components
[2025-03-07 22:44:03,385] INFO [retrieval.vector_store] Closing Weaviate client connection
[2025-03-07 22:44:03,386] INFO [retrieval.vector_store] Weaviate client connection closed
[2025-03-07 22:46:51,691] INFO [__main__] Starting application
[2025-03-07 22:46:51,695] INFO [__main__] Selected LLM provider: openai
[2025-03-07 22:46:51,695] INFO [__main__] Initializing components with LLM provider: openai
[2025-03-07 22:46:51,696] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-07 22:46:51,696] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-07 22:46:51,697] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-07 22:46:52,303] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-07 22:46:52,553] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-07 22:46:52,559] INFO [retrieval.vector_store] Collection exists: True
[2025-03-07 22:46:52,559] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-07 22:46:52,560] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:46:52,563] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:46:57,545] INFO [__main__] Starting application
[2025-03-07 22:46:57,550] INFO [__main__] Selected LLM provider: openai
[2025-03-07 22:46:57,552] INFO [__main__] Initializing components with LLM provider: openai
[2025-03-07 22:46:57,555] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-07 22:46:57,556] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-07 22:46:57,557] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-07 22:46:57,642] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-07 22:46:57,966] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-07 22:46:57,968] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-07 22:46:57,968] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-07 22:46:58,191] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-07 22:46:58,500] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-07 22:46:58,502] INFO [retrieval.vector_store] Collection exists: True
[2025-03-07 22:46:58,503] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-07 22:46:58,503] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:46:58,505] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:46:59,919] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:46:59,919] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-07 22:46:59,919] INFO [reasoning.auto_rag] Setting up OpenAI LLM with model: gpt-4o-mini
[2025-03-07 22:46:59,919] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.OPENAI
[2025-03-07 22:46:59,919] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-07 22:46:59,919] INFO [__main__] Initializing web search integration
[2025-03-07 22:46:59,919] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-07 22:46:59,919] INFO [__main__] Components initialized successfully
[2025-03-07 22:47:03,961] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-07 22:47:04,503] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-07 22:47:04,514] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-07 22:47:04,515] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-07 22:47:06,488] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:47:06,488] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-07 22:47:06,488] INFO [reasoning.auto_rag] Setting up OpenAI LLM with model: gpt-4o-mini
[2025-03-07 22:47:06,488] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.OPENAI
[2025-03-07 22:47:06,489] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-07 22:47:06,489] INFO [__main__] Initializing web search integration
[2025-03-07 22:47:06,489] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-07 22:47:06,489] INFO [__main__] Components initialized successfully
[2025-03-07 22:47:11,499] INFO [__main__] Starting application
[2025-03-07 22:47:11,504] INFO [__main__] Selected LLM provider: openai
[2025-03-07 22:47:11,505] INFO [__main__] Initializing components with LLM provider: openai
[2025-03-07 22:47:11,506] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-07 22:47:11,507] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-07 22:47:11,515] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-07 22:47:11,600] INFO [__main__] Starting application
[2025-03-07 22:47:11,601] INFO [__main__] Selected LLM provider: openai
[2025-03-07 22:47:11,601] INFO [__main__] Initializing components with LLM provider: openai
[2025-03-07 22:47:11,602] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-07 22:47:11,602] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-07 22:47:11,602] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-07 22:47:11,965] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-07 22:47:12,222] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-07 22:47:12,225] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-07 22:47:12,229] INFO [retrieval.vector_store] Collection exists: True
[2025-03-07 22:47:12,230] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-07 22:47:12,230] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:47:12,235] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:47:12,527] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-07 22:47:12,533] INFO [retrieval.vector_store] Collection exists: True
[2025-03-07 22:47:12,536] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-07 22:47:12,536] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:47:12,539] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:47:16,661] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-07 22:47:16,933] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-07 22:47:16,943] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-07 22:47:16,943] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-07 22:47:16,950] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-07 22:47:17,185] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-07 22:47:17,191] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-07 22:47:17,191] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-07 22:47:18,890] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:47:18,890] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-07 22:47:18,890] INFO [reasoning.auto_rag] Setting up OpenAI LLM with model: gpt-4o-mini
[2025-03-07 22:47:18,890] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.OPENAI
[2025-03-07 22:47:18,891] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-07 22:47:18,891] INFO [__main__] Initializing web search integration
[2025-03-07 22:47:18,891] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-07 22:47:18,891] INFO [__main__] Components initialized successfully
[2025-03-07 22:47:20,476] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:47:20,476] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-07 22:47:20,476] INFO [reasoning.auto_rag] Setting up OpenAI LLM with model: gpt-4o-mini
[2025-03-07 22:47:20,476] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.OPENAI
[2025-03-07 22:47:20,476] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-07 22:47:20,476] INFO [__main__] Initializing web search integration
[2025-03-07 22:47:20,476] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-07 22:47:20,476] INFO [__main__] Components initialized successfully
[2025-03-07 22:47:20,477] INFO [__main__] Processing new question: Điều khiển xe trên đường mà trong máu hoặc hơi thở có nồng độ cồn vượt quá 80 miligam/100 mililít máu bị phạt bao nhiêu tiền ?
[2025-03-07 22:47:20,478] INFO [__main__] Processing question: Điều khiển xe trên đường mà trong máu hoặc hơi thở có nồng độ cồn vượt quá 80 miligam/100 mililít máu bị phạt bao nhiêu tiền ?
[2025-03-07 22:47:20,478] INFO [reasoning.auto_rag] Question validated as traffic-related via keyword: phạt
[2025-03-07 22:47:20,478] INFO [reasoning.auto_rag] Iteration 1: Retrieving documents for query: Điều khiển xe trên đường mà trong máu hoặc hơi thở có nồng độ cồn vượt quá 80 miligam/100 mililít máu bị phạt bao nhiêu tiền ?
[2025-03-07 22:47:20,479] INFO [reasoning.auto_rag] Tokenized query: điều_khiển xe trên đường mà trong máu hoặc hơi thở có nồng_độ cồn vượt quá 80 miligam / 100 mililít máu bị phạt bao_nhiêu tiền ?
[2025-03-07 22:47:20,479] INFO [reasoning.auto_rag] Using basic DocumentRetriever for retrieval
[2025-03-07 22:47:20,480] INFO [retrieval.retriever] Original query: 'Điều khiển xe trên đường mà trong máu hoặc hơi thở có nồng độ cồn vượt quá 80 miligam/100 mililít máu bị phạt bao nhiêu tiền ?'
[2025-03-07 22:47:20,480] INFO [retrieval.retriever] Tokenized query: 'điều_khiển xe trên đường mà trong máu hoặc hơi thở có nồng_độ cồn vượt quá 80 miligam / 100 mililít máu bị phạt bao_nhiêu tiền ?'
[2025-03-07 22:47:21,368] INFO [retrieval.retriever] Retrieved 5 documents for query
[2025-03-07 22:47:21,369] INFO [retrieval.retriever] Top result score: 0.995373547077179
[2025-03-07 22:47:21,369] INFO [retrieval.retriever] Score range: 0.924194872379303 to 0.995373547077179
[2025-03-07 22:47:21,370] INFO [reasoning.auto_rag] DocumentRetriever returned 5 documents
[2025-03-07 22:47:21,370] INFO [reasoning.auto_rag] Retrieved document details:
[2025-03-07 22:47:21,371] INFO [reasoning.auto_rag] Doc 1 score: 0.995373547077179
[2025-03-07 22:47:21,371] INFO [reasoning.auto_rag] Doc 1 metadata: {'category': 'ô tô', 'fine_amount': 'Phạt tiền từ 30.000.000 đồng đến 40.000.000 đồng', 'violation_type': 'nồng_độ_cồn', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Phạt tiền từ 30.000.000 đồng đến 40.000.000 đồng\nNội dung vi phạm: Điều khiển xe trên đường mà trong máu hoặc hơi thở có nồng độ cồn vượt quá 80 miligam/100 mililít máu hoặc vượt quá 0,4 miligam/1 lít khí thở'}
[2025-03-07 22:47:21,372] INFO [reasoning.auto_rag] Doc 2 score: 0.9901199340820312
[2025-03-07 22:47:21,374] INFO [reasoning.auto_rag] Doc 2 metadata: {'category': 'ô tô', 'fine_amount': 'Trừ 10 điểm giấy phép lái xe', 'violation_type': 'nồng_độ_cồn', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Trừ 10 điểm giấy phép lái xe\nNội dung vi phạm: Điều khiển xe trên đường mà trong máu hoặc hơi thở có nồng độ cồn vượt quá 50 miligam đến 80 miligam/100 mililít máu hoặc vượt quá 0,25 miligam đến 0,4 miligam/1 lít khí thở'}
[2025-03-07 22:47:21,374] INFO [reasoning.auto_rag] Doc 3 score: 0.9645097255706787
[2025-03-07 22:47:21,375] INFO [reasoning.auto_rag] Doc 3 metadata: {'category': 'ô tô', 'fine_amount': 'Phạt tiền từ 18.000.000 đồng đến 20.000.000 đồng', 'violation_type': 'nồng_độ_cồn', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Phạt tiền từ 18.000.000 đồng đến 20.000.000 đồng\nNội dung vi phạm: Điều khiển xe trên đường mà trong máu hoặc hơi thở có nồng độ cồn vượt quá 50 miligam đến 80 miligam/100 mililít máu hoặc vượt quá 0,25 miligam đến 0,4 miligam/1 lít khí thở'}
[2025-03-07 22:47:21,377] INFO [reasoning.auto_rag] Context length: 1344 characters
[2025-03-07 22:47:21,382] INFO [reasoning.auto_rag] Input tokens: 716
[2025-03-07 22:47:27,276] INFO [httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-03-07 22:47:27,281] INFO [reasoning.auto_rag] Output tokens: 206
[2025-03-07 22:47:27,281] INFO [reasoning.auto_rag] Decision: Đã đủ thông tin
[2025-03-07 22:47:27,282] INFO [reasoning.auto_rag] Found sufficient information, returning final answer
[2025-03-07 22:47:27,282] INFO [utils] Function process_question completed in 6.80 seconds
[2025-03-07 22:47:27,283] INFO [__main__] Question processed in 6.81 seconds
[2025-03-07 22:47:27,284] INFO [__main__] Needs web search: False
[2025-03-07 22:47:27,285] INFO [__main__] Displaying results
[2025-03-07 22:47:27,285] INFO [__main__] Response generated using: OpenAI GPT-4o mini
[2025-03-07 22:47:27,292] INFO [__main__] Cleaning up components
[2025-03-07 22:47:27,292] INFO [retrieval.vector_store] Closing Weaviate client connection
[2025-03-07 22:47:27,302] INFO [retrieval.vector_store] Weaviate client connection closed
[2025-03-07 22:47:46,959] INFO [__main__] Starting application
[2025-03-07 22:47:46,968] INFO [__main__] Selected LLM provider: openai
[2025-03-07 22:47:46,969] INFO [__main__] Initializing components with LLM provider: openai
[2025-03-07 22:47:46,970] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-07 22:47:46,971] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-07 22:47:46,972] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-07 22:47:47,653] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-07 22:47:47,899] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-07 22:47:47,902] INFO [retrieval.vector_store] Collection exists: True
[2025-03-07 22:47:47,903] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-07 22:47:47,903] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:47:47,907] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:47:53,383] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-07 22:47:53,999] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-07 22:47:54,003] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-07 22:47:54,003] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-07 22:47:56,661] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:47:56,661] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-07 22:47:56,661] INFO [reasoning.auto_rag] Setting up OpenAI LLM with model: gpt-4o-mini
[2025-03-07 22:47:56,661] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.OPENAI
[2025-03-07 22:47:56,661] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-07 22:47:56,661] INFO [__main__] Initializing web search integration
[2025-03-07 22:47:56,662] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-07 22:47:56,662] INFO [__main__] Components initialized successfully
[2025-03-07 22:48:25,205] INFO [__main__] Starting application
[2025-03-07 22:48:25,212] INFO [__main__] Selected LLM provider: openai
[2025-03-07 22:48:25,214] INFO [__main__] Initializing components with LLM provider: openai
[2025-03-07 22:48:25,214] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-07 22:48:25,215] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-07 22:48:25,216] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-07 22:48:25,315] INFO [__main__] Starting application
[2025-03-07 22:48:25,317] INFO [__main__] Selected LLM provider: openai
[2025-03-07 22:48:25,317] INFO [__main__] Initializing components with LLM provider: openai
[2025-03-07 22:48:25,317] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-07 22:48:25,317] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-07 22:48:25,317] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-07 22:48:25,652] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-07 22:48:25,863] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-07 22:48:25,892] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-07 22:48:25,895] INFO [retrieval.vector_store] Collection exists: True
[2025-03-07 22:48:25,896] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-07 22:48:25,896] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:48:25,898] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:48:26,102] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-07 22:48:26,108] INFO [retrieval.vector_store] Collection exists: True
[2025-03-07 22:48:26,108] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-07 22:48:26,108] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:48:26,110] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:48:30,508] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-07 22:48:30,764] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-07 22:48:30,769] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-07 22:48:30,769] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-07 22:48:32,002] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-07 22:48:32,549] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-07 22:48:32,553] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-07 22:48:32,553] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-07 22:48:33,029] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:48:33,029] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-07 22:48:33,030] INFO [reasoning.auto_rag] Setting up OpenAI LLM with model: gpt-4o-mini
[2025-03-07 22:48:33,030] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.OPENAI
[2025-03-07 22:48:33,030] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-07 22:48:33,030] INFO [__main__] Initializing web search integration
[2025-03-07 22:48:33,030] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-07 22:48:33,030] INFO [__main__] Components initialized successfully
[2025-03-07 22:48:34,918] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:48:34,918] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-07 22:48:34,918] INFO [reasoning.auto_rag] Setting up OpenAI LLM with model: gpt-4o-mini
[2025-03-07 22:48:34,918] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.OPENAI
[2025-03-07 22:48:34,919] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-07 22:48:34,919] INFO [__main__] Initializing web search integration
[2025-03-07 22:48:34,919] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-07 22:48:34,919] INFO [__main__] Components initialized successfully
[2025-03-07 22:48:34,919] INFO [__main__] Processing new question: Các mức tiền xử phạt nồng độ cồn đối với xe ô tô 
[2025-03-07 22:48:34,920] INFO [__main__] Processing question: Các mức tiền xử phạt nồng độ cồn đối với xe ô tô 
[2025-03-07 22:48:34,920] INFO [reasoning.auto_rag] Question validated as traffic-related via keyword: phạt
[2025-03-07 22:48:34,920] INFO [reasoning.auto_rag] Iteration 1: Retrieving documents for query: Các mức tiền xử phạt nồng độ cồn đối với xe ô tô 
[2025-03-07 22:48:34,921] INFO [reasoning.auto_rag] Tokenized query: các mức tiền xử_phạt nồng_độ cồn đối_với xe ô_tô
[2025-03-07 22:48:34,921] INFO [reasoning.auto_rag] Using basic DocumentRetriever for retrieval
[2025-03-07 22:48:34,921] INFO [retrieval.retriever] Original query: 'Các mức tiền xử phạt nồng độ cồn đối với xe ô tô '
[2025-03-07 22:48:34,921] INFO [retrieval.retriever] Tokenized query: 'các mức tiền xử_phạt nồng_độ cồn đối_với xe ô_tô'
[2025-03-07 22:48:35,862] INFO [retrieval.retriever] Retrieved 5 documents for query
[2025-03-07 22:48:35,862] INFO [retrieval.retriever] Top result score: 0.9019197821617126
[2025-03-07 22:48:35,863] INFO [retrieval.retriever] Score range: 0.75495445728302 to 0.9019197821617126
[2025-03-07 22:48:35,864] INFO [reasoning.auto_rag] DocumentRetriever returned 5 documents
[2025-03-07 22:48:35,864] INFO [reasoning.auto_rag] Retrieved document details:
[2025-03-07 22:48:35,864] INFO [reasoning.auto_rag] Doc 1 score: 0.9019197821617126
[2025-03-07 22:48:35,864] INFO [reasoning.auto_rag] Doc 1 metadata: {'category': 'ô tô', 'fine_amount': 'Phạt tiền từ 30.000.000 đồng đến 40.000.000 đồng', 'violation_type': 'nồng_độ_cồn', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Phạt tiền từ 30.000.000 đồng đến 40.000.000 đồng\nNội dung vi phạm: Không chấp hành yêu cầu kiểm tra về chất ma túy hoặc chất kích thích khác mà pháp luật cấm sử dụng của người thi hành công vụ'}
[2025-03-07 22:48:35,864] INFO [reasoning.auto_rag] Doc 2 score: 0.8833048343658447
[2025-03-07 22:48:35,865] INFO [reasoning.auto_rag] Doc 2 metadata: {'category': 'ô tô', 'fine_amount': 'Tước quyền sử dụng giấy phép lái xe từ 22 tháng đến 24 tháng', 'violation_type': 'nồng_độ_cồn', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Tước quyền sử dụng giấy phép lái xe từ 22 tháng đến 24 tháng\nNội dung vi phạm: Không chấp hành yêu cầu kiểm tra về chất ma túy hoặc chất kích thích khác mà pháp luật cấm sử dụng'}
[2025-03-07 22:48:35,865] INFO [reasoning.auto_rag] Doc 3 score: 0.7743741273880005
[2025-03-07 22:48:35,865] INFO [reasoning.auto_rag] Doc 3 metadata: {'category': 'ô tô', 'fine_amount': 'Phạt tiền từ 6.000.000 đồng đến 8.000.000 đồng', 'violation_type': 'nồng_độ_cồn', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Phạt tiền từ 6.000.000 đồng đến 8.000.000 đồng\nNội dung vi phạm: Điều khiển xe trên đường mà trong máu hoặc hơi thở có nồng độ cồn nhưng chưa vượt quá 50 miligam/100 mililít máu hoặc chưa vượt quá 0,25 miligam/1 lít khí thở'}
[2025-03-07 22:48:35,865] INFO [reasoning.auto_rag] Context length: 1273 characters
[2025-03-07 22:48:35,868] INFO [reasoning.auto_rag] Input tokens: 640
[2025-03-07 22:48:38,891] INFO [__main__] Starting application
[2025-03-07 22:48:38,893] INFO [__main__] Selected LLM provider: openai
[2025-03-07 22:48:38,895] INFO [__main__] Initializing components with LLM provider: openai
[2025-03-07 22:48:38,895] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-07 22:48:38,895] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-07 22:48:38,896] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-07 22:48:39,486] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-07 22:48:39,776] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-07 22:48:39,780] INFO [retrieval.vector_store] Collection exists: True
[2025-03-07 22:48:39,781] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-07 22:48:39,782] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:48:39,786] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:48:45,618] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-07 22:48:45,943] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-07 22:48:45,949] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-07 22:48:45,949] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-07 22:48:48,124] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:48:48,124] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-07 22:48:48,124] INFO [reasoning.auto_rag] Setting up OpenAI LLM with model: gpt-4o-mini
[2025-03-07 22:48:48,124] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.OPENAI
[2025-03-07 22:48:48,124] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-07 22:48:48,124] INFO [__main__] Initializing web search integration
[2025-03-07 22:48:48,124] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-07 22:48:48,124] INFO [__main__] Components initialized successfully
[2025-03-07 22:48:48,125] INFO [__main__] Processing new question: Các mức tiền xử phạt nồng độ cồn đối với xe ô tô 
[2025-03-07 22:48:48,125] INFO [__main__] Processing question: Các mức tiền xử phạt nồng độ cồn đối với xe ô tô 
[2025-03-07 22:48:48,126] INFO [reasoning.auto_rag] Question validated as traffic-related via keyword: phạt
[2025-03-07 22:48:48,126] INFO [reasoning.auto_rag] Iteration 1: Retrieving documents for query: Các mức tiền xử phạt nồng độ cồn đối với xe ô tô 
[2025-03-07 22:48:48,126] INFO [reasoning.auto_rag] Tokenized query: các mức tiền xử_phạt nồng_độ cồn đối_với xe ô_tô
[2025-03-07 22:48:48,126] INFO [reasoning.auto_rag] Using basic DocumentRetriever for retrieval
[2025-03-07 22:48:48,126] INFO [retrieval.retriever] Original query: 'Các mức tiền xử phạt nồng độ cồn đối với xe ô tô '
[2025-03-07 22:48:48,126] INFO [retrieval.retriever] Tokenized query: 'các mức tiền xử_phạt nồng_độ cồn đối_với xe ô_tô'
[2025-03-07 22:48:48,997] INFO [retrieval.retriever] Retrieved 5 documents for query
[2025-03-07 22:48:48,997] INFO [retrieval.retriever] Top result score: 0.9019197821617126
[2025-03-07 22:48:48,997] INFO [retrieval.retriever] Score range: 0.75495445728302 to 0.9019197821617126
[2025-03-07 22:48:48,998] INFO [reasoning.auto_rag] DocumentRetriever returned 5 documents
[2025-03-07 22:48:48,998] INFO [reasoning.auto_rag] Retrieved document details:
[2025-03-07 22:48:48,999] INFO [reasoning.auto_rag] Doc 1 score: 0.9019197821617126
[2025-03-07 22:48:48,999] INFO [reasoning.auto_rag] Doc 1 metadata: {'category': 'ô tô', 'fine_amount': 'Phạt tiền từ 30.000.000 đồng đến 40.000.000 đồng', 'violation_type': 'nồng_độ_cồn', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Phạt tiền từ 30.000.000 đồng đến 40.000.000 đồng\nNội dung vi phạm: Không chấp hành yêu cầu kiểm tra về chất ma túy hoặc chất kích thích khác mà pháp luật cấm sử dụng của người thi hành công vụ'}
[2025-03-07 22:48:48,999] INFO [reasoning.auto_rag] Doc 2 score: 0.8833048343658447
[2025-03-07 22:48:49,000] INFO [reasoning.auto_rag] Doc 2 metadata: {'category': 'ô tô', 'fine_amount': 'Tước quyền sử dụng giấy phép lái xe từ 22 tháng đến 24 tháng', 'violation_type': 'nồng_độ_cồn', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Tước quyền sử dụng giấy phép lái xe từ 22 tháng đến 24 tháng\nNội dung vi phạm: Không chấp hành yêu cầu kiểm tra về chất ma túy hoặc chất kích thích khác mà pháp luật cấm sử dụng'}
[2025-03-07 22:48:49,000] INFO [reasoning.auto_rag] Doc 3 score: 0.7743741273880005
[2025-03-07 22:48:49,000] INFO [reasoning.auto_rag] Doc 3 metadata: {'category': 'ô tô', 'fine_amount': 'Phạt tiền từ 6.000.000 đồng đến 8.000.000 đồng', 'violation_type': 'nồng_độ_cồn', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Phạt tiền từ 6.000.000 đồng đến 8.000.000 đồng\nNội dung vi phạm: Điều khiển xe trên đường mà trong máu hoặc hơi thở có nồng độ cồn nhưng chưa vượt quá 50 miligam/100 mililít máu hoặc chưa vượt quá 0,25 miligam/1 lít khí thở'}
[2025-03-07 22:48:49,001] INFO [reasoning.auto_rag] Context length: 1273 characters
[2025-03-07 22:48:49,005] INFO [reasoning.auto_rag] Input tokens: 640
[2025-03-07 22:48:50,530] INFO [httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-03-07 22:48:50,538] INFO [reasoning.auto_rag] Output tokens: 541
[2025-03-07 22:48:50,538] INFO [reasoning.auto_rag] Decision: Đã đủ thông tin
[2025-03-07 22:48:50,538] INFO [reasoning.auto_rag] Found sufficient information, returning final answer
[2025-03-07 22:48:50,539] INFO [utils] Function process_question completed in 15.62 seconds
[2025-03-07 22:48:50,540] INFO [__main__] Cleaning up components
[2025-03-07 22:48:50,541] INFO [retrieval.vector_store] Closing Weaviate client connection
[2025-03-07 22:48:50,546] INFO [retrieval.vector_store] Weaviate client connection closed
[2025-03-07 22:49:00,313] INFO [httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-03-07 22:49:00,318] INFO [reasoning.auto_rag] Output tokens: 529
[2025-03-07 22:49:00,318] INFO [reasoning.auto_rag] Decision: Đã đủ thông tin
[2025-03-07 22:49:00,319] INFO [reasoning.auto_rag] Found sufficient information, returning final answer
[2025-03-07 22:49:00,319] INFO [utils] Function process_question completed in 12.19 seconds
[2025-03-07 22:49:00,319] INFO [__main__] Question processed in 12.19 seconds
[2025-03-07 22:49:00,320] INFO [__main__] Needs web search: False
[2025-03-07 22:49:00,321] INFO [__main__] Displaying results
[2025-03-07 22:49:00,322] INFO [__main__] Response generated using: OpenAI GPT-4o mini
[2025-03-07 22:49:00,327] INFO [__main__] Cleaning up components
[2025-03-07 22:49:00,328] INFO [retrieval.vector_store] Closing Weaviate client connection
[2025-03-07 22:49:00,331] INFO [retrieval.vector_store] Weaviate client connection closed
[2025-03-07 22:51:09,853] INFO [__main__] Starting application
[2025-03-07 22:51:09,859] INFO [__main__] Selected LLM provider: openai
[2025-03-07 22:51:09,860] INFO [__main__] Initializing components with LLM provider: openai
[2025-03-07 22:51:09,862] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-07 22:51:09,897] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-07 22:51:09,899] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-07 22:51:09,982] INFO [__main__] Starting application
[2025-03-07 22:51:09,983] INFO [__main__] Selected LLM provider: openai
[2025-03-07 22:51:09,983] INFO [__main__] Initializing components with LLM provider: openai
[2025-03-07 22:51:09,983] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-07 22:51:09,983] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-07 22:51:09,983] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-07 22:51:10,294] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-07 22:51:10,525] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-07 22:51:10,528] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-07 22:51:10,533] INFO [retrieval.vector_store] Collection exists: True
[2025-03-07 22:51:10,534] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-07 22:51:10,534] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:51:10,540] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:51:10,764] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-07 22:51:10,768] INFO [retrieval.vector_store] Collection exists: True
[2025-03-07 22:51:10,768] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-07 22:51:10,769] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:51:10,773] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:51:16,503] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-07 22:51:17,054] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-07 22:51:17,060] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-07 22:51:17,060] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-07 22:51:18,797] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-07 22:51:19,431] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-07 22:51:19,434] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:51:19,435] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-07 22:51:19,435] INFO [reasoning.auto_rag] Setting up OpenAI LLM with model: gpt-4o-mini
[2025-03-07 22:51:19,435] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.OPENAI
[2025-03-07 22:51:19,436] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-07 22:51:19,436] INFO [__main__] Initializing web search integration
[2025-03-07 22:51:19,436] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-07 22:51:19,436] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-07 22:51:19,436] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-07 22:51:19,437] INFO [__main__] Components initialized successfully
[2025-03-07 22:51:21,780] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:51:21,780] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-07 22:51:21,780] INFO [reasoning.auto_rag] Setting up OpenAI LLM with model: gpt-4o-mini
[2025-03-07 22:51:21,781] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.OPENAI
[2025-03-07 22:51:21,781] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-07 22:51:21,781] INFO [__main__] Initializing web search integration
[2025-03-07 22:51:21,781] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-07 22:51:21,781] INFO [__main__] Components initialized successfully
[2025-03-07 22:51:21,781] INFO [__main__] Processing new question: Không chấp hành hiệu lệnh, chỉ dẫn của biển báo hiệu, vạch kẻ đường với xe ô tô 
[2025-03-07 22:51:21,782] INFO [__main__] Processing question: Không chấp hành hiệu lệnh, chỉ dẫn của biển báo hiệu, vạch kẻ đường với xe ô tô 
[2025-03-07 22:51:21,782] INFO [reasoning.auto_rag] Question validated as traffic-related via keyword: biển báo
[2025-03-07 22:51:21,782] INFO [reasoning.auto_rag] Iteration 1: Retrieving documents for query: Không chấp hành hiệu lệnh, chỉ dẫn của biển báo hiệu, vạch kẻ đường với xe ô tô 
[2025-03-07 22:51:21,783] INFO [reasoning.auto_rag] Tokenized query: không chấp_hành hiệu_lệnh , chỉ_dẫn của biển_báo_hiệu , vạch kẻ đường với xe ô_tô
[2025-03-07 22:51:21,783] INFO [reasoning.auto_rag] Using basic DocumentRetriever for retrieval
[2025-03-07 22:51:21,783] INFO [retrieval.retriever] Original query: 'Không chấp hành hiệu lệnh, chỉ dẫn của biển báo hiệu, vạch kẻ đường với xe ô tô '
[2025-03-07 22:51:21,783] INFO [retrieval.retriever] Tokenized query: 'không chấp_hành hiệu_lệnh , chỉ_dẫn của biển_báo_hiệu , vạch kẻ đường với xe ô_tô'
[2025-03-07 22:51:22,882] INFO [retrieval.retriever] Retrieved 5 documents for query
[2025-03-07 22:51:22,883] INFO [retrieval.retriever] Top result score: 1.0
[2025-03-07 22:51:22,883] INFO [retrieval.retriever] Score range: 0.40871119499206543 to 1.0
[2025-03-07 22:51:22,883] INFO [reasoning.auto_rag] DocumentRetriever returned 5 documents
[2025-03-07 22:51:22,883] INFO [reasoning.auto_rag] Retrieved document details:
[2025-03-07 22:51:22,884] INFO [reasoning.auto_rag] Doc 1 score: 1.0
[2025-03-07 22:51:22,884] INFO [reasoning.auto_rag] Doc 1 metadata: {'category': 'ô tô', 'fine_amount': 'Phạt tiền từ 400.000 đồng đến 600.000 đồng', 'violation_type': 'đỗ_dừng_xe', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Phạt tiền từ 400.000 đồng đến 600.000 đồng\nNội dung vi phạm: Không chấp hành hiệu lệnh, chỉ dẫn của biển báo hiệu, vạch kẻ đường'}
[2025-03-07 22:51:22,884] INFO [reasoning.auto_rag] Doc 2 score: 0.5741774439811707
[2025-03-07 22:51:22,884] INFO [reasoning.auto_rag] Doc 2 metadata: {'category': 'ô tô', 'fine_amount': 'Phạt tiền từ 400.000 đồng đến 600.000 đồng', 'violation_type': 'chở_hàng', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Phạt tiền từ 400.000 đồng đến 600.000 đồng\nNội dung vi phạm: Không gắn biển báo hiệu ở phía trước xe kéo, phía sau xe được kéo; điều khiển xe kéo rơ moóc không có biển báo hiệu theo quy định'}
[2025-03-07 22:51:22,885] INFO [reasoning.auto_rag] Doc 3 score: 0.4791165590286255
[2025-03-07 22:51:22,885] INFO [reasoning.auto_rag] Doc 3 metadata: {'category': 'ô tô', 'fine_amount': 'Trừ 10 điểm giấy phép lái xe - Điều kiện phương tiện', 'violation_type': 'giấy_tờ', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Trừ 10 điểm giấy phép lái xe - Điều kiện phương tiện\nNội dung vi phạm: Gắn biển số không đúng chứng nhận đăng ký xe/không do cơ quan có thẩm quyền cấp'}
[2025-03-07 22:51:22,885] INFO [reasoning.auto_rag] Context length: 992 characters
[2025-03-07 22:51:22,887] INFO [reasoning.auto_rag] Input tokens: 524
[2025-03-07 22:51:26,490] INFO [httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-03-07 22:51:26,498] INFO [reasoning.auto_rag] Output tokens: 187
[2025-03-07 22:51:26,498] INFO [reasoning.auto_rag] Decision: Đã đủ thông tin
[2025-03-07 22:51:26,498] INFO [reasoning.auto_rag] Found sufficient information, returning final answer
[2025-03-07 22:51:26,499] INFO [utils] Function process_question completed in 4.72 seconds
[2025-03-07 22:51:26,499] INFO [__main__] Question processed in 4.72 seconds
[2025-03-07 22:51:26,501] INFO [__main__] Needs web search: False
[2025-03-07 22:51:26,502] INFO [__main__] Displaying results
[2025-03-07 22:51:26,503] INFO [__main__] Response generated using: OpenAI GPT-4o mini
[2025-03-07 22:51:26,509] INFO [__main__] Cleaning up components
[2025-03-07 22:51:26,511] INFO [retrieval.vector_store] Closing Weaviate client connection
[2025-03-07 22:51:26,519] INFO [retrieval.vector_store] Weaviate client connection closed
[2025-03-07 22:51:33,625] INFO [__main__] Starting application
[2025-03-07 22:51:33,630] INFO [__main__] Selected LLM provider: openai
[2025-03-07 22:51:33,631] INFO [__main__] Initializing components with LLM provider: openai
[2025-03-07 22:51:33,632] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-07 22:51:33,633] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-07 22:51:33,634] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-07 22:51:34,078] INFO [__main__] Starting application
[2025-03-07 22:51:34,080] INFO [__main__] Selected LLM provider: openai
[2025-03-07 22:51:34,081] INFO [__main__] Initializing components with LLM provider: openai
[2025-03-07 22:51:34,081] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-07 22:51:34,081] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-07 22:51:34,081] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-07 22:51:34,235] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-07 22:51:34,480] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-07 22:51:34,484] INFO [retrieval.vector_store] Collection exists: True
[2025-03-07 22:51:34,484] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-07 22:51:34,485] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:51:34,488] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:51:34,644] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-07 22:51:34,881] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-07 22:51:34,887] INFO [retrieval.vector_store] Collection exists: True
[2025-03-07 22:51:34,887] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-07 22:51:34,888] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:51:34,890] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:51:38,749] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-07 22:51:39,242] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-07 22:51:39,243] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-07 22:51:39,243] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-07 22:51:39,829] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-07 22:51:40,059] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-07 22:51:40,066] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-07 22:51:40,066] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-07 22:51:41,267] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:51:41,267] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-07 22:51:41,267] INFO [reasoning.auto_rag] Setting up OpenAI LLM with model: gpt-4o-mini
[2025-03-07 22:51:41,267] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.OPENAI
[2025-03-07 22:51:41,267] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-07 22:51:41,267] INFO [__main__] Initializing web search integration
[2025-03-07 22:51:41,268] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-07 22:51:41,268] INFO [__main__] Components initialized successfully
[2025-03-07 22:51:43,044] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:51:43,044] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-07 22:51:43,044] INFO [reasoning.auto_rag] Setting up OpenAI LLM with model: gpt-4o-mini
[2025-03-07 22:51:43,044] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.OPENAI
[2025-03-07 22:51:43,044] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-07 22:51:43,044] INFO [__main__] Initializing web search integration
[2025-03-07 22:51:43,044] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-07 22:51:43,044] INFO [__main__] Components initialized successfully
[2025-03-07 22:51:43,045] INFO [__main__] Processing new question: Chở người trên buồng lái quá số lượng quy định
[2025-03-07 22:51:43,045] INFO [__main__] Processing question: Chở người trên buồng lái quá số lượng quy định
[2025-03-07 22:51:43,046] WARNING [reasoning.auto_rag] Question may not be traffic-related: Chở người trên buồng lái quá số lượng quy định
[2025-03-07 22:51:43,047] INFO [utils] Function process_question completed in 0.00 seconds
[2025-03-07 22:51:43,047] INFO [__main__] Question processed in 0.00 seconds
[2025-03-07 22:51:43,047] ERROR [__main__] Error in response: Câu hỏi có vẻ không liên quan đến luật giao thông. Vui lòng đặt câu hỏi về luật giao thông.
[2025-03-07 22:51:43,049] INFO [__main__] Cleaning up components
[2025-03-07 22:51:43,049] INFO [retrieval.vector_store] Closing Weaviate client connection
[2025-03-07 22:51:43,051] INFO [retrieval.vector_store] Weaviate client connection closed
[2025-03-07 22:51:58,641] INFO [__main__] Starting application
[2025-03-07 22:51:58,642] INFO [__main__] Selected LLM provider: openai
[2025-03-07 22:51:58,642] INFO [__main__] Initializing components with LLM provider: openai
[2025-03-07 22:51:58,642] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-07 22:51:58,642] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-07 22:51:58,642] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-07 22:51:59,258] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-07 22:51:59,493] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-07 22:51:59,497] INFO [retrieval.vector_store] Collection exists: True
[2025-03-07 22:51:59,498] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-07 22:51:59,498] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:51:59,499] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:52:04,213] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-07 22:52:04,445] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-07 22:52:04,451] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-07 22:52:04,452] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-07 22:52:06,641] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:52:06,641] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-07 22:52:06,641] INFO [reasoning.auto_rag] Setting up OpenAI LLM with model: gpt-4o-mini
[2025-03-07 22:52:06,642] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.OPENAI
[2025-03-07 22:52:06,642] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-07 22:52:06,642] INFO [__main__] Initializing web search integration
[2025-03-07 22:52:06,642] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-07 22:52:06,642] INFO [__main__] Components initialized successfully
[2025-03-07 22:52:09,222] INFO [__main__] Starting application
[2025-03-07 22:52:09,225] INFO [__main__] Selected LLM provider: openai
[2025-03-07 22:52:09,227] INFO [__main__] Initializing components with LLM provider: openai
[2025-03-07 22:52:09,228] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-07 22:52:09,229] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-07 22:52:09,230] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-07 22:52:09,303] INFO [__main__] Starting application
[2025-03-07 22:52:09,304] INFO [__main__] Selected LLM provider: openai
[2025-03-07 22:52:09,305] INFO [__main__] Initializing components with LLM provider: openai
[2025-03-07 22:52:09,306] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-07 22:52:09,306] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-07 22:52:09,306] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-07 22:52:09,850] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-07 22:52:09,860] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-07 22:52:10,079] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-07 22:52:10,085] INFO [retrieval.vector_store] Collection exists: True
[2025-03-07 22:52:10,085] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-07 22:52:10,085] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:52:10,086] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:52:10,105] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-07 22:52:10,112] INFO [retrieval.vector_store] Collection exists: True
[2025-03-07 22:52:10,112] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-07 22:52:10,113] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:52:10,116] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:52:15,565] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-07 22:52:16,473] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-07 22:52:16,480] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-07 22:52:16,480] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-07 22:52:16,550] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-07 22:52:17,040] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-07 22:52:17,045] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-07 22:52:17,045] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-07 22:52:18,388] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:52:18,388] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-07 22:52:18,388] INFO [reasoning.auto_rag] Setting up OpenAI LLM with model: gpt-4o-mini
[2025-03-07 22:52:18,389] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.OPENAI
[2025-03-07 22:52:18,389] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-07 22:52:18,389] INFO [__main__] Initializing web search integration
[2025-03-07 22:52:18,389] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-07 22:52:18,389] INFO [__main__] Components initialized successfully
[2025-03-07 22:52:19,873] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:52:19,873] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-07 22:52:19,873] INFO [reasoning.auto_rag] Setting up OpenAI LLM with model: gpt-4o-mini
[2025-03-07 22:52:19,873] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.OPENAI
[2025-03-07 22:52:19,873] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-07 22:52:19,873] INFO [__main__] Initializing web search integration
[2025-03-07 22:52:19,873] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-07 22:52:19,873] INFO [__main__] Components initialized successfully
[2025-03-07 22:52:19,874] INFO [__main__] Processing new question: Chở người trên buồng lái quá số lượng quy định mức phạt đối với ô tô 
[2025-03-07 22:52:19,875] INFO [__main__] Processing question: Chở người trên buồng lái quá số lượng quy định mức phạt đối với ô tô 
[2025-03-07 22:52:19,875] INFO [reasoning.auto_rag] Question validated as traffic-related via keyword: phạt
[2025-03-07 22:52:19,875] INFO [reasoning.auto_rag] Iteration 1: Retrieving documents for query: Chở người trên buồng lái quá số lượng quy định mức phạt đối với ô tô 
[2025-03-07 22:52:19,877] INFO [reasoning.auto_rag] Tokenized query: chở người trên buồng_lái quá số_lượng quy_định_mức phạt đối_với ô_tô
[2025-03-07 22:52:19,877] INFO [reasoning.auto_rag] Using basic DocumentRetriever for retrieval
[2025-03-07 22:52:19,877] INFO [retrieval.retriever] Original query: 'Chở người trên buồng lái quá số lượng quy định mức phạt đối với ô tô '
[2025-03-07 22:52:19,877] INFO [retrieval.retriever] Tokenized query: 'chở người trên buồng_lái quá số_lượng quy_định_mức phạt đối_với ô_tô'
[2025-03-07 22:52:20,593] INFO [retrieval.retriever] Retrieved 5 documents for query
[2025-03-07 22:52:20,593] INFO [retrieval.retriever] Top result score: 1.0
[2025-03-07 22:52:20,593] INFO [retrieval.retriever] Score range: 0.3966062068939209 to 1.0
[2025-03-07 22:52:20,593] INFO [reasoning.auto_rag] DocumentRetriever returned 5 documents
[2025-03-07 22:52:20,593] INFO [reasoning.auto_rag] Retrieved document details:
[2025-03-07 22:52:20,593] INFO [reasoning.auto_rag] Doc 1 score: 1.0
[2025-03-07 22:52:20,593] INFO [reasoning.auto_rag] Doc 1 metadata: {'category': 'ô tô', 'fine_amount': 'Phạt tiền từ 600.000 đồng đến 800.000 đồng', 'violation_type': 'chở_người', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Phạt tiền từ 600.000 đồng đến 800.000 đồng\nNội dung vi phạm: Chở người trên buồng lái quá số lượng quy định'}
[2025-03-07 22:52:20,594] INFO [reasoning.auto_rag] Doc 2 score: 0.48092687129974365
[2025-03-07 22:52:20,594] INFO [reasoning.auto_rag] Doc 2 metadata: {'category': 'ô tô chở khách', 'fine_amount': 'Phạt tiền từ 1.000.000 đồng đến 2.000.000 đồng', 'violation_type': 'chở_người', 'original_text': 'Loại phương tiện: ô tô chở khách\nMức phạt: Phạt tiền từ 1.000.000 đồng đến 2.000.000 đồng\nNội dung vi phạm: Chở quá số người quy định cho xe khách tuyến cố định, hợp đồng có cự ly >300km'}
[2025-03-07 22:52:20,594] INFO [reasoning.auto_rag] Doc 3 score: 0.47595900297164917
[2025-03-07 22:52:20,594] INFO [reasoning.auto_rag] Doc 3 metadata: {'category': 'ô tô chở khách', 'fine_amount': 'Trừ 10 điểm giấy phép lái xe', 'violation_type': 'chở_người', 'original_text': 'Loại phương tiện: ô tô chở khách\nMức phạt: Trừ 10 điểm giấy phép lái xe\nNội dung vi phạm: Chở quá số người quy định (vượt trên 100%)'}
[2025-03-07 22:52:20,594] INFO [reasoning.auto_rag] Context length: 824 characters
[2025-03-07 22:52:20,598] INFO [reasoning.auto_rag] Input tokens: 490
[2025-03-07 22:52:25,578] INFO [httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-03-07 22:52:25,593] INFO [reasoning.auto_rag] Output tokens: 151
[2025-03-07 22:52:25,594] INFO [reasoning.auto_rag] Decision: Đã đủ thông tin
[2025-03-07 22:52:25,594] INFO [reasoning.auto_rag] Found sufficient information, returning final answer
[2025-03-07 22:52:25,595] INFO [utils] Function process_question completed in 5.72 seconds
[2025-03-07 22:52:25,596] INFO [__main__] Question processed in 5.72 seconds
[2025-03-07 22:52:25,597] INFO [__main__] Needs web search: False
[2025-03-07 22:52:25,599] INFO [__main__] Displaying results
[2025-03-07 22:52:25,600] INFO [__main__] Response generated using: OpenAI GPT-4o mini
[2025-03-07 22:52:25,607] INFO [__main__] Cleaning up components
[2025-03-07 22:52:25,608] INFO [retrieval.vector_store] Closing Weaviate client connection
[2025-03-07 22:52:25,617] INFO [retrieval.vector_store] Weaviate client connection closed
[2025-03-07 22:52:44,069] INFO [__main__] Starting application
[2025-03-07 22:52:44,074] INFO [__main__] Selected LLM provider: openai
[2025-03-07 22:52:44,077] INFO [__main__] Initializing components with LLM provider: openai
[2025-03-07 22:52:44,078] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-07 22:52:44,079] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-07 22:52:44,081] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-07 22:52:44,172] INFO [__main__] Starting application
[2025-03-07 22:52:44,174] INFO [__main__] Selected LLM provider: openai
[2025-03-07 22:52:44,174] INFO [__main__] Initializing components with LLM provider: openai
[2025-03-07 22:52:44,174] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-07 22:52:44,174] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-07 22:52:44,174] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-07 22:52:44,575] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-07 22:52:44,716] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-07 22:52:44,811] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-07 22:52:44,815] INFO [retrieval.vector_store] Collection exists: True
[2025-03-07 22:52:44,816] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-07 22:52:44,817] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:52:44,823] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:52:44,957] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-07 22:52:44,962] INFO [retrieval.vector_store] Collection exists: True
[2025-03-07 22:52:44,962] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-07 22:52:44,963] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:52:44,967] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:52:49,833] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-07 22:52:50,278] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-07 22:52:50,280] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-07 22:52:50,280] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-07 22:52:50,887] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-07 22:52:51,411] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-07 22:52:51,417] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-07 22:52:51,417] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-07 22:52:52,506] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:52:52,508] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-07 22:52:52,508] INFO [reasoning.auto_rag] Setting up OpenAI LLM with model: gpt-4o-mini
[2025-03-07 22:52:52,509] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.OPENAI
[2025-03-07 22:52:52,509] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-07 22:52:52,509] INFO [__main__] Initializing web search integration
[2025-03-07 22:52:52,509] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-07 22:52:52,509] INFO [__main__] Components initialized successfully
[2025-03-07 22:52:54,035] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-07 22:52:54,035] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-07 22:52:54,035] INFO [reasoning.auto_rag] Setting up OpenAI LLM with model: gpt-4o-mini
[2025-03-07 22:52:54,035] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.OPENAI
[2025-03-07 22:52:54,035] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-07 22:52:54,035] INFO [__main__] Initializing web search integration
[2025-03-07 22:52:54,035] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-07 22:52:54,035] INFO [__main__] Components initialized successfully
[2025-03-07 22:52:54,036] INFO [__main__] Processing new question: Điều khiển xe chạy quá tốc độ quy định từ 05 km/h đến dưới 10 km/h mức phạt đối với ô tô 
[2025-03-07 22:52:54,037] INFO [__main__] Processing question: Điều khiển xe chạy quá tốc độ quy định từ 05 km/h đến dưới 10 km/h mức phạt đối với ô tô 
[2025-03-07 22:52:54,037] INFO [reasoning.auto_rag] Question validated as traffic-related via keyword: phạt
[2025-03-07 22:52:54,037] INFO [reasoning.auto_rag] Iteration 1: Retrieving documents for query: Điều khiển xe chạy quá tốc độ quy định từ 05 km/h đến dưới 10 km/h mức phạt đối với ô tô 
[2025-03-07 22:52:54,038] INFO [reasoning.auto_rag] Tokenized query: điều_khiển xe chạy quá tốc_độ quy_định từ 05 km / h đến dưới 10 km / h mức phạt đối_với ô_tô
[2025-03-07 22:52:54,038] INFO [reasoning.auto_rag] Using basic DocumentRetriever for retrieval
[2025-03-07 22:52:54,038] INFO [retrieval.retriever] Original query: 'Điều khiển xe chạy quá tốc độ quy định từ 05 km/h đến dưới 10 km/h mức phạt đối với ô tô '
[2025-03-07 22:52:54,038] INFO [retrieval.retriever] Tokenized query: 'điều_khiển xe chạy quá tốc_độ quy_định từ 05 km / h đến dưới 10 km / h mức phạt đối_với ô_tô'
[2025-03-07 22:52:54,888] INFO [retrieval.retriever] Retrieved 5 documents for query
[2025-03-07 22:52:54,888] INFO [retrieval.retriever] Top result score: 1.0
[2025-03-07 22:52:54,888] INFO [retrieval.retriever] Score range: 0.6093366742134094 to 1.0
[2025-03-07 22:52:54,888] INFO [reasoning.auto_rag] DocumentRetriever returned 5 documents
[2025-03-07 22:52:54,888] INFO [reasoning.auto_rag] Retrieved document details:
[2025-03-07 22:52:54,888] INFO [reasoning.auto_rag] Doc 1 score: 1.0
[2025-03-07 22:52:54,888] INFO [reasoning.auto_rag] Doc 1 metadata: {'category': 'ô tô', 'fine_amount': 'Phạt tiền từ 800.000 đồng đến 1.000.000 đồng', 'violation_type': 'tốc_độ', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Phạt tiền từ 800.000 đồng đến 1.000.000 đồng\nNội dung vi phạm: Điều khiển xe chạy quá tốc độ quy định từ 05 km/h đến dưới 10 km/h'}
[2025-03-07 22:52:54,888] INFO [reasoning.auto_rag] Doc 2 score: 0.8090487122535706
[2025-03-07 22:52:54,889] INFO [reasoning.auto_rag] Doc 2 metadata: {'category': 'ô tô', 'fine_amount': 'Phạt tiền từ 4.000.000 đồng đến 6.000.000 đồng', 'violation_type': 'tốc_độ', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Phạt tiền từ 4.000.000 đồng đến 6.000.000 đồng\nNội dung vi phạm: Điều khiển xe chạy quá tốc độ quy định từ 10 km/h đến 20 km/h'}
[2025-03-07 22:52:54,889] INFO [reasoning.auto_rag] Doc 3 score: 0.7544904947280884
[2025-03-07 22:52:54,889] INFO [reasoning.auto_rag] Doc 3 metadata: {'category': 'ô tô', 'fine_amount': 'Trừ 02 điểm giấy phép lái xe', 'violation_type': 'tốc_độ', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Trừ 02 điểm giấy phép lái xe\nNội dung vi phạm: Điều khiển xe chạy quá tốc độ quy định từ 10 km/h đến 20 km/h'}
[2025-03-07 22:52:54,889] INFO [reasoning.auto_rag] Context length: 834 characters
[2025-03-07 22:52:54,895] INFO [reasoning.auto_rag] Input tokens: 508
[2025-03-07 22:52:59,678] INFO [httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-03-07 22:52:59,683] INFO [reasoning.auto_rag] Output tokens: 180
[2025-03-07 22:52:59,684] INFO [reasoning.auto_rag] Decision: Đã đủ thông tin
[2025-03-07 22:52:59,684] INFO [reasoning.auto_rag] Found sufficient information, returning final answer
[2025-03-07 22:52:59,685] INFO [utils] Function process_question completed in 5.65 seconds
[2025-03-07 22:52:59,685] INFO [__main__] Question processed in 5.65 seconds
[2025-03-07 22:52:59,688] INFO [__main__] Needs web search: False
[2025-03-07 22:52:59,688] INFO [__main__] Displaying results
[2025-03-07 22:52:59,688] INFO [__main__] Response generated using: OpenAI GPT-4o mini
[2025-03-07 22:52:59,692] INFO [__main__] Cleaning up components
[2025-03-07 22:52:59,694] INFO [retrieval.vector_store] Closing Weaviate client connection
[2025-03-07 22:52:59,697] INFO [retrieval.vector_store] Weaviate client connection closed
[2025-03-07 23:17:18,723] INFO [__main__] Starting application
[2025-03-07 23:17:18,726] INFO [__main__] Selected LLM provider: openai
[2025-03-07 23:17:18,727] INFO [__main__] Initializing components with LLM provider: openai
[2025-03-07 23:17:18,728] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-07 23:17:18,728] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-07 23:17:18,728] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-07 23:17:19,485] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-07 23:17:19,725] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-07 23:17:19,731] INFO [retrieval.vector_store] Collection exists: True
[2025-03-07 23:17:19,731] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-07 23:17:19,731] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-07 23:17:19,736] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-07 23:17:26,731] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-07 23:17:27,245] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-07 23:17:27,254] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-07 23:17:27,254] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-07 23:17:30,852] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-07 23:17:30,852] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-07 23:17:30,852] INFO [reasoning.auto_rag] Setting up OpenAI LLM with model: gpt-4o-mini
[2025-03-07 23:17:30,853] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.OPENAI
[2025-03-07 23:17:30,853] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-07 23:17:30,853] INFO [__main__] Initializing web search integration
[2025-03-07 23:17:30,853] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-07 23:17:30,853] INFO [__main__] Components initialized successfully
[2025-03-08 08:29:44,325] INFO [__main__] Starting application
[2025-03-08 08:29:44,327] INFO [__main__] Initializing configurations
[2025-03-08 08:29:44,327] INFO [__main__] Configurations initialized successfully
[2025-03-08 08:29:44,328] INFO [__main__] Selected LLM provider: openai
[2025-03-08 08:29:44,328] INFO [__main__] Initializing components with LLM provider: openai
[2025-03-08 08:29:44,328] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-08 08:29:44,328] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-08 08:29:44,328] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-08 08:29:45,188] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-08 08:29:45,498] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 08:29:45,501] INFO [retrieval.vector_store] Collection exists: True
[2025-03-08 08:29:45,502] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-08 08:29:45,502] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-08 08:29:45,504] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-08 08:42:03,516] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-08 08:42:04,042] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 08:42:04,184] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-08 08:42:04,185] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-08 08:42:06,208] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-08 08:42:06,208] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-08 08:42:06,208] INFO [reasoning.auto_rag] Setting up OpenAI LLM with model: gpt-4o-mini
[2025-03-08 08:42:13,537] INFO [__main__] Starting application
[2025-03-08 08:42:13,539] INFO [__main__] Selected LLM provider: vllm
[2025-03-08 08:42:13,539] INFO [__main__] Initializing components with LLM provider: vllm
[2025-03-08 08:42:13,539] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-08 08:42:13,539] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-08 08:42:13,539] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-08 08:42:14,272] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-08 08:42:14,530] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 08:42:14,533] INFO [retrieval.vector_store] Collection exists: True
[2025-03-08 08:42:14,533] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-08 08:42:14,534] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-08 08:42:14,536] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-08 08:42:20,116] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-08 08:42:20,689] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 08:42:20,694] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-08 08:42:20,695] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-08 08:42:22,646] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-08 08:42:22,646] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-08 08:42:22,646] INFO [reasoning.auto_rag] Setting up vLLM client with model: Qwen/Qwen2.5-14B-Instruct-AWQ
[2025-03-08 08:42:22,646] INFO [llm.vllm_client] Creating VLLMClient with config: {'api_url': 'http://192.168.100.125:8000', 'model_name': 'Qwen/Qwen2.5-14B-Instruct-AWQ', 'temperature': 0.2, 'max_tokens': 4096, 'top_p': 0.95, 'timeout': 500, 'request_timeout': 500}
[2025-03-08 08:42:22,682] INFO [llm.vllm_client] Initialized vLLM client for model: Qwen/Qwen2.5-14B-Instruct-AWQ at http://192.168.100.125:8000
[2025-03-08 08:42:22,682] INFO [reasoning.auto_rag] Successfully initialized vLLM client with API URL: http://192.168.100.125:8000
[2025-03-08 08:42:22,682] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.VLLM
[2025-03-08 08:42:22,682] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-08 08:42:22,682] INFO [__main__] Initializing web search integration
[2025-03-08 08:42:22,683] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-08 08:42:22,683] INFO [__main__] Components initialized successfully
[2025-03-08 08:42:23,188] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.OPENAI
[2025-03-08 08:42:23,188] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-08 08:42:23,188] INFO [__main__] Initializing web search integration
[2025-03-08 08:42:23,188] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-08 08:42:23,189] INFO [__main__] Components initialized successfully
[2025-03-08 08:42:35,523] INFO [__main__] Starting application
[2025-03-08 08:42:35,527] INFO [__main__] Selected LLM provider: vllm
[2025-03-08 08:42:35,528] INFO [__main__] Initializing components with LLM provider: vllm
[2025-03-08 08:42:35,528] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-08 08:42:35,529] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-08 08:42:35,530] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-08 08:42:36,192] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-08 08:42:36,420] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 08:42:36,425] INFO [retrieval.vector_store] Collection exists: True
[2025-03-08 08:42:36,425] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-08 08:42:36,425] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-08 08:42:36,427] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-08 08:42:42,724] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-08 08:42:43,341] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 08:42:43,347] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-08 08:42:43,347] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-08 08:42:45,439] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-08 08:42:45,439] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-08 08:42:45,440] INFO [reasoning.auto_rag] Setting up vLLM client with model: Qwen/Qwen2.5-14B-Instruct-AWQ
[2025-03-08 08:42:45,440] INFO [llm.vllm_client] Creating VLLMClient with config: {'api_url': 'http://192.168.100.125:8000', 'model_name': 'Qwen/Qwen2.5-14B-Instruct-AWQ', 'temperature': 0.2, 'max_tokens': 4096, 'top_p': 0.95, 'timeout': 500, 'request_timeout': 500}
[2025-03-08 08:42:45,488] INFO [llm.vllm_client] Initialized vLLM client for model: Qwen/Qwen2.5-14B-Instruct-AWQ at http://192.168.100.125:8000
[2025-03-08 08:42:45,489] INFO [reasoning.auto_rag] Successfully initialized vLLM client with API URL: http://192.168.100.125:8000
[2025-03-08 08:42:45,489] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.VLLM
[2025-03-08 08:42:45,489] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-08 08:42:45,489] INFO [__main__] Initializing web search integration
[2025-03-08 08:42:45,489] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-08 08:42:45,489] INFO [__main__] Components initialized successfully
[2025-03-08 08:43:26,882] INFO [__main__] Starting application
[2025-03-08 08:43:26,887] INFO [__main__] Selected LLM provider: vllm
[2025-03-08 08:43:26,888] INFO [__main__] Initializing components with LLM provider: vllm
[2025-03-08 08:43:26,889] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-08 08:43:26,889] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-08 08:43:26,889] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-08 08:43:26,984] INFO [__main__] Starting application
[2025-03-08 08:43:26,986] INFO [__main__] Selected LLM provider: vllm
[2025-03-08 08:43:26,986] INFO [__main__] Initializing components with LLM provider: vllm
[2025-03-08 08:43:26,986] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-08 08:43:26,986] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-08 08:43:26,986] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-08 08:43:27,612] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-08 08:43:27,790] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-08 08:43:27,846] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 08:43:27,855] INFO [retrieval.vector_store] Collection exists: True
[2025-03-08 08:43:27,856] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-08 08:43:27,856] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-08 08:43:27,860] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-08 08:43:28,085] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 08:43:28,089] INFO [retrieval.vector_store] Collection exists: True
[2025-03-08 08:43:28,089] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-08 08:43:28,090] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-08 08:43:28,094] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-08 08:43:32,707] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-08 08:43:33,082] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 08:43:33,083] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-08 08:43:33,083] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-08 08:43:33,719] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-08 08:43:34,639] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 08:43:34,645] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-08 08:43:34,648] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-08 08:43:35,406] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-08 08:43:35,406] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-08 08:43:35,406] INFO [reasoning.auto_rag] Setting up vLLM client with model: Qwen/Qwen2.5-14B-Instruct-AWQ
[2025-03-08 08:43:35,406] INFO [llm.vllm_client] Creating VLLMClient with config: {'api_url': 'http://192.168.100.125:8000', 'model_name': 'Qwen/Qwen2.5-14B-Instruct-AWQ', 'temperature': 0.2, 'max_tokens': 4096, 'top_p': 0.95, 'timeout': 500, 'request_timeout': 500}
[2025-03-08 08:43:35,440] INFO [llm.vllm_client] Initialized vLLM client for model: Qwen/Qwen2.5-14B-Instruct-AWQ at http://192.168.100.125:8000
[2025-03-08 08:43:35,440] INFO [reasoning.auto_rag] Successfully initialized vLLM client with API URL: http://192.168.100.125:8000
[2025-03-08 08:43:35,440] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.VLLM
[2025-03-08 08:43:35,440] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-08 08:43:35,440] INFO [__main__] Initializing web search integration
[2025-03-08 08:43:35,441] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-08 08:43:35,441] INFO [__main__] Components initialized successfully
[2025-03-08 08:43:37,025] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-08 08:43:37,025] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-08 08:43:37,025] INFO [reasoning.auto_rag] Setting up vLLM client with model: Qwen/Qwen2.5-14B-Instruct-AWQ
[2025-03-08 08:43:37,025] INFO [llm.vllm_client] Creating VLLMClient with config: {'api_url': 'http://192.168.100.125:8000', 'model_name': 'Qwen/Qwen2.5-14B-Instruct-AWQ', 'temperature': 0.2, 'max_tokens': 4096, 'top_p': 0.95, 'timeout': 500, 'request_timeout': 500}
[2025-03-08 08:43:37,057] INFO [llm.vllm_client] Initialized vLLM client for model: Qwen/Qwen2.5-14B-Instruct-AWQ at http://192.168.100.125:8000
[2025-03-08 08:43:37,057] INFO [reasoning.auto_rag] Successfully initialized vLLM client with API URL: http://192.168.100.125:8000
[2025-03-08 08:43:37,058] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.VLLM
[2025-03-08 08:43:37,058] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-08 08:43:37,058] INFO [__main__] Initializing web search integration
[2025-03-08 08:43:37,058] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-08 08:43:37,058] INFO [__main__] Components initialized successfully
[2025-03-08 08:43:37,059] INFO [__main__] Processing new question: Các mức phạt tiền nồng độ tô cồn của xe ô tô 
[2025-03-08 08:43:37,061] INFO [__main__] Processing question: Các mức phạt tiền nồng độ tô cồn của xe ô tô 
[2025-03-08 08:43:37,061] INFO [reasoning.auto_rag] Question validated as traffic-related via keyword: phạt
[2025-03-08 08:43:37,061] INFO [reasoning.auto_rag] Iteration 1: Retrieving documents for query: Các mức phạt tiền nồng độ tô cồn của xe ô tô 
[2025-03-08 08:43:37,062] INFO [reasoning.auto_rag] Tokenized query: các mức phạt tiền nồng_độ tô cồn của xe ô_tô
[2025-03-08 08:43:37,062] INFO [reasoning.auto_rag] Using basic DocumentRetriever for retrieval
[2025-03-08 08:43:37,062] INFO [retrieval.retriever] Original query: 'Các mức phạt tiền nồng độ tô cồn của xe ô tô '
[2025-03-08 08:43:37,063] INFO [retrieval.retriever] Tokenized query: 'các mức phạt tiền nồng_độ tô cồn của xe ô_tô'
[2025-03-08 08:43:38,200] INFO [retrieval.retriever] Retrieved 5 documents for query
[2025-03-08 08:43:38,201] INFO [retrieval.retriever] Top result score: 0.884679913520813
[2025-03-08 08:43:38,201] INFO [retrieval.retriever] Score range: 0.7026976346969604 to 0.884679913520813
[2025-03-08 08:43:38,202] INFO [reasoning.auto_rag] DocumentRetriever returned 5 documents
[2025-03-08 08:43:38,202] INFO [reasoning.auto_rag] Retrieved document details:
[2025-03-08 08:43:38,202] INFO [reasoning.auto_rag] Doc 1 score: 0.884679913520813
[2025-03-08 08:43:38,202] INFO [reasoning.auto_rag] Doc 1 metadata: {'category': 'ô tô', 'fine_amount': 'Phạt tiền từ 30.000.000 đồng đến 40.000.000 đồng', 'violation_type': 'nồng_độ_cồn', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Phạt tiền từ 30.000.000 đồng đến 40.000.000 đồng\nNội dung vi phạm: Không chấp hành yêu cầu kiểm tra về chất ma túy hoặc chất kích thích khác mà pháp luật cấm sử dụng của người thi hành công vụ'}
[2025-03-08 08:43:38,202] INFO [reasoning.auto_rag] Doc 2 score: 0.8292246460914612
[2025-03-08 08:43:38,202] INFO [reasoning.auto_rag] Doc 2 metadata: {'category': 'ô tô', 'fine_amount': 'Tước quyền sử dụng giấy phép lái xe từ 22 tháng đến 24 tháng', 'violation_type': 'nồng_độ_cồn', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Tước quyền sử dụng giấy phép lái xe từ 22 tháng đến 24 tháng\nNội dung vi phạm: Không chấp hành yêu cầu kiểm tra về chất ma túy hoặc chất kích thích khác mà pháp luật cấm sử dụng'}
[2025-03-08 08:43:38,202] INFO [reasoning.auto_rag] Doc 3 score: 0.7439647912979126
[2025-03-08 08:43:38,203] INFO [reasoning.auto_rag] Doc 3 metadata: {'category': 'ô tô', 'fine_amount': 'Phạt tiền từ 6.000.000 đồng đến 8.000.000 đồng', 'violation_type': 'nồng_độ_cồn', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Phạt tiền từ 6.000.000 đồng đến 8.000.000 đồng\nNội dung vi phạm: Điều khiển xe trên đường mà trong máu hoặc hơi thở có nồng độ cồn nhưng chưa vượt quá 50 miligam/100 mililít máu hoặc chưa vượt quá 0,25 miligam/1 lít khí thở'}
[2025-03-08 08:43:38,203] INFO [reasoning.auto_rag] Context length: 1206 characters
[2025-03-08 08:43:38,205] INFO [reasoning.auto_rag] Input tokens: 911
[2025-03-08 08:44:22,252] INFO [httpx] HTTP Request: POST http://192.168.100.125:8000/v1/completions "HTTP/1.1 200 OK"
[2025-03-08 08:44:22,264] INFO [reasoning.auto_rag] Output tokens: 5439
[2025-03-08 08:44:22,264] INFO [reasoning.auto_rag] Decision: Đã đủ thông tin
[2025-03-08 08:44:22,265] INFO [reasoning.auto_rag] Found sufficient information, returning final answer
[2025-03-08 08:44:22,265] INFO [utils] Function process_question completed in 45.20 seconds
[2025-03-08 08:44:22,266] INFO [__main__] Question processed in 45.21 seconds
[2025-03-08 08:44:22,266] INFO [__main__] Needs web search: False
[2025-03-08 08:44:22,266] INFO [__main__] Displaying results
[2025-03-08 08:44:22,267] INFO [__main__] Response generated using: Qwen2.5-14B (vLLM)
[2025-03-08 08:44:22,271] INFO [__main__] Cleaning up components
[2025-03-08 08:44:22,271] INFO [retrieval.vector_store] Closing Weaviate client connection
[2025-03-08 08:44:22,275] INFO [retrieval.vector_store] Weaviate client connection closed
[2025-03-08 08:44:48,417] INFO [__main__] Starting application
[2025-03-08 08:44:48,419] INFO [__main__] Selected LLM provider: openai
[2025-03-08 08:44:48,419] INFO [__main__] Initializing components with LLM provider: openai
[2025-03-08 08:44:48,419] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-08 08:44:48,419] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-08 08:44:48,419] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-08 08:44:49,287] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-08 08:44:49,595] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 08:44:49,598] INFO [retrieval.vector_store] Collection exists: True
[2025-03-08 08:44:49,599] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-08 08:44:49,600] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-08 08:44:49,604] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-08 08:44:54,719] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-08 08:44:55,075] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 08:44:55,079] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-08 08:44:55,080] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-08 08:44:57,452] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-08 08:44:57,452] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-08 08:44:57,452] INFO [reasoning.auto_rag] Setting up OpenAI LLM with model: gpt-4o-mini
[2025-03-08 08:44:57,452] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.OPENAI
[2025-03-08 08:44:57,452] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-08 08:44:57,452] INFO [__main__] Initializing web search integration
[2025-03-08 08:44:57,452] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-08 08:44:57,452] INFO [__main__] Components initialized successfully
[2025-03-08 08:45:02,781] INFO [__main__] Starting application
[2025-03-08 08:45:02,783] INFO [__main__] Selected LLM provider: openai
[2025-03-08 08:45:02,784] INFO [__main__] Initializing components with LLM provider: openai
[2025-03-08 08:45:02,785] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-08 08:45:02,785] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-08 08:45:02,785] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-08 08:45:03,385] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-08 08:45:03,731] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 08:45:03,734] INFO [retrieval.vector_store] Collection exists: True
[2025-03-08 08:45:03,734] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-08 08:45:03,734] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-08 08:45:03,736] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-08 08:45:08,537] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-08 08:45:08,845] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 08:45:08,849] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-08 08:45:08,849] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-08 08:45:10,775] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-08 08:45:10,775] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-08 08:45:10,776] INFO [reasoning.auto_rag] Setting up OpenAI LLM with model: gpt-4o-mini
[2025-03-08 08:45:10,776] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.OPENAI
[2025-03-08 08:45:10,776] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-08 08:45:10,776] INFO [__main__] Initializing web search integration
[2025-03-08 08:45:10,776] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-08 08:45:10,776] INFO [__main__] Components initialized successfully
[2025-03-08 08:45:10,776] INFO [__main__] Processing new question: Các mức phạt tiền nồng độ tô cồn của xe ô tô 
[2025-03-08 08:45:10,777] INFO [__main__] Processing question: Các mức phạt tiền nồng độ tô cồn của xe ô tô 
[2025-03-08 08:45:10,777] INFO [reasoning.auto_rag] Question validated as traffic-related via keyword: phạt
[2025-03-08 08:45:10,778] INFO [reasoning.auto_rag] Iteration 1: Retrieving documents for query: Các mức phạt tiền nồng độ tô cồn của xe ô tô 
[2025-03-08 08:45:10,778] INFO [reasoning.auto_rag] Tokenized query: các mức phạt tiền nồng_độ tô cồn của xe ô_tô
[2025-03-08 08:45:10,778] INFO [reasoning.auto_rag] Using basic DocumentRetriever for retrieval
[2025-03-08 08:45:10,778] INFO [retrieval.retriever] Original query: 'Các mức phạt tiền nồng độ tô cồn của xe ô tô '
[2025-03-08 08:45:10,778] INFO [retrieval.retriever] Tokenized query: 'các mức phạt tiền nồng_độ tô cồn của xe ô_tô'
[2025-03-08 08:45:11,586] INFO [retrieval.retriever] Retrieved 5 documents for query
[2025-03-08 08:45:11,586] INFO [retrieval.retriever] Top result score: 0.884679913520813
[2025-03-08 08:45:11,587] INFO [retrieval.retriever] Score range: 0.7026976346969604 to 0.884679913520813
[2025-03-08 08:45:11,588] INFO [reasoning.auto_rag] DocumentRetriever returned 5 documents
[2025-03-08 08:45:11,588] INFO [reasoning.auto_rag] Retrieved document details:
[2025-03-08 08:45:11,588] INFO [reasoning.auto_rag] Doc 1 score: 0.884679913520813
[2025-03-08 08:45:11,588] INFO [reasoning.auto_rag] Doc 1 metadata: {'category': 'ô tô', 'fine_amount': 'Phạt tiền từ 30.000.000 đồng đến 40.000.000 đồng', 'violation_type': 'nồng_độ_cồn', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Phạt tiền từ 30.000.000 đồng đến 40.000.000 đồng\nNội dung vi phạm: Không chấp hành yêu cầu kiểm tra về chất ma túy hoặc chất kích thích khác mà pháp luật cấm sử dụng của người thi hành công vụ'}
[2025-03-08 08:45:11,589] INFO [reasoning.auto_rag] Doc 2 score: 0.8292246460914612
[2025-03-08 08:45:11,589] INFO [reasoning.auto_rag] Doc 2 metadata: {'category': 'ô tô', 'fine_amount': 'Tước quyền sử dụng giấy phép lái xe từ 22 tháng đến 24 tháng', 'violation_type': 'nồng_độ_cồn', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Tước quyền sử dụng giấy phép lái xe từ 22 tháng đến 24 tháng\nNội dung vi phạm: Không chấp hành yêu cầu kiểm tra về chất ma túy hoặc chất kích thích khác mà pháp luật cấm sử dụng'}
[2025-03-08 08:45:11,589] INFO [reasoning.auto_rag] Doc 3 score: 0.7439647912979126
[2025-03-08 08:45:11,589] INFO [reasoning.auto_rag] Doc 3 metadata: {'category': 'ô tô', 'fine_amount': 'Phạt tiền từ 6.000.000 đồng đến 8.000.000 đồng', 'violation_type': 'nồng_độ_cồn', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Phạt tiền từ 6.000.000 đồng đến 8.000.000 đồng\nNội dung vi phạm: Điều khiển xe trên đường mà trong máu hoặc hơi thở có nồng độ cồn nhưng chưa vượt quá 50 miligam/100 mililít máu hoặc chưa vượt quá 0,25 miligam/1 lít khí thở'}
[2025-03-08 08:45:11,590] INFO [reasoning.auto_rag] Context length: 1206 characters
[2025-03-08 08:45:11,594] INFO [reasoning.auto_rag] Input tokens: 608
[2025-03-08 08:45:22,463] INFO [httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-03-08 08:45:22,474] INFO [reasoning.auto_rag] Output tokens: 459
[2025-03-08 08:45:22,474] INFO [reasoning.auto_rag] Decision: Cần thêm thông tin
[2025-03-08 08:45:22,474] INFO [reasoning.auto_rag] Need more information, next query: Tìm hiểu về mức phạt cho nồng độ cồn vượt quá 80 miligam/100 mililít máu hoặc 0,4 miligam/1 lít khí thở và các hình thức xử phạt khác liên quan đến nồng độ cồn khi điều khiển ô tô.
[2025-03-08 08:45:22,474] INFO [reasoning.auto_rag] Iteration 2: Retrieving documents for query: Tìm hiểu về mức phạt cho nồng độ cồn vượt quá 80 miligam/100 mililít máu hoặc 0,4 miligam/1 lít khí thở và các hình thức xử phạt khác liên quan đến nồng độ cồn khi điều khiển ô tô.
[2025-03-08 08:45:22,475] INFO [reasoning.auto_rag] Tokenized query: tìm_hiểu về mức phạt cho nồng_độ cồn vượt quá 80 miligam / 100 mililít máu hoặc 0,4 miligam / 1 lít khí thở và các hình_thức xử_phạt khác liên_quan đến nồng_độ cồn khi điều_khiển ô_tô .
[2025-03-08 08:45:22,475] INFO [reasoning.auto_rag] Using basic DocumentRetriever for retrieval
[2025-03-08 08:45:22,476] INFO [retrieval.retriever] Original query: 'Tìm hiểu về mức phạt cho nồng độ cồn vượt quá 80 miligam/100 mililít máu hoặc 0,4 miligam/1 lít khí thở và các hình thức xử phạt khác liên quan đến nồng độ cồn khi điều khiển ô tô.'
[2025-03-08 08:45:22,477] INFO [retrieval.retriever] Tokenized query: 'tìm_hiểu về mức phạt cho nồng_độ cồn vượt quá 80 miligam / 100 mililít máu hoặc 0,4 miligam / 1 lít khí thở và các hình_thức xử_phạt khác liên_quan đến nồng_độ cồn khi điều_khiển ô_tô .'
[2025-03-08 08:45:23,445] INFO [retrieval.retriever] Retrieved 5 documents for query
[2025-03-08 08:45:23,445] INFO [retrieval.retriever] Top result score: 0.9802299737930298
[2025-03-08 08:45:23,445] INFO [retrieval.retriever] Score range: 0.8822737336158752 to 0.9802299737930298
[2025-03-08 08:45:23,445] INFO [reasoning.auto_rag] DocumentRetriever returned 5 documents
[2025-03-08 08:45:23,445] INFO [reasoning.auto_rag] Retrieved document details:
[2025-03-08 08:45:23,445] INFO [reasoning.auto_rag] Doc 1 score: 0.9802299737930298
[2025-03-08 08:45:23,446] INFO [reasoning.auto_rag] Doc 1 metadata: {'category': 'ô tô', 'fine_amount': 'Phạt tiền từ 30.000.000 đồng đến 40.000.000 đồng', 'violation_type': 'nồng_độ_cồn', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Phạt tiền từ 30.000.000 đồng đến 40.000.000 đồng\nNội dung vi phạm: Điều khiển xe trên đường mà trong máu hoặc hơi thở có nồng độ cồn vượt quá 80 miligam/100 mililít máu hoặc vượt quá 0,4 miligam/1 lít khí thở'}
[2025-03-08 08:45:23,446] INFO [reasoning.auto_rag] Doc 2 score: 0.9492136836051941
[2025-03-08 08:45:23,446] INFO [reasoning.auto_rag] Doc 2 metadata: {'category': 'ô tô', 'fine_amount': 'Trừ 10 điểm giấy phép lái xe', 'violation_type': 'nồng_độ_cồn', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Trừ 10 điểm giấy phép lái xe\nNội dung vi phạm: Điều khiển xe trên đường mà trong máu hoặc hơi thở có nồng độ cồn vượt quá 50 miligam đến 80 miligam/100 mililít máu hoặc vượt quá 0,25 miligam đến 0,4 miligam/1 lít khí thở'}
[2025-03-08 08:45:23,447] INFO [reasoning.auto_rag] Doc 3 score: 0.9231983423233032
[2025-03-08 08:45:23,447] INFO [reasoning.auto_rag] Doc 3 metadata: {'category': 'ô tô', 'fine_amount': 'Phạt tiền từ 18.000.000 đồng đến 20.000.000 đồng', 'violation_type': 'nồng_độ_cồn', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Phạt tiền từ 18.000.000 đồng đến 20.000.000 đồng\nNội dung vi phạm: Điều khiển xe trên đường mà trong máu hoặc hơi thở có nồng độ cồn vượt quá 50 miligam đến 80 miligam/100 mililít máu hoặc vượt quá 0,25 miligam đến 0,4 miligam/1 lít khí thở'}
[2025-03-08 08:45:23,447] INFO [reasoning.auto_rag] Context length: 2553 characters
[2025-03-08 08:45:23,450] INFO [reasoning.auto_rag] Input tokens: 1104
[2025-03-08 08:45:51,925] INFO [httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-03-08 08:45:51,939] INFO [reasoning.auto_rag] Output tokens: 604
[2025-03-08 08:45:51,939] INFO [reasoning.auto_rag] Decision: Đã đủ thông tin
[2025-03-08 08:45:51,939] INFO [reasoning.auto_rag] Found sufficient information, returning final answer
[2025-03-08 08:45:51,940] INFO [utils] Function process_question completed in 41.16 seconds
[2025-03-08 08:45:51,940] INFO [__main__] Question processed in 41.16 seconds
[2025-03-08 08:45:51,941] INFO [__main__] Needs web search: False
[2025-03-08 08:45:51,941] INFO [__main__] Displaying results
[2025-03-08 08:45:51,942] INFO [__main__] Response generated using: OpenAI GPT-4o mini
[2025-03-08 08:45:51,947] INFO [__main__] Cleaning up components
[2025-03-08 08:45:51,948] INFO [retrieval.vector_store] Closing Weaviate client connection
[2025-03-08 08:45:51,951] INFO [retrieval.vector_store] Weaviate client connection closed
[2025-03-08 08:46:29,357] INFO [__main__] Starting application
[2025-03-08 08:46:29,360] INFO [__main__] Selected LLM provider: vllm
[2025-03-08 08:46:29,361] INFO [__main__] Initializing components with LLM provider: vllm
[2025-03-08 08:46:29,361] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-08 08:46:29,362] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-08 08:46:29,362] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-08 08:46:29,895] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-08 08:46:30,254] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 08:46:30,257] INFO [retrieval.vector_store] Collection exists: True
[2025-03-08 08:46:30,257] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-08 08:46:30,257] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-08 08:46:30,260] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-08 08:46:36,695] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-08 08:46:37,077] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 08:46:37,080] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-08 08:46:37,080] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-08 08:46:39,088] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-08 08:46:39,088] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-08 08:46:39,089] INFO [reasoning.auto_rag] Setting up vLLM client with model: Qwen/Qwen2.5-14B-Instruct-AWQ
[2025-03-08 08:46:39,089] INFO [llm.vllm_client] Creating VLLMClient with config: {'api_url': 'http://192.168.100.125:8000', 'model_name': 'Qwen/Qwen2.5-14B-Instruct-AWQ', 'temperature': 0.2, 'max_tokens': 4096, 'top_p': 0.95, 'timeout': 500, 'request_timeout': 500}
[2025-03-08 08:46:39,122] INFO [llm.vllm_client] Initialized vLLM client for model: Qwen/Qwen2.5-14B-Instruct-AWQ at http://192.168.100.125:8000
[2025-03-08 08:46:39,122] INFO [reasoning.auto_rag] Successfully initialized vLLM client with API URL: http://192.168.100.125:8000
[2025-03-08 08:46:39,122] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.VLLM
[2025-03-08 08:46:39,123] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-08 08:46:39,123] INFO [__main__] Initializing web search integration
[2025-03-08 08:46:39,123] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-08 08:46:39,123] INFO [__main__] Components initialized successfully
[2025-03-08 08:46:56,131] INFO [__main__] Starting application
[2025-03-08 08:46:56,134] INFO [__main__] Selected LLM provider: vllm
[2025-03-08 08:46:56,134] INFO [__main__] Initializing components with LLM provider: vllm
[2025-03-08 08:46:56,135] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-08 08:46:56,135] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-08 08:46:56,135] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-08 08:46:56,776] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-08 08:46:57,070] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 08:46:57,074] INFO [retrieval.vector_store] Collection exists: True
[2025-03-08 08:46:57,074] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-08 08:46:57,074] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-08 08:46:57,077] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-08 08:47:03,027] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-08 08:47:03,787] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 08:47:03,843] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-08 08:47:03,844] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-08 08:47:06,082] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-08 08:47:06,082] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-08 08:47:06,082] INFO [reasoning.auto_rag] Setting up vLLM client with model: Qwen/Qwen2.5-14B-Instruct-AWQ
[2025-03-08 08:47:06,082] INFO [llm.vllm_client] Creating VLLMClient with config: {'api_url': 'http://192.168.100.125:8000', 'model_name': 'Qwen/Qwen2.5-14B-Instruct-AWQ', 'temperature': 0.2, 'max_tokens': 4096, 'top_p': 0.95, 'timeout': 500, 'request_timeout': 500}
[2025-03-08 08:47:06,117] INFO [llm.vllm_client] Initialized vLLM client for model: Qwen/Qwen2.5-14B-Instruct-AWQ at http://192.168.100.125:8000
[2025-03-08 08:47:06,117] INFO [reasoning.auto_rag] Successfully initialized vLLM client with API URL: http://192.168.100.125:8000
[2025-03-08 08:47:06,117] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.VLLM
[2025-03-08 08:47:06,117] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-08 08:47:06,117] INFO [__main__] Initializing web search integration
[2025-03-08 08:47:06,117] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-08 08:47:06,117] INFO [__main__] Components initialized successfully
[2025-03-08 08:47:19,481] INFO [__main__] Starting application
[2025-03-08 08:47:19,483] INFO [__main__] Selected LLM provider: vllm
[2025-03-08 08:47:19,484] INFO [__main__] Initializing components with LLM provider: vllm
[2025-03-08 08:47:19,485] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-08 08:47:19,486] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-08 08:47:19,486] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-08 08:47:20,123] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-08 08:47:20,433] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 08:47:20,436] INFO [retrieval.vector_store] Collection exists: True
[2025-03-08 08:47:20,436] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-08 08:47:20,437] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-08 08:47:20,439] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-08 08:47:25,351] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-08 08:47:25,653] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 08:47:25,656] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-08 08:47:25,656] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-08 08:47:27,827] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-08 08:47:27,827] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-08 08:47:27,827] INFO [reasoning.auto_rag] Setting up vLLM client with model: Qwen/Qwen2.5-14B-Instruct-AWQ
[2025-03-08 08:47:27,827] INFO [llm.vllm_client] Creating VLLMClient with config: {'api_url': 'http://192.168.100.125:8000', 'model_name': 'Qwen/Qwen2.5-14B-Instruct-AWQ', 'temperature': 0.2, 'max_tokens': 4096, 'top_p': 0.95, 'timeout': 500, 'request_timeout': 500}
[2025-03-08 08:47:27,866] INFO [llm.vllm_client] Initialized vLLM client for model: Qwen/Qwen2.5-14B-Instruct-AWQ at http://192.168.100.125:8000
[2025-03-08 08:47:27,866] INFO [reasoning.auto_rag] Successfully initialized vLLM client with API URL: http://192.168.100.125:8000
[2025-03-08 08:47:27,866] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.VLLM
[2025-03-08 08:47:27,866] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-08 08:47:27,866] INFO [__main__] Initializing web search integration
[2025-03-08 08:47:27,867] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-08 08:47:27,867] INFO [__main__] Components initialized successfully
[2025-03-08 08:47:39,824] INFO [__main__] Starting application
[2025-03-08 08:47:39,830] INFO [__main__] Selected LLM provider: vllm
[2025-03-08 08:47:39,830] INFO [__main__] Initializing components with LLM provider: vllm
[2025-03-08 08:47:39,831] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-08 08:47:39,832] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-08 08:47:39,832] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-08 08:47:39,937] INFO [__main__] Starting application
[2025-03-08 08:47:39,941] INFO [__main__] Selected LLM provider: vllm
[2025-03-08 08:47:39,941] INFO [__main__] Initializing components with LLM provider: vllm
[2025-03-08 08:47:39,942] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-08 08:47:39,942] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-08 08:47:39,943] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-08 08:47:40,397] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-08 08:47:40,556] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-08 08:47:40,635] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 08:47:40,640] INFO [retrieval.vector_store] Collection exists: True
[2025-03-08 08:47:40,640] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-08 08:47:40,640] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-08 08:47:40,641] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-08 08:47:40,793] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 08:47:40,796] INFO [retrieval.vector_store] Collection exists: True
[2025-03-08 08:47:40,796] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-08 08:47:40,796] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-08 08:47:40,799] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-08 08:47:45,610] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-08 08:47:45,838] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 08:47:45,843] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-08 08:47:45,844] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-08 08:47:47,012] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-08 08:47:47,571] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 08:47:47,575] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-08 08:47:47,575] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-08 08:47:47,921] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-08 08:47:47,921] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-08 08:47:47,921] INFO [reasoning.auto_rag] Setting up vLLM client with model: Qwen/Qwen2.5-14B-Instruct-AWQ
[2025-03-08 08:47:47,922] INFO [llm.vllm_client] Creating VLLMClient with config: {'api_url': 'http://192.168.100.125:8000', 'model_name': 'Qwen/Qwen2.5-14B-Instruct-AWQ', 'temperature': 0.2, 'max_tokens': 4096, 'top_p': 0.95, 'timeout': 500, 'request_timeout': 500}
[2025-03-08 08:47:47,963] INFO [llm.vllm_client] Initialized vLLM client for model: Qwen/Qwen2.5-14B-Instruct-AWQ at http://192.168.100.125:8000
[2025-03-08 08:47:47,963] INFO [reasoning.auto_rag] Successfully initialized vLLM client with API URL: http://192.168.100.125:8000
[2025-03-08 08:47:47,963] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.VLLM
[2025-03-08 08:47:47,963] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-08 08:47:47,963] INFO [__main__] Initializing web search integration
[2025-03-08 08:47:47,963] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-08 08:47:47,963] INFO [__main__] Components initialized successfully
[2025-03-08 08:47:47,964] INFO [__main__] Processing new question: Điều khiển xe ô tô chạy quá tốc độ quy định từ 10 km/h đến 20 km/h bị phạt bao nhiêu tiền và trừ bao nhiêu điểm
[2025-03-08 08:47:47,964] INFO [__main__] Processing question: Điều khiển xe ô tô chạy quá tốc độ quy định từ 10 km/h đến 20 km/h bị phạt bao nhiêu tiền và trừ bao nhiêu điểm
[2025-03-08 08:47:47,965] INFO [reasoning.auto_rag] Question validated as traffic-related via keyword: phạt
[2025-03-08 08:47:47,965] INFO [reasoning.auto_rag] Iteration 1: Retrieving documents for query: Điều khiển xe ô tô chạy quá tốc độ quy định từ 10 km/h đến 20 km/h bị phạt bao nhiêu tiền và trừ bao nhiêu điểm
[2025-03-08 08:47:47,965] INFO [reasoning.auto_rag] Tokenized query: điều_khiển xe ô_tô chạy quá tốc_độ quy_định từ 10 km / h đến 20 km / h bị phạt bao_nhiêu tiền và trừ bao_nhiêu điểm
[2025-03-08 08:47:47,965] INFO [reasoning.auto_rag] Using basic DocumentRetriever for retrieval
[2025-03-08 08:47:47,966] INFO [retrieval.retriever] Original query: 'Điều khiển xe ô tô chạy quá tốc độ quy định từ 10 km/h đến 20 km/h bị phạt bao nhiêu tiền và trừ bao nhiêu điểm'
[2025-03-08 08:47:47,966] INFO [retrieval.retriever] Tokenized query: 'điều_khiển xe ô_tô chạy quá tốc_độ quy_định từ 10 km / h đến 20 km / h bị phạt bao_nhiêu tiền và trừ bao_nhiêu điểm'
[2025-03-08 08:47:49,107] INFO [retrieval.retriever] Retrieved 5 documents for query
[2025-03-08 08:47:49,107] INFO [retrieval.retriever] Top result score: 1.0
[2025-03-08 08:47:49,108] INFO [retrieval.retriever] Score range: 0.6491713523864746 to 1.0
[2025-03-08 08:47:49,108] INFO [reasoning.auto_rag] DocumentRetriever returned 5 documents
[2025-03-08 08:47:49,108] INFO [reasoning.auto_rag] Retrieved document details:
[2025-03-08 08:47:49,108] INFO [reasoning.auto_rag] Doc 1 score: 1.0
[2025-03-08 08:47:49,108] INFO [reasoning.auto_rag] Doc 1 metadata: {'category': 'ô tô', 'fine_amount': 'Trừ 02 điểm giấy phép lái xe', 'violation_type': 'tốc_độ', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Trừ 02 điểm giấy phép lái xe\nNội dung vi phạm: Điều khiển xe chạy quá tốc độ quy định từ 10 km/h đến 20 km/h'}
[2025-03-08 08:47:49,109] INFO [reasoning.auto_rag] Doc 2 score: 0.877963662147522
[2025-03-08 08:47:49,109] INFO [reasoning.auto_rag] Doc 2 metadata: {'category': 'ô tô', 'fine_amount': 'Phạt tiền từ 4.000.000 đồng đến 6.000.000 đồng', 'violation_type': 'tốc_độ', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Phạt tiền từ 4.000.000 đồng đến 6.000.000 đồng\nNội dung vi phạm: Điều khiển xe chạy quá tốc độ quy định từ 10 km/h đến 20 km/h'}
[2025-03-08 08:47:49,109] INFO [reasoning.auto_rag] Doc 3 score: 0.7984384298324585
[2025-03-08 08:47:49,109] INFO [reasoning.auto_rag] Doc 3 metadata: {'category': 'ô tô', 'fine_amount': 'Trừ 04 điểm giấy phép lái xe', 'violation_type': 'tốc_độ', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Trừ 04 điểm giấy phép lái xe\nNội dung vi phạm: Điều khiển xe chạy quá tốc độ quy định trên 20 km/h đến 35 km/h'}
[2025-03-08 08:47:49,110] INFO [reasoning.auto_rag] Context length: 834 characters
[2025-03-08 08:47:49,111] INFO [reasoning.auto_rag] Input tokens: 776
[2025-03-08 08:47:49,829] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-08 08:47:49,829] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-08 08:47:49,829] INFO [reasoning.auto_rag] Setting up vLLM client with model: Qwen/Qwen2.5-14B-Instruct-AWQ
[2025-03-08 08:47:49,829] INFO [llm.vllm_client] Creating VLLMClient with config: {'api_url': 'http://192.168.100.125:8000', 'model_name': 'Qwen/Qwen2.5-14B-Instruct-AWQ', 'temperature': 0.2, 'max_tokens': 4096, 'top_p': 0.95, 'timeout': 500, 'request_timeout': 500}
[2025-03-08 08:47:49,861] INFO [llm.vllm_client] Initialized vLLM client for model: Qwen/Qwen2.5-14B-Instruct-AWQ at http://192.168.100.125:8000
[2025-03-08 08:47:49,862] INFO [reasoning.auto_rag] Successfully initialized vLLM client with API URL: http://192.168.100.125:8000
[2025-03-08 08:47:49,862] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.VLLM
[2025-03-08 08:47:49,862] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-08 08:47:49,862] INFO [__main__] Initializing web search integration
[2025-03-08 08:47:49,862] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-08 08:47:49,862] INFO [__main__] Components initialized successfully
[2025-03-08 08:48:32,725] INFO [httpx] HTTP Request: POST http://192.168.100.125:8000/v1/completions "HTTP/1.1 200 OK"
[2025-03-08 08:48:32,735] INFO [reasoning.auto_rag] Output tokens: 5367
[2025-03-08 08:48:32,735] INFO [reasoning.auto_rag] Decision: Đã đủ thông tin
[2025-03-08 08:48:32,736] INFO [reasoning.auto_rag] Found sufficient information, returning final answer
[2025-03-08 08:48:32,736] INFO [utils] Function process_question completed in 44.77 seconds
[2025-03-08 08:48:32,736] INFO [__main__] Question processed in 44.77 seconds
[2025-03-08 08:48:32,737] INFO [__main__] Needs web search: False
[2025-03-08 08:48:32,737] INFO [__main__] Displaying results
[2025-03-08 08:48:32,737] INFO [__main__] Response generated using: Qwen2.5-14B (vLLM)
[2025-03-08 08:48:32,744] INFO [__main__] Cleaning up components
[2025-03-08 08:48:32,745] INFO [retrieval.vector_store] Closing Weaviate client connection
[2025-03-08 08:48:32,749] INFO [retrieval.vector_store] Weaviate client connection closed
[2025-03-08 09:05:07,838] INFO [__main__] Starting application
[2025-03-08 09:05:07,842] INFO [__main__] Initializing configurations
[2025-03-08 09:05:07,842] INFO [__main__] Configurations initialized successfully
[2025-03-08 09:05:07,843] INFO [__main__] Selected LLM provider: openai
[2025-03-08 09:05:07,843] INFO [__main__] Initializing components with LLM provider: openai
[2025-03-08 09:05:07,843] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-08 09:05:07,843] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-08 09:05:07,843] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-08 09:05:08,562] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-08 09:05:08,841] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 09:05:08,844] INFO [retrieval.vector_store] Collection exists: True
[2025-03-08 09:05:08,844] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-08 09:05:08,845] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-08 09:05:08,848] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-08 09:05:15,769] INFO [__main__] Starting application
[2025-03-08 09:05:15,771] INFO [__main__] Selected LLM provider: openai
[2025-03-08 09:05:15,771] INFO [__main__] Initializing components with LLM provider: openai
[2025-03-08 09:05:15,771] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-08 09:05:15,772] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-08 09:05:15,772] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-08 09:05:15,914] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-08 09:05:16,507] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-08 09:05:16,574] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 09:05:16,713] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-08 09:05:16,713] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-08 09:05:16,743] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 09:05:16,757] INFO [retrieval.vector_store] Collection exists: True
[2025-03-08 09:05:16,757] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-08 09:05:16,758] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-08 09:05:16,760] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-08 09:05:22,755] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-08 09:05:22,755] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-08 09:05:22,755] INFO [reasoning.auto_rag] Setting up OpenAI LLM with model: gpt-4o-mini
[2025-03-08 09:05:22,930] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.OPENAI
[2025-03-08 09:05:22,930] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-08 09:05:22,930] INFO [__main__] Initializing web search integration
[2025-03-08 09:05:22,930] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-08 09:05:22,931] INFO [__main__] Components initialized successfully
[2025-03-08 09:05:23,260] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-08 09:05:23,755] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 09:05:23,759] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-08 09:05:23,759] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-08 09:05:25,889] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-08 09:05:25,889] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-08 09:05:25,889] INFO [reasoning.auto_rag] Setting up OpenAI LLM with model: gpt-4o-mini
[2025-03-08 09:05:25,890] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.OPENAI
[2025-03-08 09:05:25,890] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-08 09:05:25,890] INFO [__main__] Initializing web search integration
[2025-03-08 09:05:25,890] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-08 09:05:25,890] INFO [__main__] Components initialized successfully
[2025-03-08 09:05:29,702] INFO [__main__] Starting application
[2025-03-08 09:05:29,706] INFO [__main__] Selected LLM provider: vllm
[2025-03-08 09:05:29,706] INFO [__main__] Initializing components with LLM provider: vllm
[2025-03-08 09:05:29,706] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-08 09:05:29,707] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-08 09:05:29,707] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-08 09:05:30,489] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-08 09:05:30,785] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 09:05:30,791] INFO [retrieval.vector_store] Collection exists: True
[2025-03-08 09:05:30,791] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-08 09:05:30,792] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-08 09:05:30,792] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-08 09:05:37,344] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-08 09:05:37,946] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 09:05:37,949] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-08 09:05:37,949] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-08 09:05:40,278] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-08 09:05:40,278] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-08 09:05:40,278] INFO [reasoning.auto_rag] Setting up vLLM client with model: Qwen/QwQ-32B-AWQ
[2025-03-08 09:05:40,278] INFO [llm.vllm_client] Creating VLLMClient with config: {'api_url': 'http://192.168.100.125:8000', 'model_name': 'Qwen/QwQ-32B-AWQ', 'temperature': 0.2, 'max_tokens': 4096, 'top_p': 0.95, 'timeout': 500, 'request_timeout': 500}
[2025-03-08 09:05:40,329] INFO [llm.vllm_client] Initialized vLLM client for model: Qwen/QwQ-32B-AWQ at http://192.168.100.125:8000
[2025-03-08 09:05:40,329] INFO [reasoning.auto_rag] Successfully initialized vLLM client with API URL: http://192.168.100.125:8000
[2025-03-08 09:05:40,329] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.VLLM
[2025-03-08 09:05:40,330] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-08 09:05:40,330] INFO [__main__] Initializing web search integration
[2025-03-08 09:05:40,330] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-08 09:05:40,330] INFO [__main__] Components initialized successfully
[2025-03-08 09:06:31,974] INFO [__main__] Starting application
[2025-03-08 09:06:31,977] INFO [__main__] Selected LLM provider: vllm
[2025-03-08 09:06:31,978] INFO [__main__] Initializing components with LLM provider: vllm
[2025-03-08 09:06:31,979] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-08 09:06:31,980] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-08 09:06:31,980] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-08 09:06:32,081] INFO [__main__] Starting application
[2025-03-08 09:06:32,083] INFO [__main__] Selected LLM provider: vllm
[2025-03-08 09:06:32,084] INFO [__main__] Initializing components with LLM provider: vllm
[2025-03-08 09:06:32,085] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-08 09:06:32,085] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-08 09:06:32,085] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-08 09:06:32,743] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-08 09:06:33,048] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-08 09:06:33,052] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 09:06:33,055] INFO [retrieval.vector_store] Collection exists: True
[2025-03-08 09:06:33,056] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-08 09:06:33,059] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-08 09:06:33,064] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-08 09:06:33,294] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 09:06:33,296] INFO [retrieval.vector_store] Collection exists: True
[2025-03-08 09:06:33,297] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-08 09:06:33,297] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-08 09:06:33,298] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-08 09:06:37,761] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-08 09:06:38,160] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 09:06:38,165] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-08 09:06:38,165] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-08 09:06:39,605] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-08 09:06:40,310] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 09:06:40,312] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-08 09:06:40,312] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-08 09:06:40,313] INFO [reasoning.auto_rag] Setting up vLLM client with model: Qwen/QwQ-32B-AWQ
[2025-03-08 09:06:40,313] INFO [llm.vllm_client] Creating VLLMClient with config: {'api_url': 'http://192.168.100.125:8000', 'model_name': 'Qwen/QwQ-32B-AWQ', 'temperature': 0.2, 'max_tokens': 4096, 'top_p': 0.95, 'timeout': 500, 'request_timeout': 500}
[2025-03-08 09:06:40,314] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-08 09:06:40,314] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-08 09:06:40,381] INFO [llm.vllm_client] Initialized vLLM client for model: Qwen/QwQ-32B-AWQ at http://192.168.100.125:8000
[2025-03-08 09:06:40,381] INFO [reasoning.auto_rag] Successfully initialized vLLM client with API URL: http://192.168.100.125:8000
[2025-03-08 09:06:40,382] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.VLLM
[2025-03-08 09:06:40,382] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-08 09:06:40,382] INFO [__main__] Initializing web search integration
[2025-03-08 09:06:40,382] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-08 09:06:40,382] INFO [__main__] Components initialized successfully
[2025-03-08 09:06:42,817] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-08 09:06:42,817] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-08 09:06:42,817] INFO [reasoning.auto_rag] Setting up vLLM client with model: Qwen/QwQ-32B-AWQ
[2025-03-08 09:06:42,817] INFO [llm.vllm_client] Creating VLLMClient with config: {'api_url': 'http://192.168.100.125:8000', 'model_name': 'Qwen/QwQ-32B-AWQ', 'temperature': 0.2, 'max_tokens': 4096, 'top_p': 0.95, 'timeout': 500, 'request_timeout': 500}
[2025-03-08 09:06:42,849] INFO [llm.vllm_client] Initialized vLLM client for model: Qwen/QwQ-32B-AWQ at http://192.168.100.125:8000
[2025-03-08 09:06:42,849] INFO [reasoning.auto_rag] Successfully initialized vLLM client with API URL: http://192.168.100.125:8000
[2025-03-08 09:06:42,850] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.VLLM
[2025-03-08 09:06:42,850] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-08 09:06:42,850] INFO [__main__] Initializing web search integration
[2025-03-08 09:06:42,850] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-08 09:06:42,850] INFO [__main__] Components initialized successfully
[2025-03-08 09:06:42,851] INFO [__main__] Processing new question: Điều khiển xe ô tô trên đường mà trong máu hoặc hơi thở có nồng độ cồn vượt quá 50 miligam đến 80 miligam/100 mililít máu hoặc vượt quá 0,25 miligam đến 0,4 miligam/1 lít khí thở bị phạt bao nhiêu tiền
[2025-03-08 09:06:42,853] INFO [__main__] Processing question: Điều khiển xe ô tô trên đường mà trong máu hoặc hơi thở có nồng độ cồn vượt quá 50 miligam đến 80 miligam/100 mililít máu hoặc vượt quá 0,25 miligam đến 0,4 miligam/1 lít khí thở bị phạt bao nhiêu tiền
[2025-03-08 09:06:42,853] INFO [reasoning.auto_rag] Question validated as traffic-related via keyword: phạt
[2025-03-08 09:06:42,853] INFO [reasoning.auto_rag] Iteration 1: Retrieving documents for query: Điều khiển xe ô tô trên đường mà trong máu hoặc hơi thở có nồng độ cồn vượt quá 50 miligam đến 80 miligam/100 mililít máu hoặc vượt quá 0,25 miligam đến 0,4 miligam/1 lít khí thở bị phạt bao nhiêu tiền
[2025-03-08 09:06:42,854] INFO [reasoning.auto_rag] Tokenized query: điều_khiển xe ô_tô trên đường mà trong máu hoặc hơi thở có nồng_độ cồn vượt quá 50 miligam đến 80 miligam / 100 mililít máu hoặc vượt quá 0,25 miligam đến 0,4 miligam / 1 lít khí thở bị phạt bao_nhiêu tiền
[2025-03-08 09:06:42,854] INFO [reasoning.auto_rag] Using basic DocumentRetriever for retrieval
[2025-03-08 09:06:42,854] INFO [retrieval.retriever] Original query: 'Điều khiển xe ô tô trên đường mà trong máu hoặc hơi thở có nồng độ cồn vượt quá 50 miligam đến 80 miligam/100 mililít máu hoặc vượt quá 0,25 miligam đến 0,4 miligam/1 lít khí thở bị phạt bao nhiêu tiền'
[2025-03-08 09:06:42,855] INFO [retrieval.retriever] Tokenized query: 'điều_khiển xe ô_tô trên đường mà trong máu hoặc hơi thở có nồng_độ cồn vượt quá 50 miligam đến 80 miligam / 100 mililít máu hoặc vượt quá 0,25 miligam đến 0,4 miligam / 1 lít khí thở bị phạt bao_nhiêu tiền'
[2025-03-08 09:06:44,306] INFO [retrieval.retriever] Retrieved 5 documents for query
[2025-03-08 09:06:44,306] INFO [retrieval.retriever] Top result score: 0.9967820048332214
[2025-03-08 09:06:44,307] INFO [retrieval.retriever] Score range: 0.8688719272613525 to 0.9967820048332214
[2025-03-08 09:06:44,307] INFO [reasoning.auto_rag] DocumentRetriever returned 5 documents
[2025-03-08 09:06:44,308] INFO [reasoning.auto_rag] Retrieved document details:
[2025-03-08 09:06:44,308] INFO [reasoning.auto_rag] Doc 1 score: 0.9967820048332214
[2025-03-08 09:06:44,309] INFO [reasoning.auto_rag] Doc 1 metadata: {'category': 'ô tô', 'fine_amount': 'Trừ 10 điểm giấy phép lái xe', 'violation_type': 'nồng_độ_cồn', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Trừ 10 điểm giấy phép lái xe\nNội dung vi phạm: Điều khiển xe trên đường mà trong máu hoặc hơi thở có nồng độ cồn vượt quá 50 miligam đến 80 miligam/100 mililít máu hoặc vượt quá 0,25 miligam đến 0,4 miligam/1 lít khí thở'}
[2025-03-08 09:06:44,309] INFO [reasoning.auto_rag] Doc 2 score: 0.9524011611938477
[2025-03-08 09:06:44,309] INFO [reasoning.auto_rag] Doc 2 metadata: {'category': 'ô tô', 'fine_amount': 'Phạt tiền từ 18.000.000 đồng đến 20.000.000 đồng', 'violation_type': 'nồng_độ_cồn', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Phạt tiền từ 18.000.000 đồng đến 20.000.000 đồng\nNội dung vi phạm: Điều khiển xe trên đường mà trong máu hoặc hơi thở có nồng độ cồn vượt quá 50 miligam đến 80 miligam/100 mililít máu hoặc vượt quá 0,25 miligam đến 0,4 miligam/1 lít khí thở'}
[2025-03-08 09:06:44,310] INFO [reasoning.auto_rag] Doc 3 score: 0.9128038883209229
[2025-03-08 09:06:44,310] INFO [reasoning.auto_rag] Doc 3 metadata: {'category': 'ô tô', 'fine_amount': 'Phạt tiền từ 30.000.000 đồng đến 40.000.000 đồng', 'violation_type': 'nồng_độ_cồn', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Phạt tiền từ 30.000.000 đồng đến 40.000.000 đồng\nNội dung vi phạm: Điều khiển xe trên đường mà trong máu hoặc hơi thở có nồng độ cồn vượt quá 80 miligam/100 mililít máu hoặc vượt quá 0,4 miligam/1 lít khí thở'}
[2025-03-08 09:06:44,310] INFO [reasoning.auto_rag] Context length: 1344 characters
[2025-03-08 09:06:44,315] INFO [reasoning.auto_rag] Input tokens: 1141
[2025-03-08 09:08:02,373] INFO [httpx] HTTP Request: POST http://192.168.100.125:8000/v1/completions "HTTP/1.1 200 OK"
[2025-03-08 09:08:02,378] INFO [reasoning.auto_rag] Output tokens: 4852
[2025-03-08 09:08:02,378] INFO [reasoning.auto_rag] Decision: 
[2025-03-08 09:08:02,378] WARNING [reasoning.auto_rag] Need more information but no next query provided
[2025-03-08 09:08:02,378] WARNING [reasoning.auto_rag] Exiting loop without sufficient information
[2025-03-08 09:08:02,379] INFO [utils] Function process_question completed in 79.53 seconds
[2025-03-08 09:08:02,380] INFO [__main__] Question processed in 79.53 seconds
[2025-03-08 09:08:02,381] INFO [__main__] Needs web search: True
[2025-03-08 09:08:02,381] INFO [__main__] Web search prompt triggered
[2025-03-08 09:08:02,382] INFO [__main__] Displaying results
[2025-03-08 09:08:02,382] INFO [__main__] Response generated using: Qwen2.5-14B (vLLM)
[2025-03-08 09:08:02,390] INFO [__main__] Cleaning up components
[2025-03-08 09:08:02,391] INFO [retrieval.vector_store] Closing Weaviate client connection
[2025-03-08 09:08:02,399] INFO [retrieval.vector_store] Weaviate client connection closed
[2025-03-08 09:08:02,400] INFO [__main__] Displaying web search prompt
[2025-03-08 10:43:27,261] INFO [__main__] Starting application
[2025-03-08 10:43:27,262] INFO [__main__] Initializing configurations
[2025-03-08 10:43:27,263] INFO [__main__] Configurations initialized successfully
[2025-03-08 10:43:27,263] INFO [__main__] Selected LLM provider: openai
[2025-03-08 10:43:27,263] INFO [__main__] Initializing components with LLM provider: openai
[2025-03-08 10:43:27,264] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-08 10:43:27,264] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-08 10:43:27,264] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-08 10:43:27,917] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-08 10:43:28,209] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 10:43:28,212] INFO [retrieval.vector_store] Collection exists: True
[2025-03-08 10:43:28,212] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-08 10:43:28,212] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-08 10:43:28,214] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-08 10:43:33,746] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-08 10:43:34,269] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 10:43:34,422] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-08 10:43:34,422] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-08 10:43:34,999] INFO [__main__] Starting application
[2025-03-08 10:43:35,000] INFO [__main__] Selected LLM provider: openai
[2025-03-08 10:43:35,001] INFO [__main__] Initializing components with LLM provider: openai
[2025-03-08 10:43:35,001] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-08 10:43:35,001] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-08 10:43:35,001] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-08 10:43:35,410] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-08 10:43:35,618] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 10:43:35,631] INFO [retrieval.vector_store] Collection exists: True
[2025-03-08 10:43:35,632] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-08 10:43:35,632] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-08 10:43:35,635] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-08 10:43:36,548] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-08 10:43:36,548] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-08 10:43:36,548] INFO [reasoning.auto_rag] Setting up OpenAI LLM with model: gpt-4o-mini
[2025-03-08 10:43:36,774] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.OPENAI
[2025-03-08 10:43:36,774] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-08 10:43:36,774] INFO [__main__] Initializing web search integration
[2025-03-08 10:43:36,774] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-08 10:43:36,775] INFO [__main__] Components initialized successfully
[2025-03-08 10:43:41,854] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-08 10:43:42,336] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 10:43:42,338] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-08 10:43:42,339] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-08 10:43:44,650] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-08 10:43:44,650] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-08 10:43:44,650] INFO [reasoning.auto_rag] Setting up OpenAI LLM with model: gpt-4o-mini
[2025-03-08 10:43:44,650] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.OPENAI
[2025-03-08 10:43:44,650] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-08 10:43:44,650] INFO [__main__] Initializing web search integration
[2025-03-08 10:43:44,650] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-08 10:43:44,650] INFO [__main__] Components initialized successfully
[2025-03-08 10:47:13,237] INFO [__main__] Starting application
[2025-03-08 10:47:13,240] INFO [__main__] Initializing configurations
[2025-03-08 10:47:13,240] INFO [__main__] Configurations initialized successfully
[2025-03-08 10:47:13,242] INFO [__main__] Selected LLM provider: openai
[2025-03-08 10:47:13,242] INFO [__main__] Initializing components with LLM provider: openai
[2025-03-08 10:47:13,242] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-08 10:47:13,243] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-08 10:47:13,243] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-08 10:47:13,879] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-08 10:47:14,227] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 10:47:14,230] INFO [retrieval.vector_store] Collection exists: True
[2025-03-08 10:47:14,230] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-08 10:47:14,231] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-08 10:47:14,233] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-08 10:47:19,433] INFO [__main__] Starting application
[2025-03-08 10:47:19,435] INFO [__main__] Selected LLM provider: openai
[2025-03-08 10:47:19,435] INFO [__main__] Initializing components with LLM provider: openai
[2025-03-08 10:47:19,435] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-08 10:47:19,435] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-08 10:47:19,435] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-08 10:47:19,521] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-08 10:47:20,047] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-08 10:47:20,051] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 10:47:20,195] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-08 10:47:20,195] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-08 10:47:20,290] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 10:47:20,293] INFO [retrieval.vector_store] Collection exists: True
[2025-03-08 10:47:20,293] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-08 10:47:20,293] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-08 10:47:20,296] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-08 10:47:22,453] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-08 10:47:22,453] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-08 10:47:22,453] INFO [reasoning.auto_rag] Setting up OpenAI LLM with model: gpt-4o-mini
[2025-03-08 10:47:22,686] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.OPENAI
[2025-03-08 10:47:22,686] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-08 10:47:22,686] INFO [__main__] Initializing web search integration
[2025-03-08 10:47:22,687] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-08 10:47:22,687] INFO [__main__] Components initialized successfully
[2025-03-08 10:47:26,312] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-08 10:47:26,917] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 10:47:26,920] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-08 10:47:26,920] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-08 10:47:29,138] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-08 10:47:29,138] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-08 10:47:29,138] INFO [reasoning.auto_rag] Setting up OpenAI LLM with model: gpt-4o-mini
[2025-03-08 10:47:29,138] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.OPENAI
[2025-03-08 10:47:29,139] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-08 10:47:29,139] INFO [__main__] Initializing web search integration
[2025-03-08 10:47:29,139] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-08 10:47:29,139] INFO [__main__] Components initialized successfully
[2025-03-08 11:15:06,471] INFO [__main__] Starting application
[2025-03-08 11:15:06,475] INFO [__main__] Selected LLM provider: openai
[2025-03-08 11:15:06,476] INFO [__main__] Initializing components with LLM provider: openai
[2025-03-08 11:15:06,477] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-08 11:15:06,478] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-08 11:15:06,479] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-08 11:15:06,564] INFO [__main__] Starting application
[2025-03-08 11:15:06,565] INFO [__main__] Selected LLM provider: openai
[2025-03-08 11:15:06,565] INFO [__main__] Initializing components with LLM provider: openai
[2025-03-08 11:15:06,565] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-08 11:15:06,565] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-08 11:15:06,566] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-08 11:15:07,278] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-08 11:15:07,282] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-08 11:15:07,575] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 11:15:07,579] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 11:15:07,582] INFO [retrieval.vector_store] Collection exists: True
[2025-03-08 11:15:07,583] INFO [retrieval.vector_store] Collection exists: True
[2025-03-08 11:15:07,583] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-08 11:15:07,583] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-08 11:15:07,584] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-08 11:15:07,584] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-08 11:15:07,590] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-08 11:15:07,595] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-08 11:15:13,242] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-08 11:15:13,761] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 11:15:13,763] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-08 11:15:13,763] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-08 11:15:14,462] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-08 11:15:14,975] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 11:15:14,984] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-08 11:15:14,985] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-08 11:15:15,998] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-08 11:15:15,998] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-08 11:15:15,998] INFO [reasoning.auto_rag] Setting up OpenAI LLM with model: gpt-4o-mini
[2025-03-08 11:15:15,998] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.OPENAI
[2025-03-08 11:15:15,998] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-08 11:15:15,998] INFO [__main__] Initializing web search integration
[2025-03-08 11:15:15,998] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-08 11:15:15,998] INFO [__main__] Components initialized successfully
[2025-03-08 11:15:16,000] INFO [__main__] Processing new question: Không đội mũ bảo hiểm bị phạt bao nhiêu tiền
[2025-03-08 11:15:16,001] INFO [__main__] Processing question: Không đội mũ bảo hiểm bị phạt bao nhiêu tiền
[2025-03-08 11:15:16,001] INFO [reasoning.auto_rag] Question validated as traffic-related via keyword: mũ bảo hiểm
[2025-03-08 11:15:16,001] INFO [reasoning.auto_rag] Iteration 1: Retrieving documents for query: Không đội mũ bảo hiểm bị phạt bao nhiêu tiền
[2025-03-08 11:15:16,002] INFO [reasoning.auto_rag] Tokenized query: không đội mũ bảo_hiểm bị phạt bao_nhiêu tiền
[2025-03-08 11:15:16,002] INFO [reasoning.auto_rag] Using basic DocumentRetriever for retrieval
[2025-03-08 11:15:16,002] INFO [retrieval.retriever] Original query: 'Không đội mũ bảo hiểm bị phạt bao nhiêu tiền'
[2025-03-08 11:15:16,002] INFO [retrieval.retriever] Tokenized query: 'không đội mũ bảo_hiểm bị phạt bao_nhiêu tiền'
[2025-03-08 11:15:16,668] INFO [retrieval.retriever] Retrieved 3 documents for query
[2025-03-08 11:15:16,669] INFO [retrieval.retriever] Top result score: 0.9649732112884521
[2025-03-08 11:15:16,669] INFO [retrieval.retriever] Score range: 0.2854577600955963 to 0.9649732112884521
[2025-03-08 11:15:16,669] INFO [reasoning.auto_rag] DocumentRetriever returned 3 documents
[2025-03-08 11:15:16,669] INFO [reasoning.auto_rag] Retrieved document details:
[2025-03-08 11:15:16,669] INFO [reasoning.auto_rag] Doc 1 score: 0.9649732112884521
[2025-03-08 11:15:16,669] INFO [reasoning.auto_rag] Doc 1 metadata: {'category': 'mô tô, gắn máy', 'fine_amount': 'Phạt tiền từ 400.000 đồng đến 600.000 đồng', 'violation_type': 'chở_người', 'original_text': 'Loại phương tiện: mô tô, gắn máy\nMức phạt: Phạt tiền từ 400.000 đồng đến 600.000 đồng\nNội dung vi phạm: Chở người ngồi trên xe không đội mũ bảo hiểm hoặc đội mũ bảo hiểm không cài quai đúng quy cách'}
[2025-03-08 11:15:16,670] INFO [reasoning.auto_rag] Doc 2 score: 0.9422918558120728
[2025-03-08 11:15:16,670] INFO [reasoning.auto_rag] Doc 2 metadata: {'category': 'mô tô, gắn máy', 'fine_amount': 'Phạt tiền từ 400.000 đồng đến 600.000 đồng', 'violation_type': 'giấy_tờ', 'original_text': 'Loại phương tiện: mô tô, gắn máy\nMức phạt: Phạt tiền từ 400.000 đồng đến 600.000 đồng\nNội dung vi phạm: Không đội mũ bảo hiểm hoặc đội mũ bảo hiểm không cài quai đúng quy cách'}
[2025-03-08 11:15:16,670] INFO [reasoning.auto_rag] Doc 3 score: 0.2854577600955963
[2025-03-08 11:15:16,670] INFO [reasoning.auto_rag] Doc 3 metadata: {'category': 'mô tô, gắn máy', 'fine_amount': 'Phạt tiền từ 2.000.000 đồng đến 3.000.000 đồng', 'violation_type': 'môi_trường', 'original_text': 'Loại phương tiện: mô tô, gắn máy\nMức phạt: Phạt tiền từ 2.000.000 đồng đến 3.000.000 đồng\nNội dung vi phạm: Điều khiển xe không có bộ phận giảm thanh, giảm khói hoặc có nhưng không bảo đảm quy chuẩn môi trường'}
[2025-03-08 11:15:16,671] INFO [reasoning.auto_rag] Context length: 622 characters
[2025-03-08 11:15:17,042] INFO [reasoning.auto_rag] Input tokens: 453
[2025-03-08 11:15:17,044] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-08 11:15:17,044] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-08 11:15:17,044] INFO [reasoning.auto_rag] Setting up OpenAI LLM with model: gpt-4o-mini
[2025-03-08 11:15:17,045] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.OPENAI
[2025-03-08 11:15:17,045] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-08 11:15:17,045] INFO [__main__] Initializing web search integration
[2025-03-08 11:15:17,045] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-08 11:15:17,045] INFO [__main__] Components initialized successfully
[2025-03-08 11:15:21,008] INFO [httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-03-08 11:15:21,018] INFO [reasoning.auto_rag] Output tokens: 129
[2025-03-08 11:15:21,018] INFO [reasoning.auto_rag] Decision: Đã đủ thông tin
[2025-03-08 11:15:21,019] INFO [reasoning.auto_rag] Found sufficient information, returning final answer
[2025-03-08 11:15:21,019] INFO [utils] Function process_question completed in 5.02 seconds
[2025-03-08 11:15:21,021] INFO [__main__] Question processed in 5.02 seconds
[2025-03-08 11:15:21,024] INFO [__main__] Needs web search: False
[2025-03-08 11:15:21,025] INFO [__main__] Displaying results
[2025-03-08 11:15:21,026] INFO [__main__] Response generated using: OpenAI GPT-4o mini
[2025-03-08 11:15:21,039] INFO [__main__] Cleaning up components
[2025-03-08 11:15:21,039] INFO [retrieval.vector_store] Closing Weaviate client connection
[2025-03-08 11:15:21,048] INFO [retrieval.vector_store] Weaviate client connection closed
[2025-03-08 11:16:47,044] INFO [__main__] Starting application
[2025-03-08 11:16:47,045] INFO [__main__] Selected LLM provider: openai
[2025-03-08 11:16:47,046] INFO [__main__] Initializing components with LLM provider: openai
[2025-03-08 11:16:47,046] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-08 11:16:47,046] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-08 11:16:47,047] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-08 11:16:47,177] INFO [__main__] Starting application
[2025-03-08 11:16:47,178] INFO [__main__] Selected LLM provider: openai
[2025-03-08 11:16:47,178] INFO [__main__] Initializing components with LLM provider: openai
[2025-03-08 11:16:47,178] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-08 11:16:47,179] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-08 11:16:47,179] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-08 11:16:47,532] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-08 11:16:47,740] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-08 11:16:47,753] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 11:16:47,758] INFO [retrieval.vector_store] Collection exists: True
[2025-03-08 11:16:47,758] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-08 11:16:47,759] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-08 11:16:47,760] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-08 11:16:47,980] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 11:16:47,983] INFO [retrieval.vector_store] Collection exists: True
[2025-03-08 11:16:47,983] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-08 11:16:47,983] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-08 11:16:47,985] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-08 11:16:52,572] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-08 11:16:52,985] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 11:16:52,986] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-08 11:16:52,986] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-08 11:16:53,686] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-08 11:16:54,187] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 11:16:54,191] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-08 11:16:54,191] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-08 11:16:55,209] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-08 11:16:55,209] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-08 11:16:55,209] INFO [reasoning.auto_rag] Setting up OpenAI LLM with model: gpt-4o-mini
[2025-03-08 11:16:55,209] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.OPENAI
[2025-03-08 11:16:55,209] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-08 11:16:55,209] INFO [__main__] Initializing web search integration
[2025-03-08 11:16:55,209] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-08 11:16:55,209] INFO [__main__] Components initialized successfully
[2025-03-08 11:16:55,210] INFO [__main__] Processing new question: Không chấp hành  chỉ dẫn của biển báo hiệu bị phạt nhiêu tiền đối với xe ô tô 
[2025-03-08 11:16:55,211] INFO [__main__] Processing question: Không chấp hành  chỉ dẫn của biển báo hiệu bị phạt nhiêu tiền đối với xe ô tô 
[2025-03-08 11:16:55,211] INFO [reasoning.auto_rag] Question validated as traffic-related via keyword: biển báo
[2025-03-08 11:16:55,211] INFO [reasoning.auto_rag] Iteration 1: Retrieving documents for query: Không chấp hành  chỉ dẫn của biển báo hiệu bị phạt nhiêu tiền đối với xe ô tô 
[2025-03-08 11:16:55,211] INFO [reasoning.auto_rag] Tokenized query: không chấp_hành chỉ_dẫn của biển_báo_hiệu bị phạt nhiêu tiền đối_với xe ô_tô
[2025-03-08 11:16:55,211] INFO [reasoning.auto_rag] Using basic DocumentRetriever for retrieval
[2025-03-08 11:16:55,212] INFO [retrieval.retriever] Original query: 'Không chấp hành  chỉ dẫn của biển báo hiệu bị phạt nhiêu tiền đối với xe ô tô '
[2025-03-08 11:16:55,212] INFO [retrieval.retriever] Tokenized query: 'không chấp_hành chỉ_dẫn của biển_báo_hiệu bị phạt nhiêu tiền đối_với xe ô_tô'
[2025-03-08 11:16:56,062] INFO [retrieval.retriever] Retrieved 5 documents for query
[2025-03-08 11:16:56,062] INFO [retrieval.retriever] Top result score: 0.9448574781417847
[2025-03-08 11:16:56,062] INFO [retrieval.retriever] Score range: 0.5608164072036743 to 0.9448574781417847
[2025-03-08 11:16:56,062] INFO [reasoning.auto_rag] DocumentRetriever returned 5 documents
[2025-03-08 11:16:56,062] INFO [reasoning.auto_rag] Retrieved document details:
[2025-03-08 11:16:56,062] INFO [reasoning.auto_rag] Doc 1 score: 0.9448574781417847
[2025-03-08 11:16:56,063] INFO [reasoning.auto_rag] Doc 1 metadata: {'category': 'ô tô', 'fine_amount': 'Phạt tiền từ 400.000 đồng đến 600.000 đồng', 'violation_type': 'đỗ_dừng_xe', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Phạt tiền từ 400.000 đồng đến 600.000 đồng\nNội dung vi phạm: Không chấp hành hiệu lệnh, chỉ dẫn của biển báo hiệu, vạch kẻ đường'}
[2025-03-08 11:16:56,063] INFO [reasoning.auto_rag] Doc 2 score: 0.637656569480896
[2025-03-08 11:16:56,063] INFO [reasoning.auto_rag] Doc 2 metadata: {'category': 'ô tô', 'fine_amount': 'Tịch thu thiết bị', 'violation_type': 'an_toàn', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Tịch thu thiết bị\nNội dung vi phạm: Tịch thu thiết bị phát tín hiệu ưu tiên lắp đặt, sử dụng trái quy định đối với người thực hiện hành vi điều khiển xe không được quyền ưu tiên lắp đặt, sử dụng thiết bị phát tín hiệu của xe được quyền ưu tiên'}
[2025-03-08 11:16:56,064] INFO [reasoning.auto_rag] Doc 3 score: 0.6046199202537537
[2025-03-08 11:16:56,064] INFO [reasoning.auto_rag] Doc 3 metadata: {'category': 'ô tô', 'fine_amount': 'Phạt tiền từ 4.000.000 đồng đến 6.000.000 đồng', 'violation_type': 'đèn_tín_hiệu', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Phạt tiền từ 4.000.000 đồng đến 6.000.000 đồng\nNội dung vi phạm: Đi vào khu vực cấm, đường có biển báo hiệu có nội dung cấm đi vào đối với loại phương tiện đang điều khiển'}
[2025-03-08 11:16:56,064] INFO [reasoning.auto_rag] Context length: 1138 characters
[2025-03-08 11:16:56,066] INFO [reasoning.auto_rag] Input tokens: 615
[2025-03-08 11:16:56,574] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-08 11:16:56,574] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-08 11:16:56,574] INFO [reasoning.auto_rag] Setting up OpenAI LLM with model: gpt-4o-mini
[2025-03-08 11:16:56,574] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.OPENAI
[2025-03-08 11:16:56,574] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-08 11:16:56,574] INFO [__main__] Initializing web search integration
[2025-03-08 11:16:56,575] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-08 11:16:56,575] INFO [__main__] Components initialized successfully
[2025-03-08 11:16:58,366] INFO [httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-03-08 11:16:58,368] INFO [reasoning.auto_rag] Output tokens: 133
[2025-03-08 11:16:58,368] INFO [reasoning.auto_rag] Decision: Đã đủ thông tin
[2025-03-08 11:16:58,368] INFO [reasoning.auto_rag] Found sufficient information, returning final answer
[2025-03-08 11:16:58,368] INFO [utils] Function process_question completed in 3.16 seconds
[2025-03-08 11:16:58,368] INFO [__main__] Question processed in 3.16 seconds
[2025-03-08 11:16:58,368] INFO [__main__] Needs web search: False
[2025-03-08 11:16:58,368] INFO [__main__] Displaying results
[2025-03-08 11:16:58,369] INFO [__main__] Response generated using: OpenAI GPT-4o mini
[2025-03-08 11:16:58,371] INFO [__main__] Cleaning up components
[2025-03-08 11:16:58,372] INFO [retrieval.vector_store] Closing Weaviate client connection
[2025-03-08 11:16:58,375] INFO [retrieval.vector_store] Weaviate client connection closed
[2025-03-08 11:18:38,402] INFO [__main__] Starting application
[2025-03-08 11:18:38,403] INFO [__main__] Selected LLM provider: openai
[2025-03-08 11:18:38,404] INFO [__main__] Initializing components with LLM provider: openai
[2025-03-08 11:18:38,404] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-08 11:18:38,405] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-08 11:18:38,405] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-08 11:18:38,799] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-08 11:18:38,839] INFO [__main__] Starting application
[2025-03-08 11:18:38,843] INFO [__main__] Selected LLM provider: openai
[2025-03-08 11:18:38,844] INFO [__main__] Initializing components with LLM provider: openai
[2025-03-08 11:18:38,845] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-08 11:18:38,845] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-08 11:18:38,845] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-08 11:18:39,065] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 11:18:39,068] INFO [retrieval.vector_store] Collection exists: True
[2025-03-08 11:18:39,068] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-08 11:18:39,068] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-08 11:18:39,070] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-08 11:18:39,476] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-08 11:18:39,768] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 11:18:39,770] INFO [retrieval.vector_store] Collection exists: True
[2025-03-08 11:18:39,771] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-08 11:18:39,771] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-08 11:18:39,780] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-08 11:18:44,194] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-08 11:18:44,816] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 11:18:44,820] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-08 11:18:44,820] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-08 11:18:46,058] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-08 11:18:46,563] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 11:18:46,569] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-08 11:18:46,569] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-08 11:18:47,165] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-08 11:18:47,165] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-08 11:18:47,165] INFO [reasoning.auto_rag] Setting up OpenAI LLM with model: gpt-4o-mini
[2025-03-08 11:18:47,165] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.OPENAI
[2025-03-08 11:18:47,165] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-08 11:18:47,165] INFO [__main__] Initializing web search integration
[2025-03-08 11:18:47,165] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-08 11:18:47,165] INFO [__main__] Components initialized successfully
[2025-03-08 11:18:49,846] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-08 11:18:49,846] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-08 11:18:49,846] INFO [reasoning.auto_rag] Setting up OpenAI LLM with model: gpt-4o-mini
[2025-03-08 11:18:49,846] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.OPENAI
[2025-03-08 11:18:49,846] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-08 11:18:49,846] INFO [__main__] Initializing web search integration
[2025-03-08 11:18:49,846] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-08 11:18:49,846] INFO [__main__] Components initialized successfully
[2025-03-08 11:18:49,847] INFO [__main__] Processing new question: Tôi chạy xe ô tô quá 5km/h tới 10km/h bị phạt bao nhiêu tiền và trừ bao nhiêu điểm
[2025-03-08 11:18:49,848] INFO [__main__] Processing question: Tôi chạy xe ô tô quá 5km/h tới 10km/h bị phạt bao nhiêu tiền và trừ bao nhiêu điểm
[2025-03-08 11:18:49,848] INFO [reasoning.auto_rag] Question validated as traffic-related via keyword: phạt
[2025-03-08 11:18:49,848] INFO [reasoning.auto_rag] Iteration 1: Retrieving documents for query: Tôi chạy xe ô tô quá 5km/h tới 10km/h bị phạt bao nhiêu tiền và trừ bao nhiêu điểm
[2025-03-08 11:18:49,848] INFO [reasoning.auto_rag] Tokenized query: tôi chạy xe ô_tô quá 5km / h tới 10km / h bị phạt bao_nhiêu tiền và trừ bao_nhiêu điểm
[2025-03-08 11:18:49,849] INFO [reasoning.auto_rag] Using basic DocumentRetriever for retrieval
[2025-03-08 11:18:49,849] INFO [retrieval.retriever] Original query: 'Tôi chạy xe ô tô quá 5km/h tới 10km/h bị phạt bao nhiêu tiền và trừ bao nhiêu điểm'
[2025-03-08 11:18:49,849] INFO [retrieval.retriever] Tokenized query: 'tôi chạy xe ô_tô quá 5km / h tới 10km / h bị phạt bao_nhiêu tiền và trừ bao_nhiêu điểm'
[2025-03-08 11:18:50,502] INFO [retrieval.retriever] Retrieved 5 documents for query
[2025-03-08 11:18:50,503] INFO [retrieval.retriever] Top result score: 0.7681885361671448
[2025-03-08 11:18:50,503] INFO [retrieval.retriever] Score range: 0.540818989276886 to 0.7681885361671448
[2025-03-08 11:18:50,503] INFO [reasoning.auto_rag] DocumentRetriever returned 5 documents
[2025-03-08 11:18:50,503] INFO [reasoning.auto_rag] Retrieved document details:
[2025-03-08 11:18:50,503] INFO [reasoning.auto_rag] Doc 1 score: 0.7681885361671448
[2025-03-08 11:18:50,503] INFO [reasoning.auto_rag] Doc 1 metadata: {'category': 'ô tô', 'fine_amount': 'Trừ 02 điểm giấy phép lái xe', 'violation_type': 'tốc_độ', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Trừ 02 điểm giấy phép lái xe\nNội dung vi phạm: Điều khiển xe chạy quá tốc độ quy định từ 10 km/h đến 20 km/h'}
[2025-03-08 11:18:50,504] INFO [reasoning.auto_rag] Doc 2 score: 0.6699924468994141
[2025-03-08 11:18:50,504] INFO [reasoning.auto_rag] Doc 2 metadata: {'category': 'ô tô', 'fine_amount': 'Trừ 10 điểm giấy phép lái xe', 'violation_type': 'tai_nạn', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Trừ 10 điểm giấy phép lái xe\nNội dung vi phạm: Điều khiển xe chạy quá tốc độ quy định gây tai nạn giao thông'}
[2025-03-08 11:18:50,505] INFO [reasoning.auto_rag] Doc 3 score: 0.6674532890319824
[2025-03-08 11:18:50,505] INFO [reasoning.auto_rag] Doc 3 metadata: {'category': 'ô tô', 'fine_amount': 'Phạt tiền từ 800.000 đồng đến 1.000.000 đồng', 'violation_type': 'tốc_độ', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Phạt tiền từ 800.000 đồng đến 1.000.000 đồng\nNội dung vi phạm: Điều khiển xe chạy quá tốc độ quy định từ 05 km/h đến dưới 10 km/h'}
[2025-03-08 11:18:50,505] INFO [reasoning.auto_rag] Context length: 814 characters
[2025-03-08 11:18:50,508] INFO [reasoning.auto_rag] Input tokens: 551
[2025-03-08 11:18:53,807] INFO [httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-03-08 11:18:53,812] INFO [reasoning.auto_rag] Output tokens: 227
[2025-03-08 11:18:53,812] INFO [reasoning.auto_rag] Decision: Đã đủ thông tin về mức phạt tiền, nhưng chưa đủ thông tin về việc trừ điểm.
[2025-03-08 11:18:53,813] INFO [reasoning.auto_rag] Need more information, next query: Cần tìm thông tin về việc trừ điểm cho vi phạm tốc độ từ 05 km/h đến dưới 10 km/h.
[2025-03-08 11:18:53,813] INFO [reasoning.auto_rag] Iteration 2: Retrieving documents for query: Cần tìm thông tin về việc trừ điểm cho vi phạm tốc độ từ 05 km/h đến dưới 10 km/h.
[2025-03-08 11:18:53,815] INFO [reasoning.auto_rag] Tokenized query: cần tìm thông_tin về việc trừ điểm cho vi_phạm tốc_độ từ 05 km / h đến dưới 10 km / h .
[2025-03-08 11:18:53,815] INFO [reasoning.auto_rag] Using basic DocumentRetriever for retrieval
[2025-03-08 11:18:53,817] INFO [retrieval.retriever] Original query: 'Cần tìm thông tin về việc trừ điểm cho vi phạm tốc độ từ 05 km/h đến dưới 10 km/h.'
[2025-03-08 11:18:53,817] INFO [retrieval.retriever] Tokenized query: 'cần tìm thông_tin về việc trừ điểm cho vi_phạm tốc_độ từ 05 km / h đến dưới 10 km / h .'
[2025-03-08 11:18:54,490] INFO [retrieval.retriever] Retrieved 4 documents for query
[2025-03-08 11:18:54,490] INFO [retrieval.retriever] Top result score: 1.0
[2025-03-08 11:18:54,491] INFO [retrieval.retriever] Score range: 0.6856910586357117 to 1.0
[2025-03-08 11:18:54,491] INFO [reasoning.auto_rag] DocumentRetriever returned 4 documents
[2025-03-08 11:18:54,491] INFO [reasoning.auto_rag] Retrieved document details:
[2025-03-08 11:18:54,492] INFO [reasoning.auto_rag] Doc 1 score: 1.0
[2025-03-08 11:18:54,492] INFO [reasoning.auto_rag] Doc 1 metadata: {'category': 'ô tô', 'fine_amount': 'Phạt tiền từ 800.000 đồng đến 1.000.000 đồng', 'violation_type': 'tốc_độ', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Phạt tiền từ 800.000 đồng đến 1.000.000 đồng\nNội dung vi phạm: Điều khiển xe chạy quá tốc độ quy định từ 05 km/h đến dưới 10 km/h'}
[2025-03-08 11:18:54,493] INFO [reasoning.auto_rag] Doc 2 score: 0.8632659912109375
[2025-03-08 11:18:54,493] INFO [reasoning.auto_rag] Doc 2 metadata: {'category': 'mô tô, gắn máy', 'fine_amount': 'Phạt tiền từ 400.000 đồng đến 600.000 đồng', 'violation_type': 'tốc_độ', 'original_text': 'Loại phương tiện: mô tô, gắn máy\nMức phạt: Phạt tiền từ 400.000 đồng đến 600.000 đồng\nNội dung vi phạm: Điều khiển xe chạy quá tốc độ quy định từ 05 km/h đến dưới 10 km/h'}
[2025-03-08 11:18:54,493] INFO [reasoning.auto_rag] Doc 3 score: 0.7832238078117371
[2025-03-08 11:18:54,494] INFO [reasoning.auto_rag] Doc 3 metadata: {'category': 'ô tô', 'fine_amount': 'Trừ 02 điểm giấy phép lái xe', 'violation_type': 'tốc_độ', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Trừ 02 điểm giấy phép lái xe\nNội dung vi phạm: Điều khiển xe chạy quá tốc độ quy định từ 10 km/h đến 20 km/h'}
[2025-03-08 11:18:54,494] INFO [reasoning.auto_rag] Context length: 1502 characters
[2025-03-08 11:18:54,497] INFO [reasoning.auto_rag] Input tokens: 798
[2025-03-08 11:18:57,335] INFO [httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-03-08 11:18:57,347] INFO [reasoning.auto_rag] Output tokens: 205
[2025-03-08 11:18:57,347] INFO [reasoning.auto_rag] Decision: Cần thêm thông tin
[2025-03-08 11:18:57,347] INFO [reasoning.auto_rag] Need more information, next query: Tìm thông tin về việc trừ điểm cho hành vi điều khiển xe chạy quá tốc độ quy định từ 05 km/h đến dưới 10 km/h.
[2025-03-08 11:18:57,347] WARNING [reasoning.auto_rag] Exiting loop without sufficient information
[2025-03-08 11:18:57,347] INFO [utils] Function process_question completed in 7.50 seconds
[2025-03-08 11:18:57,348] INFO [__main__] Question processed in 7.50 seconds
[2025-03-08 11:18:57,348] INFO [__main__] Needs web search: True
[2025-03-08 11:18:57,348] INFO [__main__] Web search prompt triggered
[2025-03-08 11:18:57,348] INFO [__main__] Displaying results
[2025-03-08 11:18:57,349] INFO [__main__] Response generated using: OpenAI GPT-4o mini
[2025-03-08 11:18:57,357] INFO [__main__] Cleaning up components
[2025-03-08 11:18:57,359] INFO [retrieval.vector_store] Closing Weaviate client connection
[2025-03-08 11:18:57,369] INFO [retrieval.vector_store] Weaviate client connection closed
[2025-03-08 11:18:57,369] INFO [__main__] Displaying web search prompt
[2025-03-08 11:19:20,256] INFO [__main__] Starting application
[2025-03-08 11:19:20,259] INFO [__main__] Selected LLM provider: openai
[2025-03-08 11:19:20,260] INFO [__main__] Initializing components with LLM provider: openai
[2025-03-08 11:19:20,261] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-08 11:19:20,261] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-08 11:19:20,261] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-08 11:19:20,734] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-08 11:19:21,056] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 11:19:21,058] INFO [retrieval.vector_store] Collection exists: True
[2025-03-08 11:19:21,058] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-08 11:19:21,058] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-08 11:19:21,061] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-08 11:19:27,111] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-08 11:19:27,711] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 11:19:27,715] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-08 11:19:27,715] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-08 11:19:30,097] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-08 11:19:30,097] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-08 11:19:30,097] INFO [reasoning.auto_rag] Setting up OpenAI LLM with model: gpt-4o-mini
[2025-03-08 11:19:30,097] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.OPENAI
[2025-03-08 11:19:30,097] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-08 11:19:30,097] INFO [__main__] Initializing web search integration
[2025-03-08 11:19:30,097] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-08 11:19:30,097] INFO [__main__] Components initialized successfully
[2025-03-08 11:19:30,098] INFO [__main__] Processing new question: Tôi chạy xe ô tô quá 5km/h tới 10km/h bị phạt bao nhiêu tiền và trừ bao nhiêu điểm
[2025-03-08 11:19:30,099] INFO [__main__] Processing question: Tôi chạy xe ô tô quá 5km/h tới 10km/h bị phạt bao nhiêu tiền và trừ bao nhiêu điểm
[2025-03-08 11:19:30,099] INFO [reasoning.auto_rag] Question validated as traffic-related via keyword: phạt
[2025-03-08 11:19:30,099] INFO [reasoning.auto_rag] Iteration 1: Retrieving documents for query: Tôi chạy xe ô tô quá 5km/h tới 10km/h bị phạt bao nhiêu tiền và trừ bao nhiêu điểm
[2025-03-08 11:19:30,099] INFO [reasoning.auto_rag] Tokenized query: tôi chạy xe ô_tô quá 5km / h tới 10km / h bị phạt bao_nhiêu tiền và trừ bao_nhiêu điểm
[2025-03-08 11:19:30,099] INFO [reasoning.auto_rag] Using basic DocumentRetriever for retrieval
[2025-03-08 11:19:30,099] INFO [retrieval.retriever] Original query: 'Tôi chạy xe ô tô quá 5km/h tới 10km/h bị phạt bao nhiêu tiền và trừ bao nhiêu điểm'
[2025-03-08 11:19:30,100] INFO [retrieval.retriever] Tokenized query: 'tôi chạy xe ô_tô quá 5km / h tới 10km / h bị phạt bao_nhiêu tiền và trừ bao_nhiêu điểm'
[2025-03-08 11:19:31,019] INFO [retrieval.retriever] Retrieved 5 documents for query
[2025-03-08 11:19:31,019] INFO [retrieval.retriever] Top result score: 0.7681885361671448
[2025-03-08 11:19:31,020] INFO [retrieval.retriever] Score range: 0.540818989276886 to 0.7681885361671448
[2025-03-08 11:19:31,020] INFO [reasoning.auto_rag] DocumentRetriever returned 5 documents
[2025-03-08 11:19:31,020] INFO [reasoning.auto_rag] Retrieved document details:
[2025-03-08 11:19:31,020] INFO [reasoning.auto_rag] Doc 1 score: 0.7681885361671448
[2025-03-08 11:19:31,021] INFO [reasoning.auto_rag] Doc 1 metadata: {'category': 'ô tô', 'fine_amount': 'Trừ 02 điểm giấy phép lái xe', 'violation_type': 'tốc_độ', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Trừ 02 điểm giấy phép lái xe\nNội dung vi phạm: Điều khiển xe chạy quá tốc độ quy định từ 10 km/h đến 20 km/h'}
[2025-03-08 11:19:31,021] INFO [reasoning.auto_rag] Doc 2 score: 0.6699924468994141
[2025-03-08 11:19:31,021] INFO [reasoning.auto_rag] Doc 2 metadata: {'category': 'ô tô', 'fine_amount': 'Trừ 10 điểm giấy phép lái xe', 'violation_type': 'tai_nạn', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Trừ 10 điểm giấy phép lái xe\nNội dung vi phạm: Điều khiển xe chạy quá tốc độ quy định gây tai nạn giao thông'}
[2025-03-08 11:19:31,023] INFO [reasoning.auto_rag] Doc 3 score: 0.6674532890319824
[2025-03-08 11:19:31,023] INFO [reasoning.auto_rag] Doc 3 metadata: {'category': 'ô tô', 'fine_amount': 'Phạt tiền từ 800.000 đồng đến 1.000.000 đồng', 'violation_type': 'tốc_độ', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Phạt tiền từ 800.000 đồng đến 1.000.000 đồng\nNội dung vi phạm: Điều khiển xe chạy quá tốc độ quy định từ 05 km/h đến dưới 10 km/h'}
[2025-03-08 11:19:31,024] INFO [reasoning.auto_rag] Context length: 814 characters
[2025-03-08 11:19:31,028] INFO [reasoning.auto_rag] Input tokens: 551
[2025-03-08 11:19:34,071] INFO [httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-03-08 11:19:34,075] INFO [reasoning.auto_rag] Output tokens: 172
[2025-03-08 11:19:34,075] INFO [reasoning.auto_rag] Decision: Đã đủ thông tin
[2025-03-08 11:19:34,076] INFO [reasoning.auto_rag] Found sufficient information, returning final answer
[2025-03-08 11:19:34,076] INFO [utils] Function process_question completed in 3.98 seconds
[2025-03-08 11:19:34,077] INFO [__main__] Question processed in 3.98 seconds
[2025-03-08 11:19:34,078] INFO [__main__] Needs web search: False
[2025-03-08 11:19:34,079] INFO [__main__] Displaying results
[2025-03-08 11:19:34,082] INFO [__main__] Response generated using: OpenAI GPT-4o mini
[2025-03-08 11:19:34,092] INFO [__main__] Cleaning up components
[2025-03-08 11:19:34,093] INFO [retrieval.vector_store] Closing Weaviate client connection
[2025-03-08 11:19:34,098] INFO [retrieval.vector_store] Weaviate client connection closed
[2025-03-08 11:19:34,099] INFO [__main__] Displaying web search prompt
[2025-03-08 11:20:30,666] INFO [__main__] Starting application
[2025-03-08 11:20:30,669] INFO [__main__] Selected LLM provider: vllm
[2025-03-08 11:20:30,670] INFO [__main__] Initializing components with LLM provider: vllm
[2025-03-08 11:20:30,671] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-08 11:20:30,671] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-08 11:20:30,672] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-08 11:20:31,327] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-08 11:20:31,598] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 11:20:31,601] INFO [retrieval.vector_store] Collection exists: True
[2025-03-08 11:20:31,601] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-08 11:20:31,602] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-08 11:20:31,605] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-08 11:20:36,845] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-08 11:20:37,249] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 11:20:37,253] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-08 11:20:37,254] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-08 11:20:39,417] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-08 11:20:39,417] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-08 11:20:39,417] INFO [reasoning.auto_rag] Setting up vLLM client with model: Qwen/Qwen2.5-14B-Instruct-AWQ
[2025-03-08 11:20:39,417] INFO [llm.vllm_client] Creating VLLMClient with config: {'api_url': 'http://192.168.100.125:8000', 'model_name': 'Qwen/Qwen2.5-14B-Instruct-AWQ', 'temperature': 0.2, 'max_tokens': 4096, 'top_p': 0.95, 'timeout': 500, 'request_timeout': 500}
[2025-03-08 11:20:39,449] INFO [llm.vllm_client] Initialized vLLM client for model: Qwen/Qwen2.5-14B-Instruct-AWQ at http://192.168.100.125:8000
[2025-03-08 11:20:39,449] INFO [reasoning.auto_rag] Successfully initialized vLLM client with API URL: http://192.168.100.125:8000
[2025-03-08 11:20:39,449] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.VLLM
[2025-03-08 11:20:39,449] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-08 11:20:39,450] INFO [__main__] Initializing web search integration
[2025-03-08 11:20:39,450] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-08 11:20:39,450] INFO [__main__] Components initialized successfully
[2025-03-08 11:20:39,451] INFO [__main__] Displaying web search prompt
[2025-03-08 11:20:43,884] INFO [__main__] Starting application
[2025-03-08 11:20:43,887] INFO [__main__] Selected LLM provider: vllm
[2025-03-08 11:20:43,888] INFO [__main__] Initializing components with LLM provider: vllm
[2025-03-08 11:20:43,888] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-08 11:20:43,888] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-08 11:20:43,888] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-08 11:20:44,504] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-08 11:20:44,824] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 11:20:44,830] INFO [retrieval.vector_store] Collection exists: True
[2025-03-08 11:20:44,830] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-08 11:20:44,831] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-08 11:20:44,834] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-08 11:20:51,268] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-08 11:20:51,991] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-08 11:20:51,994] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-08 11:20:51,994] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-08 11:20:54,131] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-08 11:20:54,131] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-08 11:20:54,131] INFO [reasoning.auto_rag] Setting up vLLM client with model: Qwen/Qwen2.5-14B-Instruct-AWQ
[2025-03-08 11:20:54,131] INFO [llm.vllm_client] Creating VLLMClient with config: {'api_url': 'http://192.168.100.125:8000', 'model_name': 'Qwen/Qwen2.5-14B-Instruct-AWQ', 'temperature': 0.2, 'max_tokens': 4096, 'top_p': 0.95, 'timeout': 500, 'request_timeout': 500}
[2025-03-08 11:20:54,162] INFO [llm.vllm_client] Initialized vLLM client for model: Qwen/Qwen2.5-14B-Instruct-AWQ at http://192.168.100.125:8000
[2025-03-08 11:20:54,163] INFO [reasoning.auto_rag] Successfully initialized vLLM client with API URL: http://192.168.100.125:8000
[2025-03-08 11:20:54,163] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.VLLM
[2025-03-08 11:20:54,163] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-08 11:20:54,163] INFO [__main__] Initializing web search integration
[2025-03-08 11:20:54,163] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-08 11:20:54,163] INFO [__main__] Components initialized successfully
[2025-03-08 11:20:54,164] INFO [__main__] Processing new question: Tôi chạy xe ô tô quá 5km/h tới 10km/h bị phạt bao nhiêu tiền và trừ bao nhiêu điểm
[2025-03-08 11:20:54,164] INFO [__main__] Processing question: Tôi chạy xe ô tô quá 5km/h tới 10km/h bị phạt bao nhiêu tiền và trừ bao nhiêu điểm
[2025-03-08 11:20:54,165] INFO [reasoning.auto_rag] Question validated as traffic-related via keyword: phạt
[2025-03-08 11:20:54,165] INFO [reasoning.auto_rag] Iteration 1: Retrieving documents for query: Tôi chạy xe ô tô quá 5km/h tới 10km/h bị phạt bao nhiêu tiền và trừ bao nhiêu điểm
[2025-03-08 11:20:54,165] INFO [reasoning.auto_rag] Tokenized query: tôi chạy xe ô_tô quá 5km / h tới 10km / h bị phạt bao_nhiêu tiền và trừ bao_nhiêu điểm
[2025-03-08 11:20:54,165] INFO [reasoning.auto_rag] Using basic DocumentRetriever for retrieval
[2025-03-08 11:20:54,165] INFO [retrieval.retriever] Original query: 'Tôi chạy xe ô tô quá 5km/h tới 10km/h bị phạt bao nhiêu tiền và trừ bao nhiêu điểm'
[2025-03-08 11:20:54,165] INFO [retrieval.retriever] Tokenized query: 'tôi chạy xe ô_tô quá 5km / h tới 10km / h bị phạt bao_nhiêu tiền và trừ bao_nhiêu điểm'
[2025-03-08 11:20:55,121] INFO [retrieval.retriever] Retrieved 5 documents for query
[2025-03-08 11:20:55,121] INFO [retrieval.retriever] Top result score: 0.7681885361671448
[2025-03-08 11:20:55,122] INFO [retrieval.retriever] Score range: 0.540818989276886 to 0.7681885361671448
[2025-03-08 11:20:55,123] INFO [reasoning.auto_rag] DocumentRetriever returned 5 documents
[2025-03-08 11:20:55,123] INFO [reasoning.auto_rag] Retrieved document details:
[2025-03-08 11:20:55,123] INFO [reasoning.auto_rag] Doc 1 score: 0.7681885361671448
[2025-03-08 11:20:55,123] INFO [reasoning.auto_rag] Doc 1 metadata: {'category': 'ô tô', 'fine_amount': 'Trừ 02 điểm giấy phép lái xe', 'violation_type': 'tốc_độ', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Trừ 02 điểm giấy phép lái xe\nNội dung vi phạm: Điều khiển xe chạy quá tốc độ quy định từ 10 km/h đến 20 km/h'}
[2025-03-08 11:20:55,124] INFO [reasoning.auto_rag] Doc 2 score: 0.6699924468994141
[2025-03-08 11:20:55,124] INFO [reasoning.auto_rag] Doc 2 metadata: {'category': 'ô tô', 'fine_amount': 'Trừ 10 điểm giấy phép lái xe', 'violation_type': 'tai_nạn', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Trừ 10 điểm giấy phép lái xe\nNội dung vi phạm: Điều khiển xe chạy quá tốc độ quy định gây tai nạn giao thông'}
[2025-03-08 11:20:55,125] INFO [reasoning.auto_rag] Doc 3 score: 0.6674532890319824
[2025-03-08 11:20:55,125] INFO [reasoning.auto_rag] Doc 3 metadata: {'category': 'ô tô', 'fine_amount': 'Phạt tiền từ 800.000 đồng đến 1.000.000 đồng', 'violation_type': 'tốc_độ', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Phạt tiền từ 800.000 đồng đến 1.000.000 đồng\nNội dung vi phạm: Điều khiển xe chạy quá tốc độ quy định từ 05 km/h đến dưới 10 km/h'}
[2025-03-08 11:20:55,126] INFO [reasoning.auto_rag] Context length: 814 characters
[2025-03-08 11:20:55,130] INFO [reasoning.auto_rag] Input tokens: 816
[2025-03-08 11:21:39,923] INFO [httpx] HTTP Request: POST http://192.168.100.125:8000/v1/completions "HTTP/1.1 200 OK"
[2025-03-08 11:21:39,945] INFO [reasoning.auto_rag] Output tokens: 6601
[2025-03-08 11:21:39,946] INFO [reasoning.auto_rag] Decision: Đã đủ thông tin
[2025-03-08 11:21:39,946] INFO [reasoning.auto_rag] Found sufficient information, returning final answer
[2025-03-08 11:21:39,947] INFO [utils] Function process_question completed in 45.78 seconds
[2025-03-08 11:21:39,947] INFO [__main__] Question processed in 45.78 seconds
[2025-03-08 11:21:39,948] INFO [__main__] Needs web search: False
[2025-03-08 11:21:39,948] INFO [__main__] Displaying results
[2025-03-08 11:21:39,948] INFO [__main__] Response generated using: Qwen2.5-14B (vLLM)
[2025-03-08 11:21:39,951] INFO [__main__] Cleaning up components
[2025-03-08 11:21:39,951] INFO [retrieval.vector_store] Closing Weaviate client connection
[2025-03-08 11:21:39,953] INFO [retrieval.vector_store] Weaviate client connection closed
[2025-03-08 11:21:39,953] INFO [__main__] Displaying web search prompt
[2025-03-09 09:29:23,140] INFO [__main__] Starting application
[2025-03-09 09:29:23,142] INFO [__main__] Initializing configurations
[2025-03-09 09:29:23,142] INFO [__main__] Configurations initialized successfully
[2025-03-09 09:29:23,143] INFO [__main__] Selected LLM provider: openai
[2025-03-09 09:29:23,143] INFO [__main__] Initializing components with LLM provider: openai
[2025-03-09 09:29:23,143] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-09 09:29:23,143] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-09 09:29:23,143] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-09 09:29:23,984] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-09 09:29:24,242] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-09 09:29:24,250] INFO [retrieval.vector_store] Collection exists: True
[2025-03-09 09:29:24,251] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-09 09:29:24,254] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:29:24,259] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:31:38,021] INFO [__main__] Starting application
[2025-03-09 09:31:38,025] INFO [__main__] Selected LLM provider: openai
[2025-03-09 09:31:38,025] INFO [__main__] Initializing components with LLM provider: openai
[2025-03-09 09:31:38,025] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-09 09:31:38,026] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-09 09:31:38,026] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-09 09:31:38,819] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-09 09:31:39,065] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-09 09:31:39,072] INFO [retrieval.vector_store] Collection exists: True
[2025-03-09 09:31:39,073] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-09 09:31:39,073] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:31:39,075] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:31:56,113] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-09 09:31:56,174] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-09 09:31:56,624] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-09 09:31:56,695] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-09 09:31:56,820] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-09 09:31:56,821] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-09 09:31:56,822] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-09 09:31:56,823] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-09 09:31:57,308] INFO [__main__] Starting application
[2025-03-09 09:31:57,311] INFO [__main__] Selected LLM provider: vllm
[2025-03-09 09:31:57,311] INFO [__main__] Initializing components with LLM provider: vllm
[2025-03-09 09:31:57,312] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-09 09:31:57,313] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-09 09:31:57,313] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-09 09:31:57,877] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-09 09:31:58,119] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-09 09:31:58,125] INFO [retrieval.vector_store] Collection exists: True
[2025-03-09 09:31:58,126] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-09 09:31:58,127] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:31:58,137] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:31:58,856] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:31:58,856] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-09 09:31:58,857] INFO [reasoning.auto_rag] Setting up OpenAI LLM with model: gpt-4o-mini
[2025-03-09 09:31:59,614] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:31:59,614] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-09 09:31:59,615] INFO [reasoning.auto_rag] Setting up OpenAI LLM with model: gpt-4o-mini
[2025-03-09 09:32:02,799] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-09 09:32:03,045] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-09 09:32:03,049] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-09 09:32:03,049] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-09 09:32:05,051] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:32:05,052] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-09 09:32:05,052] INFO [reasoning.auto_rag] Setting up vLLM client with model: Qwen/Qwen2.5-14B-Instruct-AWQ
[2025-03-09 09:32:05,052] INFO [llm.vllm_client] Creating VLLMClient with config: {'api_url': 'http://192.168.100.125:8000', 'model_name': 'Qwen/Qwen2.5-14B-Instruct-AWQ', 'temperature': 0.2, 'max_tokens': 512, 'top_p': 0.95, 'timeout': 500, 'request_timeout': 500}
[2025-03-09 09:32:05,090] INFO [llm.vllm_client] Initialized vLLM client for model: Qwen/Qwen2.5-14B-Instruct-AWQ at http://192.168.100.125:8000
[2025-03-09 09:32:05,090] INFO [reasoning.auto_rag] Successfully initialized vLLM client with API URL: http://192.168.100.125:8000
[2025-03-09 09:32:05,090] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.VLLM
[2025-03-09 09:32:05,090] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-09 09:32:05,091] INFO [__main__] Initializing web search integration
[2025-03-09 09:32:05,091] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-09 09:32:05,091] INFO [__main__] Components initialized successfully
[2025-03-09 09:32:12,314] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.OPENAI
[2025-03-09 09:32:12,314] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.OPENAI
[2025-03-09 09:32:12,314] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-09 09:32:12,314] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-09 09:32:12,314] INFO [__main__] Initializing web search integration
[2025-03-09 09:32:12,315] INFO [__main__] Initializing web search integration
[2025-03-09 09:32:12,315] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-09 09:32:12,315] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-09 09:32:12,315] INFO [__main__] Components initialized successfully
[2025-03-09 09:32:12,315] INFO [__main__] Components initialized successfully
[2025-03-09 09:32:32,511] INFO [__main__] Starting application
[2025-03-09 09:32:32,517] INFO [__main__] Selected LLM provider: vllm
[2025-03-09 09:32:32,518] INFO [__main__] Initializing components with LLM provider: vllm
[2025-03-09 09:32:32,518] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-09 09:32:32,520] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-09 09:32:32,521] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-09 09:32:32,615] INFO [__main__] Starting application
[2025-03-09 09:32:32,616] INFO [__main__] Selected LLM provider: vllm
[2025-03-09 09:32:32,618] INFO [__main__] Initializing components with LLM provider: vllm
[2025-03-09 09:32:32,618] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-09 09:32:32,618] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-09 09:32:32,618] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-09 09:32:32,972] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-09 09:32:32,997] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-09 09:32:33,192] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-09 09:32:33,201] INFO [retrieval.vector_store] Collection exists: True
[2025-03-09 09:32:33,201] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-09 09:32:33,201] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:32:33,203] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:32:33,233] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-09 09:32:33,242] INFO [retrieval.vector_store] Collection exists: True
[2025-03-09 09:32:33,242] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-09 09:32:33,244] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:32:33,247] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:32:37,578] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-09 09:32:37,803] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-09 09:32:37,807] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-09 09:32:37,807] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-09 09:32:38,218] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-09 09:32:38,458] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-09 09:32:38,780] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-09 09:32:38,781] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-09 09:32:39,881] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:32:39,881] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-09 09:32:39,882] INFO [reasoning.auto_rag] Setting up vLLM client with model: Qwen/Qwen2.5-14B-Instruct-AWQ
[2025-03-09 09:32:39,882] INFO [llm.vllm_client] Creating VLLMClient with config: {'api_url': 'http://192.168.100.125:8000', 'model_name': 'Qwen/Qwen2.5-14B-Instruct-AWQ', 'temperature': 0.2, 'max_tokens': 512, 'top_p': 0.95, 'timeout': 500, 'request_timeout': 500}
[2025-03-09 09:32:39,926] INFO [llm.vllm_client] Initialized vLLM client for model: Qwen/Qwen2.5-14B-Instruct-AWQ at http://192.168.100.125:8000
[2025-03-09 09:32:39,926] INFO [reasoning.auto_rag] Successfully initialized vLLM client with API URL: http://192.168.100.125:8000
[2025-03-09 09:32:39,926] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.VLLM
[2025-03-09 09:32:39,927] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-09 09:32:39,927] INFO [__main__] Initializing web search integration
[2025-03-09 09:32:39,927] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-09 09:32:39,927] INFO [__main__] Components initialized successfully
[2025-03-09 09:32:41,654] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:32:41,655] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-09 09:32:41,655] INFO [reasoning.auto_rag] Setting up vLLM client with model: Qwen/Qwen2.5-14B-Instruct-AWQ
[2025-03-09 09:32:41,655] INFO [llm.vllm_client] Creating VLLMClient with config: {'api_url': 'http://192.168.100.125:8000', 'model_name': 'Qwen/Qwen2.5-14B-Instruct-AWQ', 'temperature': 0.2, 'max_tokens': 512, 'top_p': 0.95, 'timeout': 500, 'request_timeout': 500}
[2025-03-09 09:32:41,688] INFO [llm.vllm_client] Initialized vLLM client for model: Qwen/Qwen2.5-14B-Instruct-AWQ at http://192.168.100.125:8000
[2025-03-09 09:32:41,688] INFO [reasoning.auto_rag] Successfully initialized vLLM client with API URL: http://192.168.100.125:8000
[2025-03-09 09:32:41,688] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.VLLM
[2025-03-09 09:32:41,688] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-09 09:32:41,689] INFO [__main__] Initializing web search integration
[2025-03-09 09:32:41,689] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-09 09:32:41,689] INFO [__main__] Components initialized successfully
[2025-03-09 09:32:41,689] INFO [__main__] Processing new question: Bé Ba chạy xe nằm trên yên xe, bé Ba sẽ bị phạt bao nhiêu tiền ?
[2025-03-09 09:32:41,690] INFO [__main__] Processing question: Bé Ba chạy xe nằm trên yên xe, bé Ba sẽ bị phạt bao nhiêu tiền ?
[2025-03-09 09:32:41,691] INFO [reasoning.auto_rag] Question validated as traffic-related via keyword: phạt
[2025-03-09 09:32:41,691] INFO [reasoning.auto_rag] Iteration 1: Retrieving documents for query: Bé Ba chạy xe nằm trên yên xe, bé Ba sẽ bị phạt bao nhiêu tiền ?
[2025-03-09 09:32:41,694] INFO [reasoning.auto_rag] Tokenized query: bé ba chạy xe nằm trên yên xe , bé ba sẽ bị phạt bao_nhiêu tiền ?
[2025-03-09 09:32:41,694] INFO [reasoning.auto_rag] Using basic DocumentRetriever for retrieval
[2025-03-09 09:32:41,694] INFO [retrieval.retriever] Original query: 'Bé Ba chạy xe nằm trên yên xe, bé Ba sẽ bị phạt bao nhiêu tiền ?'
[2025-03-09 09:32:41,694] INFO [retrieval.retriever] Tokenized query: 'bé ba chạy xe nằm trên yên xe , bé ba sẽ bị phạt bao_nhiêu tiền ?'
[2025-03-09 09:32:42,674] INFO [retrieval.retriever] Retrieved 3 documents for query
[2025-03-09 09:32:42,675] INFO [retrieval.retriever] Top result score: 0.5582802295684814
[2025-03-09 09:32:42,675] INFO [retrieval.retriever] Score range: 0.5 to 0.5582802295684814
[2025-03-09 09:32:42,675] INFO [reasoning.auto_rag] DocumentRetriever returned 3 documents
[2025-03-09 09:32:42,675] INFO [reasoning.auto_rag] Retrieved document details:
[2025-03-09 09:32:42,675] INFO [reasoning.auto_rag] Doc 1 score: 0.5582802295684814
[2025-03-09 09:32:42,675] INFO [reasoning.auto_rag] Doc 1 metadata: {'category': 'mô tô, gắn máy', 'fine_amount': 'Tịch thu phương tiện', 'violation_type': 'lái_xe_nguy_hiểm', 'original_text': 'Loại phương tiện: mô tô, gắn máy\nMức phạt: Tịch thu phương tiện\nNội dung vi phạm: Nằm trên yên xe điều khiển xe; thay người điều khiển khi xe đang chạy; quay người về phía sau để điều khiển xe hoặc bịt mắt điều khiển xe'}
[2025-03-09 09:32:42,676] INFO [reasoning.auto_rag] Doc 2 score: 0.5088871717453003
[2025-03-09 09:32:42,676] INFO [reasoning.auto_rag] Doc 2 metadata: {'category': 'mô tô, gắn máy', 'fine_amount': 'Tịch thu phương tiện', 'violation_type': 'lái_xe_nguy_hiểm', 'original_text': 'Loại phương tiện: mô tô, gắn máy\nMức phạt: Tịch thu phương tiện\nNội dung vi phạm: Điều khiển xe chạy bằng một bánh đối với xe hai bánh, chạy bằng hai bánh đối với xe ba bánh'}
[2025-03-09 09:32:42,676] INFO [reasoning.auto_rag] Doc 3 score: 0.5
[2025-03-09 09:32:42,676] INFO [reasoning.auto_rag] Doc 3 metadata: {'category': 'ô tô', 'fine_amount': 'Phạt tiền từ 800.000 đồng đến 1.000.000 đồng', 'violation_type': 'trẻ_em', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Phạt tiền từ 800.000 đồng đến 1.000.000 đồng\nNội dung vi phạm: Chở trẻ em dưới 10 tuổi và chiều cao dưới 1,35 mét trên xe ô tô ngồi cùng hàng ghế với người lái xe'}
[2025-03-09 09:32:42,676] INFO [reasoning.auto_rag] Context length: 627 characters
[2025-03-09 09:32:42,678] INFO [reasoning.auto_rag] Input tokens: 689
[2025-03-09 09:32:48,133] INFO [httpx] HTTP Request: POST http://192.168.100.125:8000/v1/completions "HTTP/1.1 200 OK"
[2025-03-09 09:32:48,137] INFO [reasoning.auto_rag] Output tokens: 888
[2025-03-09 09:32:48,137] INFO [reasoning.auto_rag] Decision: Cần thêm thông tin
[2025-03-09 09:32:48,137] INFO [reasoning.auto_rag] Need more information, next query: Tìm mức phạt tiền cụ thể cho hành vi nằm trên yên xe điều khiển xe đối với mô tô, gắn máy
[2025-03-09 09:32:48,137] INFO [reasoning.auto_rag] Iteration 2: Retrieving documents for query: Tìm mức phạt tiền cụ thể cho hành vi nằm trên yên xe điều khiển xe đối với mô tô, gắn máy
[2025-03-09 09:32:48,139] INFO [reasoning.auto_rag] Tokenized query: tìm mức phạt tiền cụ_thể cho hành_vi nằm trên yên xe điều_khiển xe đối_với mô_tô , gắn máy
[2025-03-09 09:32:48,139] INFO [reasoning.auto_rag] Using basic DocumentRetriever for retrieval
[2025-03-09 09:32:48,140] INFO [retrieval.retriever] Original query: 'Tìm mức phạt tiền cụ thể cho hành vi nằm trên yên xe điều khiển xe đối với mô tô, gắn máy'
[2025-03-09 09:32:48,140] INFO [retrieval.retriever] Tokenized query: 'tìm mức phạt tiền cụ_thể cho hành_vi nằm trên yên xe điều_khiển xe đối_với mô_tô , gắn máy'
[2025-03-09 09:32:48,732] INFO [retrieval.retriever] Retrieved 3 documents for query
[2025-03-09 09:32:48,732] INFO [retrieval.retriever] Top result score: 1.0
[2025-03-09 09:32:48,732] INFO [retrieval.retriever] Score range: 0.5821736454963684 to 1.0
[2025-03-09 09:32:48,732] INFO [reasoning.auto_rag] DocumentRetriever returned 3 documents
[2025-03-09 09:32:48,732] INFO [reasoning.auto_rag] Retrieved document details:
[2025-03-09 09:32:48,732] INFO [reasoning.auto_rag] Doc 1 score: 1.0
[2025-03-09 09:32:48,732] INFO [reasoning.auto_rag] Doc 1 metadata: {'category': 'mô tô, gắn máy', 'fine_amount': 'Tịch thu phương tiện', 'violation_type': 'lái_xe_nguy_hiểm', 'original_text': 'Loại phương tiện: mô tô, gắn máy\nMức phạt: Tịch thu phương tiện\nNội dung vi phạm: Nằm trên yên xe điều khiển xe; thay người điều khiển khi xe đang chạy; quay người về phía sau để điều khiển xe hoặc bịt mắt điều khiển xe'}
[2025-03-09 09:32:48,733] INFO [reasoning.auto_rag] Doc 2 score: 0.7740617394447327
[2025-03-09 09:32:48,733] INFO [reasoning.auto_rag] Doc 2 metadata: {'category': 'mô tô, gắn máy', 'fine_amount': 'Tước quyền sử dụng giấy phép lái xe từ 22 tháng đến 24 tháng', 'violation_type': 'lái_xe_nguy_hiểm', 'original_text': 'Loại phương tiện: mô tô, gắn máy\nMức phạt: Tước quyền sử dụng giấy phép lái xe từ 22 tháng đến 24 tháng\nNội dung vi phạm: Nằm trên yên xe điều khiển xe; thay người điều khiển khi xe đang chạy; quay người về phía sau để điều khiển xe'}
[2025-03-09 09:32:48,733] INFO [reasoning.auto_rag] Doc 3 score: 0.5821736454963684
[2025-03-09 09:32:48,733] INFO [reasoning.auto_rag] Doc 3 metadata: {'category': 'mô tô, gắn máy', 'fine_amount': 'Tịch thu phương tiện', 'violation_type': 'lái_xe_nguy_hiểm', 'original_text': 'Loại phương tiện: mô tô, gắn máy\nMức phạt: Tịch thu phương tiện\nNội dung vi phạm: Điều khiển xe chạy bằng một bánh đối với xe hai bánh, chạy bằng hai bánh đối với xe ba bánh'}
[2025-03-09 09:32:48,734] INFO [reasoning.auto_rag] Context length: 1293 characters
[2025-03-09 09:32:48,736] INFO [reasoning.auto_rag] Input tokens: 1016
[2025-03-09 09:32:54,170] INFO [httpx] HTTP Request: POST http://192.168.100.125:8000/v1/completions "HTTP/1.1 200 OK"
[2025-03-09 09:32:54,172] INFO [reasoning.auto_rag] Output tokens: 900
[2025-03-09 09:32:54,173] INFO [reasoning.auto_rag] Decision: Cần thêm thông tin
[2025-03-09 09:32:54,173] INFO [reasoning.auto_rag] Need more information, next query: Tìm hiểu xem có quy định nào khác về việc phạt tiền cho hành vi nằm trên yên xe điều khiển xe mô tô, gắn máy không.
[2025-03-09 09:32:54,173] WARNING [reasoning.auto_rag] Exiting loop without sufficient information
[2025-03-09 09:32:54,174] INFO [utils] Function process_question completed in 12.48 seconds
[2025-03-09 09:32:54,175] INFO [__main__] Question processed in 12.48 seconds
[2025-03-09 09:32:54,175] INFO [__main__] Needs web search: True
[2025-03-09 09:32:54,176] INFO [__main__] Web search prompt triggered
[2025-03-09 09:32:54,176] INFO [__main__] Displaying results
[2025-03-09 09:32:54,176] INFO [__main__] Response generated using: Qwen2.5-14B (vLLM)
[2025-03-09 09:32:54,179] INFO [__main__] Cleaning up components
[2025-03-09 09:32:54,180] INFO [retrieval.vector_store] Closing Weaviate client connection
[2025-03-09 09:32:54,187] INFO [retrieval.vector_store] Weaviate client connection closed
[2025-03-09 09:32:54,187] INFO [__main__] Displaying web search prompt
[2025-03-09 09:33:25,493] INFO [__main__] Starting application
[2025-03-09 09:33:25,496] INFO [__main__] Selected LLM provider: vllm
[2025-03-09 09:33:25,497] INFO [__main__] Initializing components with LLM provider: vllm
[2025-03-09 09:33:25,498] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-09 09:33:25,499] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-09 09:33:25,499] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-09 09:33:25,906] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-09 09:33:26,134] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-09 09:33:26,142] INFO [retrieval.vector_store] Collection exists: True
[2025-03-09 09:33:26,142] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-09 09:33:26,142] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:33:26,145] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:33:26,257] INFO [__main__] Starting application
[2025-03-09 09:33:26,259] INFO [__main__] Selected LLM provider: openai
[2025-03-09 09:33:26,259] INFO [__main__] Initializing components with LLM provider: openai
[2025-03-09 09:33:26,259] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-09 09:33:26,259] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-09 09:33:26,260] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-09 09:33:26,923] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-09 09:33:27,166] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-09 09:33:27,171] INFO [retrieval.vector_store] Collection exists: True
[2025-03-09 09:33:27,171] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-09 09:33:27,171] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:33:27,173] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:33:30,682] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-09 09:33:30,904] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-09 09:33:30,911] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-09 09:33:30,911] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-09 09:33:32,526] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-09 09:33:33,255] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-09 09:33:33,258] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-09 09:33:33,258] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-09 09:33:33,258] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:33:33,259] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-09 09:33:33,259] INFO [reasoning.auto_rag] Setting up vLLM client with model: Qwen/Qwen2.5-14B-Instruct-AWQ
[2025-03-09 09:33:33,260] INFO [llm.vllm_client] Creating VLLMClient with config: {'api_url': 'http://192.168.100.125:8000', 'model_name': 'Qwen/Qwen2.5-14B-Instruct-AWQ', 'temperature': 0.2, 'max_tokens': 512, 'top_p': 0.95, 'timeout': 500, 'request_timeout': 500}
[2025-03-09 09:33:33,312] INFO [llm.vllm_client] Initialized vLLM client for model: Qwen/Qwen2.5-14B-Instruct-AWQ at http://192.168.100.125:8000
[2025-03-09 09:33:33,312] INFO [reasoning.auto_rag] Successfully initialized vLLM client with API URL: http://192.168.100.125:8000
[2025-03-09 09:33:33,312] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.VLLM
[2025-03-09 09:33:33,312] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-09 09:33:33,312] INFO [__main__] Initializing web search integration
[2025-03-09 09:33:33,313] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-09 09:33:33,313] INFO [__main__] Components initialized successfully
[2025-03-09 09:33:35,350] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:33:35,350] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-09 09:33:35,350] INFO [reasoning.auto_rag] Setting up OpenAI LLM with model: gpt-4o-mini
[2025-03-09 09:33:35,351] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.OPENAI
[2025-03-09 09:33:35,351] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-09 09:33:35,351] INFO [__main__] Initializing web search integration
[2025-03-09 09:33:35,351] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-09 09:33:35,351] INFO [__main__] Components initialized successfully
[2025-03-09 09:33:35,351] INFO [__main__] Displaying web search prompt
[2025-03-09 09:33:37,674] INFO [__main__] Starting application
[2025-03-09 09:33:37,676] INFO [__main__] Selected LLM provider: openai
[2025-03-09 09:33:37,676] INFO [__main__] Initializing components with LLM provider: openai
[2025-03-09 09:33:37,677] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-09 09:33:37,677] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-09 09:33:37,677] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-09 09:33:37,754] INFO [__main__] Starting application
[2025-03-09 09:33:37,756] INFO [__main__] Selected LLM provider: openai
[2025-03-09 09:33:37,756] INFO [__main__] Initializing components with LLM provider: openai
[2025-03-09 09:33:37,756] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-09 09:33:37,756] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-09 09:33:37,756] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-09 09:33:38,285] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-09 09:33:38,317] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-09 09:33:38,593] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-09 09:33:38,595] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-09 09:33:38,597] INFO [retrieval.vector_store] Collection exists: True
[2025-03-09 09:33:38,597] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-09 09:33:38,597] INFO [retrieval.vector_store] Collection exists: True
[2025-03-09 09:33:38,598] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:33:38,599] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-09 09:33:38,600] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:33:38,603] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:33:38,603] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:33:43,807] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-09 09:33:44,061] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-09 09:33:44,140] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-09 09:33:44,144] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-09 09:33:44,144] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-09 09:33:44,519] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-09 09:33:44,524] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-09 09:33:44,524] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-09 09:33:46,206] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:33:46,206] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-09 09:33:46,206] INFO [reasoning.auto_rag] Setting up OpenAI LLM with model: gpt-4o-mini
[2025-03-09 09:33:46,206] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.OPENAI
[2025-03-09 09:33:46,206] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-09 09:33:46,206] INFO [__main__] Initializing web search integration
[2025-03-09 09:33:46,206] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-09 09:33:46,206] INFO [__main__] Components initialized successfully
[2025-03-09 09:33:46,807] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:33:46,807] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-09 09:33:46,807] INFO [reasoning.auto_rag] Setting up OpenAI LLM with model: gpt-4o-mini
[2025-03-09 09:33:46,808] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.OPENAI
[2025-03-09 09:33:46,808] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-09 09:33:46,808] INFO [__main__] Initializing web search integration
[2025-03-09 09:33:46,808] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-09 09:33:46,808] INFO [__main__] Components initialized successfully
[2025-03-09 09:33:46,809] INFO [__main__] Processing new question: Bé Ba chạy xe nằm trên yên xe, bé Ba sẽ bị phạt bao nhiêu tiền ?
[2025-03-09 09:33:46,811] INFO [__main__] Processing question: Bé Ba chạy xe nằm trên yên xe, bé Ba sẽ bị phạt bao nhiêu tiền ?
[2025-03-09 09:33:46,811] INFO [reasoning.auto_rag] Question validated as traffic-related via keyword: phạt
[2025-03-09 09:33:46,811] INFO [reasoning.auto_rag] Iteration 1: Retrieving documents for query: Bé Ba chạy xe nằm trên yên xe, bé Ba sẽ bị phạt bao nhiêu tiền ?
[2025-03-09 09:33:46,812] INFO [reasoning.auto_rag] Tokenized query: bé ba chạy xe nằm trên yên xe , bé ba sẽ bị phạt bao_nhiêu tiền ?
[2025-03-09 09:33:46,813] INFO [reasoning.auto_rag] Using basic DocumentRetriever for retrieval
[2025-03-09 09:33:46,814] INFO [retrieval.retriever] Original query: 'Bé Ba chạy xe nằm trên yên xe, bé Ba sẽ bị phạt bao nhiêu tiền ?'
[2025-03-09 09:33:46,814] INFO [retrieval.retriever] Tokenized query: 'bé ba chạy xe nằm trên yên xe , bé ba sẽ bị phạt bao_nhiêu tiền ?'
[2025-03-09 09:33:47,804] INFO [retrieval.retriever] Retrieved 3 documents for query
[2025-03-09 09:33:47,805] INFO [retrieval.retriever] Top result score: 0.5582802295684814
[2025-03-09 09:33:47,806] INFO [retrieval.retriever] Score range: 0.5 to 0.5582802295684814
[2025-03-09 09:33:47,806] INFO [reasoning.auto_rag] DocumentRetriever returned 3 documents
[2025-03-09 09:33:47,806] INFO [reasoning.auto_rag] Retrieved document details:
[2025-03-09 09:33:47,806] INFO [reasoning.auto_rag] Doc 1 score: 0.5582802295684814
[2025-03-09 09:33:47,806] INFO [reasoning.auto_rag] Doc 1 metadata: {'category': 'mô tô, gắn máy', 'fine_amount': 'Tịch thu phương tiện', 'violation_type': 'lái_xe_nguy_hiểm', 'original_text': 'Loại phương tiện: mô tô, gắn máy\nMức phạt: Tịch thu phương tiện\nNội dung vi phạm: Nằm trên yên xe điều khiển xe; thay người điều khiển khi xe đang chạy; quay người về phía sau để điều khiển xe hoặc bịt mắt điều khiển xe'}
[2025-03-09 09:33:47,807] INFO [reasoning.auto_rag] Doc 2 score: 0.5088871717453003
[2025-03-09 09:33:47,808] INFO [reasoning.auto_rag] Doc 2 metadata: {'category': 'mô tô, gắn máy', 'fine_amount': 'Tịch thu phương tiện', 'violation_type': 'lái_xe_nguy_hiểm', 'original_text': 'Loại phương tiện: mô tô, gắn máy\nMức phạt: Tịch thu phương tiện\nNội dung vi phạm: Điều khiển xe chạy bằng một bánh đối với xe hai bánh, chạy bằng hai bánh đối với xe ba bánh'}
[2025-03-09 09:33:47,808] INFO [reasoning.auto_rag] Doc 3 score: 0.5
[2025-03-09 09:33:47,808] INFO [reasoning.auto_rag] Doc 3 metadata: {'category': 'ô tô', 'fine_amount': 'Phạt tiền từ 800.000 đồng đến 1.000.000 đồng', 'violation_type': 'trẻ_em', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Phạt tiền từ 800.000 đồng đến 1.000.000 đồng\nNội dung vi phạm: Chở trẻ em dưới 10 tuổi và chiều cao dưới 1,35 mét trên xe ô tô ngồi cùng hàng ghế với người lái xe'}
[2025-03-09 09:33:47,808] INFO [reasoning.auto_rag] Context length: 627 characters
[2025-03-09 09:33:47,812] INFO [reasoning.auto_rag] Input tokens: 458
[2025-03-09 09:33:50,733] INFO [httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-03-09 09:33:50,749] INFO [reasoning.auto_rag] Output tokens: 118
[2025-03-09 09:33:50,750] INFO [reasoning.auto_rag] Decision: Đã đủ thông tin
[2025-03-09 09:33:50,750] INFO [reasoning.auto_rag] Found sufficient information, returning final answer
[2025-03-09 09:33:50,751] INFO [utils] Function process_question completed in 3.94 seconds
[2025-03-09 09:33:50,752] INFO [__main__] Question processed in 3.94 seconds
[2025-03-09 09:33:50,753] INFO [__main__] Needs web search: False
[2025-03-09 09:33:50,762] INFO [__main__] Displaying results
[2025-03-09 09:33:50,763] INFO [__main__] Response generated using: OpenAI GPT-4o mini
[2025-03-09 09:33:50,781] INFO [__main__] Cleaning up components
[2025-03-09 09:33:50,784] INFO [retrieval.vector_store] Closing Weaviate client connection
[2025-03-09 09:33:50,790] INFO [retrieval.vector_store] Weaviate client connection closed
[2025-03-09 09:33:50,791] INFO [__main__] Displaying web search prompt
[2025-03-09 09:42:14,130] INFO [__main__] Starting application
[2025-03-09 09:42:14,134] INFO [__main__] Initializing configurations
[2025-03-09 09:42:14,134] INFO [__main__] Configurations initialized successfully
[2025-03-09 09:42:14,136] INFO [__main__] Selected LLM provider: openai
[2025-03-09 09:42:14,136] INFO [__main__] Initializing components with LLM provider: openai
[2025-03-09 09:42:14,136] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-09 09:42:14,136] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-09 09:42:14,137] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-09 09:42:14,927] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-09 09:42:15,208] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-09 09:42:15,212] INFO [retrieval.vector_store] Collection exists: True
[2025-03-09 09:42:15,212] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-09 09:42:15,213] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:42:15,215] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:42:20,661] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-09 09:42:20,962] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-09 09:42:21,102] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-09 09:42:21,103] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-09 09:42:23,357] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:42:23,357] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-09 09:42:23,357] INFO [reasoning.auto_rag] Setting up OpenAI LLM with model: gpt-4o-mini
[2025-03-09 09:42:23,575] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.OPENAI
[2025-03-09 09:42:23,575] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-09 09:42:23,575] INFO [__main__] Initializing web search integration
[2025-03-09 09:42:23,575] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-09 09:42:23,575] INFO [__main__] Components initialized successfully
[2025-03-09 09:43:03,326] INFO [__main__] Starting application
[2025-03-09 09:43:03,327] INFO [__main__] Selected LLM provider: vllm
[2025-03-09 09:43:03,327] INFO [__main__] Initializing components with LLM provider: vllm
[2025-03-09 09:43:03,328] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-09 09:43:03,328] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-09 09:43:03,328] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-09 09:43:03,904] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-09 09:43:04,160] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-09 09:43:04,165] INFO [retrieval.vector_store] Collection exists: True
[2025-03-09 09:43:04,165] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-09 09:43:04,166] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:43:04,169] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:43:09,607] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-09 09:43:10,219] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-09 09:43:10,223] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-09 09:43:10,224] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-09 09:43:12,259] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:43:12,259] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-09 09:43:12,259] INFO [reasoning.auto_rag] Setting up vLLM client with model: Qwen/Qwen2.5-14B-Instruct-AWQ
[2025-03-09 09:43:12,259] INFO [llm.vllm_client] Creating VLLMClient with config: {'api_url': 'http://192.168.100.125:8000', 'model_name': 'Qwen/Qwen2.5-14B-Instruct-AWQ', 'temperature': 0.2, 'max_tokens': 512, 'top_p': 0.95, 'timeout': 500, 'request_timeout': 500}
[2025-03-09 09:43:12,304] INFO [llm.vllm_client] Initialized vLLM client for model: Qwen/Qwen2.5-14B-Instruct-AWQ at http://192.168.100.125:8000
[2025-03-09 09:43:12,304] INFO [reasoning.auto_rag] Successfully initialized vLLM client with API URL: http://192.168.100.125:8000
[2025-03-09 09:43:12,304] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.VLLM
[2025-03-09 09:43:12,304] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-09 09:43:12,304] INFO [__main__] Initializing web search integration
[2025-03-09 09:43:12,304] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-09 09:43:12,304] INFO [__main__] Components initialized successfully
[2025-03-09 09:43:32,618] INFO [__main__] Starting application
[2025-03-09 09:43:32,624] INFO [__main__] Selected LLM provider: vllm
[2025-03-09 09:43:32,627] INFO [__main__] Initializing components with LLM provider: vllm
[2025-03-09 09:43:32,629] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-09 09:43:32,630] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-09 09:43:32,631] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-09 09:43:32,736] INFO [__main__] Starting application
[2025-03-09 09:43:32,738] INFO [__main__] Selected LLM provider: vllm
[2025-03-09 09:43:32,739] INFO [__main__] Initializing components with LLM provider: vllm
[2025-03-09 09:43:32,739] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-09 09:43:32,739] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-09 09:43:32,739] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-09 09:43:33,138] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-09 09:43:33,221] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-09 09:43:33,377] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-09 09:43:33,382] INFO [retrieval.vector_store] Collection exists: True
[2025-03-09 09:43:33,382] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-09 09:43:33,382] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:43:33,385] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:43:33,453] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-09 09:43:33,456] INFO [retrieval.vector_store] Collection exists: True
[2025-03-09 09:43:33,457] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-09 09:43:33,457] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:43:33,458] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:43:38,215] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-09 09:43:38,444] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-09 09:43:38,451] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-09 09:43:38,452] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-09 09:43:39,826] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-09 09:43:40,350] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-09 09:43:40,354] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-09 09:43:40,354] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-09 09:43:40,948] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:43:40,948] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-09 09:43:40,948] INFO [reasoning.auto_rag] Setting up vLLM client with model: Qwen/Qwen2.5-14B-Instruct-AWQ
[2025-03-09 09:43:40,948] INFO [llm.vllm_client] Creating VLLMClient with config: {'api_url': 'http://192.168.100.125:8000', 'model_name': 'Qwen/Qwen2.5-14B-Instruct-AWQ', 'temperature': 0.2, 'max_tokens': 512, 'top_p': 0.95, 'timeout': 500, 'request_timeout': 500}
[2025-03-09 09:43:40,987] INFO [llm.vllm_client] Initialized vLLM client for model: Qwen/Qwen2.5-14B-Instruct-AWQ at http://192.168.100.125:8000
[2025-03-09 09:43:40,987] INFO [reasoning.auto_rag] Successfully initialized vLLM client with API URL: http://192.168.100.125:8000
[2025-03-09 09:43:40,987] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.VLLM
[2025-03-09 09:43:40,988] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-09 09:43:40,988] INFO [__main__] Initializing web search integration
[2025-03-09 09:43:40,988] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-09 09:43:40,988] INFO [__main__] Components initialized successfully
[2025-03-09 09:43:43,176] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:43:43,176] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-09 09:43:43,176] INFO [reasoning.auto_rag] Setting up vLLM client with model: Qwen/Qwen2.5-14B-Instruct-AWQ
[2025-03-09 09:43:43,176] INFO [llm.vllm_client] Creating VLLMClient with config: {'api_url': 'http://192.168.100.125:8000', 'model_name': 'Qwen/Qwen2.5-14B-Instruct-AWQ', 'temperature': 0.2, 'max_tokens': 512, 'top_p': 0.95, 'timeout': 500, 'request_timeout': 500}
[2025-03-09 09:43:43,213] INFO [llm.vllm_client] Initialized vLLM client for model: Qwen/Qwen2.5-14B-Instruct-AWQ at http://192.168.100.125:8000
[2025-03-09 09:43:43,213] INFO [reasoning.auto_rag] Successfully initialized vLLM client with API URL: http://192.168.100.125:8000
[2025-03-09 09:43:43,213] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.VLLM
[2025-03-09 09:43:43,213] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-09 09:43:43,213] INFO [__main__] Initializing web search integration
[2025-03-09 09:43:43,213] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-09 09:43:43,213] INFO [__main__] Components initialized successfully
[2025-03-09 09:43:43,214] INFO [__main__] Processing new question: Bé An lái xe máy buông thả 2 tay, các hình phạt mà bé An phải đối mặt là gì 
[2025-03-09 09:43:43,215] INFO [__main__] Processing question: Bé An lái xe máy buông thả 2 tay, các hình phạt mà bé An phải đối mặt là gì 
[2025-03-09 09:43:43,215] INFO [reasoning.auto_rag] Question validated as traffic-related via keyword: phạt
[2025-03-09 09:43:43,215] INFO [reasoning.auto_rag] Iteration 1: Retrieving documents for query: Bé An lái xe máy buông thả 2 tay, các hình phạt mà bé An phải đối mặt là gì 
[2025-03-09 09:43:43,216] INFO [reasoning.auto_rag] Tokenized query: bé an lái xe_máy buông_thả 2 tay , các hình_phạt mà bé an phải đối_mặt là gì
[2025-03-09 09:43:43,216] INFO [reasoning.auto_rag] Using basic DocumentRetriever for retrieval
[2025-03-09 09:43:43,216] INFO [retrieval.retriever] Original query: 'Bé An lái xe máy buông thả 2 tay, các hình phạt mà bé An phải đối mặt là gì '
[2025-03-09 09:43:43,216] INFO [retrieval.retriever] Tokenized query: 'bé an lái xe_máy buông_thả 2 tay , các hình_phạt mà bé an phải đối_mặt là gì'
[2025-03-09 09:43:44,102] INFO [retrieval.retriever] Retrieved 3 documents for query
[2025-03-09 09:43:44,103] INFO [retrieval.retriever] Top result score: 0.8392754793167114
[2025-03-09 09:43:44,103] INFO [retrieval.retriever] Score range: 0.6738901138305664 to 0.8392754793167114
[2025-03-09 09:43:44,104] INFO [reasoning.auto_rag] DocumentRetriever returned 3 documents
[2025-03-09 09:43:44,104] INFO [reasoning.auto_rag] Retrieved document details:
[2025-03-09 09:43:44,105] INFO [reasoning.auto_rag] Doc 1 score: 0.8392754793167114
[2025-03-09 09:43:44,105] INFO [reasoning.auto_rag] Doc 1 metadata: {'category': 'mô tô, gắn máy', 'fine_amount': 'Tịch thu phương tiện', 'violation_type': 'lái_xe_nguy_hiểm', 'original_text': 'Loại phương tiện: mô tô, gắn máy\nMức phạt: Tịch thu phương tiện\nNội dung vi phạm: Buông cả hai tay khi đang điều khiển xe; dùng chân điều khiển xe; ngồi về một bên điều khiển xe'}
[2025-03-09 09:43:44,105] INFO [reasoning.auto_rag] Doc 2 score: 0.7205518484115601
[2025-03-09 09:43:44,105] INFO [reasoning.auto_rag] Doc 2 metadata: {'category': 'ô tô', 'fine_amount': 'Trừ 02 điểm giấy phép lái xe', 'violation_type': 'an_toàn', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Trừ 02 điểm giấy phép lái xe\nNội dung vi phạm: Dùng tay cầm và sử dụng điện thoại hoặc các thiết bị điện tử khác khi điều khiển phương tiện tham gia giao thông'}
[2025-03-09 09:43:44,106] INFO [reasoning.auto_rag] Doc 3 score: 0.6738901138305664
[2025-03-09 09:43:44,107] INFO [reasoning.auto_rag] Doc 3 metadata: {'category': 'mô tô, gắn máy', 'fine_amount': 'Phạt tiền từ 6.000.000 đồng đến 8.000.000 đồng', 'violation_type': 'lái_xe_nguy_hiểm', 'original_text': 'Loại phương tiện: mô tô, gắn máy\nMức phạt: Phạt tiền từ 6.000.000 đồng đến 8.000.000 đồng\nNội dung vi phạm: Buông cả hai tay khi đang điều khiển xe; dùng chân điều khiển xe; ngồi về một bên điều khiển xe'}
[2025-03-09 09:43:44,108] INFO [reasoning.auto_rag] Context length: 612 characters
[2025-03-09 09:43:44,115] INFO [reasoning.auto_rag] Input tokens: 671
[2025-03-09 09:43:49,716] INFO [httpx] HTTP Request: POST http://192.168.100.125:8000/v1/completions "HTTP/1.1 200 OK"
[2025-03-09 09:43:49,722] INFO [reasoning.auto_rag] Output tokens: 713
[2025-03-09 09:43:49,722] INFO [reasoning.auto_rag] Decision: Đã đủ thông tin
[2025-03-09 09:43:49,723] INFO [reasoning.auto_rag] Found sufficient information, returning final answer
[2025-03-09 09:43:49,724] INFO [utils] Function process_question completed in 6.51 seconds
[2025-03-09 09:43:49,726] INFO [__main__] Question processed in 6.51 seconds
[2025-03-09 09:43:49,728] INFO [__main__] Needs web search: False
[2025-03-09 09:43:49,728] INFO [__main__] Displaying results
[2025-03-09 09:43:49,731] INFO [__main__] Response generated using: Qwen2.5-14B (vLLM)
[2025-03-09 09:43:49,743] INFO [__main__] Cleaning up components
[2025-03-09 09:43:49,749] INFO [retrieval.vector_store] Closing Weaviate client connection
[2025-03-09 09:43:49,756] INFO [retrieval.vector_store] Weaviate client connection closed
[2025-03-09 09:44:47,602] INFO [__main__] Starting application
[2025-03-09 09:44:47,608] INFO [__main__] Selected LLM provider: vllm
[2025-03-09 09:44:47,610] INFO [__main__] Initializing components with LLM provider: vllm
[2025-03-09 09:44:47,611] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-09 09:44:47,611] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-09 09:44:47,612] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-09 09:44:47,765] INFO [__main__] Starting application
[2025-03-09 09:44:47,766] INFO [__main__] Selected LLM provider: vllm
[2025-03-09 09:44:47,766] INFO [__main__] Initializing components with LLM provider: vllm
[2025-03-09 09:44:47,766] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-09 09:44:47,767] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-09 09:44:47,767] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-09 09:44:48,322] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-09 09:44:48,325] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-09 09:44:48,562] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-09 09:44:48,569] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-09 09:44:48,572] INFO [retrieval.vector_store] Collection exists: True
[2025-03-09 09:44:48,572] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-09 09:44:48,575] INFO [retrieval.vector_store] Collection exists: True
[2025-03-09 09:44:48,575] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:44:48,576] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-09 09:44:48,582] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:44:48,589] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:44:48,590] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:44:53,544] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-09 09:44:53,979] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-09 09:44:53,980] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-09 09:44:53,980] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-09 09:44:55,396] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-09 09:44:56,001] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-09 09:44:56,008] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-09 09:44:56,008] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-09 09:44:57,345] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:44:57,345] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-09 09:44:57,345] INFO [reasoning.auto_rag] Setting up vLLM client with model: Qwen/Qwen2.5-14B-Instruct-AWQ
[2025-03-09 09:44:57,345] INFO [llm.vllm_client] Creating VLLMClient with config: {'api_url': 'http://192.168.100.125:8000', 'model_name': 'Qwen/Qwen2.5-14B-Instruct-AWQ', 'temperature': 0.2, 'max_tokens': 512, 'top_p': 0.95, 'timeout': 500, 'request_timeout': 500}
[2025-03-09 09:44:57,385] INFO [llm.vllm_client] Initialized vLLM client for model: Qwen/Qwen2.5-14B-Instruct-AWQ at http://192.168.100.125:8000
[2025-03-09 09:44:57,385] INFO [reasoning.auto_rag] Successfully initialized vLLM client with API URL: http://192.168.100.125:8000
[2025-03-09 09:44:57,386] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.VLLM
[2025-03-09 09:44:57,386] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-09 09:44:57,386] INFO [__main__] Initializing web search integration
[2025-03-09 09:44:57,386] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-09 09:44:57,386] INFO [__main__] Components initialized successfully
[2025-03-09 09:44:58,927] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:44:58,927] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-09 09:44:58,927] INFO [reasoning.auto_rag] Setting up vLLM client with model: Qwen/Qwen2.5-14B-Instruct-AWQ
[2025-03-09 09:44:58,927] INFO [llm.vllm_client] Creating VLLMClient with config: {'api_url': 'http://192.168.100.125:8000', 'model_name': 'Qwen/Qwen2.5-14B-Instruct-AWQ', 'temperature': 0.2, 'max_tokens': 512, 'top_p': 0.95, 'timeout': 500, 'request_timeout': 500}
[2025-03-09 09:44:58,967] INFO [llm.vllm_client] Initialized vLLM client for model: Qwen/Qwen2.5-14B-Instruct-AWQ at http://192.168.100.125:8000
[2025-03-09 09:44:58,967] INFO [reasoning.auto_rag] Successfully initialized vLLM client with API URL: http://192.168.100.125:8000
[2025-03-09 09:44:58,967] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.VLLM
[2025-03-09 09:44:58,967] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-09 09:44:58,967] INFO [__main__] Initializing web search integration
[2025-03-09 09:44:58,968] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-09 09:44:58,968] INFO [__main__] Components initialized successfully
[2025-03-09 09:44:58,968] INFO [__main__] Processing new question: Ông Bình lái xe ô tô không có giấy phép lái xe thì bị phạt như thế nào
[2025-03-09 09:44:58,969] INFO [__main__] Processing question: Ông Bình lái xe ô tô không có giấy phép lái xe thì bị phạt như thế nào
[2025-03-09 09:44:58,969] INFO [reasoning.auto_rag] Question validated as traffic-related via keyword: phạt
[2025-03-09 09:44:58,969] INFO [reasoning.auto_rag] Iteration 1: Retrieving documents for query: Ông Bình lái xe ô tô không có giấy phép lái xe thì bị phạt như thế nào
[2025-03-09 09:44:58,970] INFO [reasoning.auto_rag] Tokenized query: ông bình lái_xe ô_tô không có giấy_phép lái_xe thì bị phạt như thế_nào
[2025-03-09 09:44:58,970] INFO [reasoning.auto_rag] Using basic DocumentRetriever for retrieval
[2025-03-09 09:44:58,970] INFO [retrieval.retriever] Original query: 'Ông Bình lái xe ô tô không có giấy phép lái xe thì bị phạt như thế nào'
[2025-03-09 09:44:58,970] INFO [retrieval.retriever] Tokenized query: 'ông bình lái_xe ô_tô không có giấy_phép lái_xe thì bị phạt như thế_nào'
[2025-03-09 09:44:59,890] INFO [retrieval.retriever] Retrieved 5 documents for query
[2025-03-09 09:44:59,890] INFO [retrieval.retriever] Top result score: 0.9854327440261841
[2025-03-09 09:44:59,890] INFO [retrieval.retriever] Score range: 0.5615664124488831 to 0.9854327440261841
[2025-03-09 09:44:59,890] INFO [reasoning.auto_rag] DocumentRetriever returned 5 documents
[2025-03-09 09:44:59,890] INFO [reasoning.auto_rag] Retrieved document details:
[2025-03-09 09:44:59,891] INFO [reasoning.auto_rag] Doc 1 score: 0.9854327440261841
[2025-03-09 09:44:59,891] INFO [reasoning.auto_rag] Doc 1 metadata: {'category': 'ô tô', 'fine_amount': 'Phạt tiền từ 18.000.000 đồng đến 20.000.000 đồng - Điều kiện người lái xe', 'violation_type': 'giấy_tờ', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Phạt tiền từ 18.000.000 đồng đến 20.000.000 đồng - Điều kiện người lái xe\nNội dung vi phạm: Sử dụng giấy phép lái xe không do cơ quan có thẩm quyền cấp, giấy phép lái xe bị tẩy xóa, giấy phép lái xe không còn hiệu lực'}
[2025-03-09 09:44:59,891] INFO [reasoning.auto_rag] Doc 2 score: 0.9722656011581421
[2025-03-09 09:44:59,892] INFO [reasoning.auto_rag] Doc 2 metadata: {'category': 'ô tô', 'fine_amount': 'Phạt tiền từ 18.000.000 đồng đến 20.000.000 đồng - Điều kiện người lái xe', 'violation_type': 'giấy_tờ', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Phạt tiền từ 18.000.000 đồng đến 20.000.000 đồng - Điều kiện người lái xe\nNội dung vi phạm: Không có giấy phép lái xe hoặc sử dụng giấy phép lái xe đã bị trừ hết điểm'}
[2025-03-09 09:44:59,892] INFO [reasoning.auto_rag] Doc 3 score: 0.6597521901130676
[2025-03-09 09:44:59,892] INFO [reasoning.auto_rag] Doc 3 metadata: {'category': 'ô tô', 'fine_amount': 'Phạt tiền từ 8.000.000 đồng đến 10.000.000 đồng - Điều kiện người lái xe', 'violation_type': 'giấy_tờ', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Phạt tiền từ 8.000.000 đồng đến 10.000.000 đồng - Điều kiện người lái xe\nNội dung vi phạm: Sử dụng giấy phép lái xe không hợp lệ (giấy phép lái xe có số phôi ghi ở mặt sau không trùng với số phôi được cấp mới nhất trong hệ thống)'}
[2025-03-09 09:44:59,892] INFO [reasoning.auto_rag] Context length: 1166 characters
[2025-03-09 09:44:59,894] INFO [reasoning.auto_rag] Input tokens: 955
[2025-03-09 09:45:05,627] INFO [httpx] HTTP Request: POST http://192.168.100.125:8000/v1/completions "HTTP/1.1 200 OK"
[2025-03-09 09:45:05,632] INFO [reasoning.auto_rag] Output tokens: 728
[2025-03-09 09:45:05,632] INFO [reasoning.auto_rag] Decision: Đã đủ thông tin
[2025-03-09 09:45:05,633] INFO [reasoning.auto_rag] Found sufficient information, returning final answer
[2025-03-09 09:45:05,634] INFO [utils] Function process_question completed in 6.66 seconds
[2025-03-09 09:45:05,635] INFO [__main__] Question processed in 6.67 seconds
[2025-03-09 09:45:05,638] INFO [__main__] Needs web search: False
[2025-03-09 09:45:05,638] INFO [__main__] Displaying results
[2025-03-09 09:45:05,640] INFO [__main__] Response generated using: Qwen2.5-14B (vLLM)
[2025-03-09 09:45:05,660] INFO [__main__] Cleaning up components
[2025-03-09 09:45:05,664] INFO [retrieval.vector_store] Closing Weaviate client connection
[2025-03-09 09:45:05,674] INFO [retrieval.vector_store] Weaviate client connection closed
[2025-03-09 09:47:46,872] INFO [__main__] Starting application
[2025-03-09 09:47:46,876] INFO [__main__] Selected LLM provider: vllm
[2025-03-09 09:47:46,881] INFO [__main__] Initializing components with LLM provider: vllm
[2025-03-09 09:47:46,883] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-09 09:47:46,883] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-09 09:47:46,884] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-09 09:47:47,010] INFO [__main__] Starting application
[2025-03-09 09:47:47,011] INFO [__main__] Selected LLM provider: vllm
[2025-03-09 09:47:47,012] INFO [__main__] Initializing components with LLM provider: vllm
[2025-03-09 09:47:47,012] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-09 09:47:47,012] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-09 09:47:47,012] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-09 09:47:47,680] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-09 09:47:47,701] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-09 09:47:47,935] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-09 09:47:47,937] INFO [retrieval.vector_store] Collection exists: True
[2025-03-09 09:47:47,937] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-09 09:47:47,937] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:47:47,938] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:47:47,952] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-09 09:47:47,957] INFO [retrieval.vector_store] Collection exists: True
[2025-03-09 09:47:47,957] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-09 09:47:47,958] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:47:47,961] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:47:53,072] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-09 09:47:53,568] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-09 09:47:53,573] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-09 09:47:53,573] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-09 09:47:53,810] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-09 09:47:54,319] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-09 09:47:54,324] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-09 09:47:54,325] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-09 09:47:55,733] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:47:55,734] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-09 09:47:55,734] INFO [reasoning.auto_rag] Setting up vLLM client with model: Qwen/Qwen2.5-14B-Instruct-AWQ
[2025-03-09 09:47:55,734] INFO [llm.vllm_client] Creating VLLMClient with config: {'api_url': 'http://192.168.100.125:8000', 'model_name': 'Qwen/Qwen2.5-14B-Instruct-AWQ', 'temperature': 0.2, 'max_tokens': 512, 'top_p': 0.95, 'timeout': 500, 'request_timeout': 500}
[2025-03-09 09:47:55,795] INFO [llm.vllm_client] Initialized vLLM client for model: Qwen/Qwen2.5-14B-Instruct-AWQ at http://192.168.100.125:8000
[2025-03-09 09:47:55,796] INFO [reasoning.auto_rag] Successfully initialized vLLM client with API URL: http://192.168.100.125:8000
[2025-03-09 09:47:55,796] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.VLLM
[2025-03-09 09:47:55,796] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-09 09:47:55,796] INFO [__main__] Initializing web search integration
[2025-03-09 09:47:55,796] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-09 09:47:55,796] INFO [__main__] Components initialized successfully
[2025-03-09 09:47:56,833] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:47:56,833] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-09 09:47:56,833] INFO [reasoning.auto_rag] Setting up vLLM client with model: Qwen/Qwen2.5-14B-Instruct-AWQ
[2025-03-09 09:47:56,833] INFO [llm.vllm_client] Creating VLLMClient with config: {'api_url': 'http://192.168.100.125:8000', 'model_name': 'Qwen/Qwen2.5-14B-Instruct-AWQ', 'temperature': 0.2, 'max_tokens': 512, 'top_p': 0.95, 'timeout': 500, 'request_timeout': 500}
[2025-03-09 09:47:57,055] INFO [llm.vllm_client] Initialized vLLM client for model: Qwen/Qwen2.5-14B-Instruct-AWQ at http://192.168.100.125:8000
[2025-03-09 09:47:57,055] INFO [reasoning.auto_rag] Successfully initialized vLLM client with API URL: http://192.168.100.125:8000
[2025-03-09 09:47:57,056] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.VLLM
[2025-03-09 09:47:57,056] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-09 09:47:57,056] INFO [__main__] Initializing web search integration
[2025-03-09 09:47:57,057] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-09 09:47:57,057] INFO [__main__] Components initialized successfully
[2025-03-09 09:47:57,058] INFO [__main__] Processing new question: Vào 1 ngày đẹp trời chủ nhất, bạn Đạt đi uống 1 thùng bia và lái xe gắn máy SH 350i của Ý không có giấy phép thì bị phạt như thế nào
[2025-03-09 09:47:57,068] INFO [__main__] Processing question: Vào 1 ngày đẹp trời chủ nhất, bạn Đạt đi uống 1 thùng bia và lái xe gắn máy SH 350i của Ý không có giấy phép thì bị phạt như thế nào
[2025-03-09 09:47:57,068] INFO [reasoning.auto_rag] Question validated as traffic-related via keyword: phạt
[2025-03-09 09:47:57,068] INFO [reasoning.auto_rag] Iteration 1: Retrieving documents for query: Vào 1 ngày đẹp trời chủ nhất, bạn Đạt đi uống 1 thùng bia và lái xe gắn máy SH 350i của Ý không có giấy phép thì bị phạt như thế nào
[2025-03-09 09:47:57,069] INFO [reasoning.auto_rag] Tokenized query: vào 1 ngày đẹp trời chủ nhất , bạn đạt đi uống 1 thùng bia và lái xe gắn_máy sh 350i của ý không có giấy_phép thì bị phạt như thế_nào
[2025-03-09 09:47:57,069] INFO [reasoning.auto_rag] Using basic DocumentRetriever for retrieval
[2025-03-09 09:47:57,071] INFO [retrieval.retriever] Original query: 'Vào 1 ngày đẹp trời chủ nhất, bạn Đạt đi uống 1 thùng bia và lái xe gắn máy SH 350i của Ý không có giấy phép thì bị phạt như thế nào'
[2025-03-09 09:47:57,072] INFO [retrieval.retriever] Tokenized query: 'vào 1 ngày đẹp trời chủ nhất , bạn đạt đi uống 1 thùng bia và lái xe gắn_máy sh 350i của ý không có giấy_phép thì bị phạt như thế_nào'
[2025-03-09 09:47:57,965] INFO [retrieval.retriever] Retrieved 3 documents for query
[2025-03-09 09:47:57,965] INFO [retrieval.retriever] Top result score: 0.5
[2025-03-09 09:47:57,966] INFO [retrieval.retriever] Score range: 0.4703015089035034 to 0.5
[2025-03-09 09:47:57,966] INFO [reasoning.auto_rag] DocumentRetriever returned 3 documents
[2025-03-09 09:47:57,967] INFO [reasoning.auto_rag] Retrieved document details:
[2025-03-09 09:47:57,967] INFO [reasoning.auto_rag] Doc 1 score: 0.5
[2025-03-09 09:47:57,968] INFO [reasoning.auto_rag] Doc 1 metadata: {'category': 'mô tô, gắn máy', 'fine_amount': 'Trừ điểm giấy phép lái xe 02 điểm', 'violation_type': 'đèn_tín_hiệu', 'original_text': 'Loại phương tiện: mô tô, gắn máy\nMức phạt: Trừ điểm giấy phép lái xe 02 điểm\nNội dung vi phạm: Đi vào khu vực cấm, đường có biển báo hiệu có nội dung cấm đi vào đối với loại phương tiện đang điều khiển'}
[2025-03-09 09:47:57,968] INFO [reasoning.auto_rag] Doc 2 score: 0.5
[2025-03-09 09:47:57,969] INFO [reasoning.auto_rag] Doc 2 metadata: {'category': 'ô tô', 'fine_amount': 'Tước quyền sử dụng giấy phép lái xe từ 22 tháng đến 24 tháng', 'violation_type': 'nồng_độ_cồn', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Tước quyền sử dụng giấy phép lái xe từ 22 tháng đến 24 tháng\nNội dung vi phạm: Không chấp hành yêu cầu kiểm tra về chất ma túy hoặc chất kích thích khác mà pháp luật cấm sử dụng'}
[2025-03-09 09:47:57,969] INFO [reasoning.auto_rag] Doc 3 score: 0.4703015089035034
[2025-03-09 09:47:57,969] INFO [reasoning.auto_rag] Doc 3 metadata: {'category': 'ô tô', 'fine_amount': 'Tước quyền sử dụng giấy phép lái xe từ 22 tháng đến 24 tháng', 'violation_type': 'nồng_độ_cồn', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Tước quyền sử dụng giấy phép lái xe từ 22 tháng đến 24 tháng\nNội dung vi phạm: Điều khiển xe trên đường mà trong máu hoặc hơi thở có nồng độ cồn vượt quá 80 miligam/100 mililít máu hoặc vượt quá 0,4 miligam/1 lít khí thở'}
[2025-03-09 09:47:57,969] INFO [reasoning.auto_rag] Context length: 704 characters
[2025-03-09 09:47:57,971] INFO [reasoning.auto_rag] Input tokens: 766
[2025-03-09 09:48:03,601] INFO [httpx] HTTP Request: POST http://192.168.100.125:8000/v1/completions "HTTP/1.1 200 OK"
[2025-03-09 09:48:03,606] INFO [reasoning.auto_rag] Output tokens: 817
[2025-03-09 09:48:03,606] INFO [reasoning.auto_rag] Decision: Cần thêm thông tin
[2025-03-09 09:48:03,606] INFO [reasoning.auto_rag] Need more information, next query: Tìm hiểu về mức phạt khi lái xe sau khi uống bia và không có giấy phép lái xe
[2025-03-09 09:48:03,607] INFO [reasoning.auto_rag] Iteration 2: Retrieving documents for query: Tìm hiểu về mức phạt khi lái xe sau khi uống bia và không có giấy phép lái xe
[2025-03-09 09:48:03,609] INFO [reasoning.auto_rag] Tokenized query: tìm_hiểu về mức phạt khi lái_xe sau khi uống bia và không có giấy_phép lái_xe
[2025-03-09 09:48:03,609] INFO [reasoning.auto_rag] Using basic DocumentRetriever for retrieval
[2025-03-09 09:48:03,610] INFO [retrieval.retriever] Original query: 'Tìm hiểu về mức phạt khi lái xe sau khi uống bia và không có giấy phép lái xe'
[2025-03-09 09:48:03,610] INFO [retrieval.retriever] Tokenized query: 'tìm_hiểu về mức phạt khi lái_xe sau khi uống bia và không có giấy_phép lái_xe'
[2025-03-09 09:48:04,202] INFO [retrieval.retriever] Retrieved 5 documents for query
[2025-03-09 09:48:04,203] INFO [retrieval.retriever] Top result score: 0.610517144203186
[2025-03-09 09:48:04,203] INFO [retrieval.retriever] Score range: 0.5620479583740234 to 0.610517144203186
[2025-03-09 09:48:04,203] INFO [reasoning.auto_rag] DocumentRetriever returned 5 documents
[2025-03-09 09:48:04,203] INFO [reasoning.auto_rag] Retrieved document details:
[2025-03-09 09:48:04,203] INFO [reasoning.auto_rag] Doc 1 score: 0.610517144203186
[2025-03-09 09:48:04,204] INFO [reasoning.auto_rag] Doc 1 metadata: {'category': 'ô tô', 'fine_amount': 'Tước quyền sử dụng giấy phép lái xe từ 22 tháng đến 24 tháng', 'violation_type': 'nồng_độ_cồn', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Tước quyền sử dụng giấy phép lái xe từ 22 tháng đến 24 tháng\nNội dung vi phạm: Không chấp hành yêu cầu kiểm tra về nồng độ cồn'}
[2025-03-09 09:48:04,204] INFO [reasoning.auto_rag] Doc 2 score: 0.6090145111083984
[2025-03-09 09:48:04,205] INFO [reasoning.auto_rag] Doc 2 metadata: {'category': 'ô tô', 'fine_amount': 'Phạt tiền từ 8.000.000 đồng đến 10.000.000 đồng - Điều kiện người lái xe', 'violation_type': 'giấy_tờ', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Phạt tiền từ 8.000.000 đồng đến 10.000.000 đồng - Điều kiện người lái xe\nNội dung vi phạm: Sử dụng giấy phép lái xe không hợp lệ (giấy phép lái xe có số phôi ghi ở mặt sau không trùng với số phôi được cấp mới nhất trong hệ thống)'}
[2025-03-09 09:48:04,205] INFO [reasoning.auto_rag] Doc 3 score: 0.6042910218238831
[2025-03-09 09:48:04,205] INFO [reasoning.auto_rag] Doc 3 metadata: {'category': 'ô tô', 'fine_amount': 'Phạt tiền từ 18.000.000 đồng đến 20.000.000 đồng - Điều kiện người lái xe', 'violation_type': 'giấy_tờ', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Phạt tiền từ 18.000.000 đồng đến 20.000.000 đồng - Điều kiện người lái xe\nNội dung vi phạm: Sử dụng giấy phép lái xe không do cơ quan có thẩm quyền cấp, giấy phép lái xe bị tẩy xóa, giấy phép lái xe không còn hiệu lực'}
[2025-03-09 09:48:04,206] INFO [reasoning.auto_rag] Context length: 1873 characters
[2025-03-09 09:48:04,207] INFO [reasoning.auto_rag] Input tokens: 1346
[2025-03-09 09:48:09,705] INFO [httpx] HTTP Request: POST http://192.168.100.125:8000/v1/completions "HTTP/1.1 200 OK"
[2025-03-09 09:48:09,708] INFO [reasoning.auto_rag] Output tokens: 849
[2025-03-09 09:48:09,708] INFO [reasoning.auto_rag] Decision: Cần thêm thông tin
[2025-03-09 09:48:09,708] INFO [reasoning.auto_rag] Need more information, next query: Tìm mức phạt cho việc lái xe gắn máy sau khi uống rượu hoặc bia và việc lái xe mà không có giấy phép lái xe.
[2025-03-09 09:48:09,708] WARNING [reasoning.auto_rag] Exiting loop without sufficient information
[2025-03-09 09:48:09,709] INFO [utils] Function process_question completed in 12.64 seconds
[2025-03-09 09:48:09,709] INFO [__main__] Question processed in 12.65 seconds
[2025-03-09 09:48:09,710] INFO [__main__] Needs web search: True
[2025-03-09 09:48:09,710] INFO [__main__] Web search prompt triggered
[2025-03-09 09:48:09,711] INFO [__main__] Displaying results
[2025-03-09 09:48:09,712] INFO [__main__] Response generated using: Qwen2.5-14B (vLLM)
[2025-03-09 09:48:09,721] INFO [__main__] Cleaning up components
[2025-03-09 09:48:09,722] INFO [retrieval.vector_store] Closing Weaviate client connection
[2025-03-09 09:48:09,734] INFO [retrieval.vector_store] Weaviate client connection closed
[2025-03-09 09:48:09,735] INFO [__main__] Displaying web search prompt
[2025-03-09 09:48:43,838] INFO [__main__] Starting application
[2025-03-09 09:48:43,840] INFO [__main__] Selected LLM provider: openai
[2025-03-09 09:48:43,841] INFO [__main__] Initializing components with LLM provider: openai
[2025-03-09 09:48:43,841] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-09 09:48:43,842] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-09 09:48:43,843] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-09 09:48:44,241] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-09 09:48:44,481] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-09 09:48:44,496] INFO [retrieval.vector_store] Collection exists: True
[2025-03-09 09:48:44,496] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-09 09:48:44,497] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:48:44,499] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:48:49,380] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-09 09:48:49,604] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-09 09:48:49,612] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-09 09:48:49,612] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-09 09:48:51,704] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:48:51,704] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-09 09:48:51,704] INFO [reasoning.auto_rag] Setting up OpenAI LLM with model: gpt-4o-mini
[2025-03-09 09:48:51,705] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.OPENAI
[2025-03-09 09:48:51,705] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-09 09:48:51,705] INFO [__main__] Initializing web search integration
[2025-03-09 09:48:51,705] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-09 09:48:51,705] INFO [__main__] Components initialized successfully
[2025-03-09 09:48:51,706] INFO [__main__] Displaying web search prompt
[2025-03-09 09:48:53,624] INFO [__main__] Starting application
[2025-03-09 09:48:53,629] INFO [__main__] Selected LLM provider: openai
[2025-03-09 09:48:53,630] INFO [__main__] Initializing components with LLM provider: openai
[2025-03-09 09:48:53,632] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-09 09:48:53,633] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-09 09:48:53,634] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-09 09:48:54,190] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-09 09:48:54,456] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-09 09:48:54,459] INFO [retrieval.vector_store] Collection exists: True
[2025-03-09 09:48:54,459] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-09 09:48:54,459] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:48:54,461] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:48:59,312] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-09 09:48:59,606] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-09 09:48:59,610] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-09 09:48:59,610] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-09 09:49:01,579] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:49:01,579] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-09 09:49:01,579] INFO [reasoning.auto_rag] Setting up OpenAI LLM with model: gpt-4o-mini
[2025-03-09 09:49:01,579] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.OPENAI
[2025-03-09 09:49:01,579] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-09 09:49:01,579] INFO [__main__] Initializing web search integration
[2025-03-09 09:49:01,580] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-09 09:49:01,580] INFO [__main__] Components initialized successfully
[2025-03-09 09:49:01,580] INFO [__main__] Processing new question: Vào 1 ngày đẹp trời chủ nhất, bạn Đạt đi uống 1 thùng bia và lái xe gắn máy SH 350i của Ý không có giấy phép thì bị phạt như thế nào
[2025-03-09 09:49:01,581] INFO [__main__] Processing question: Vào 1 ngày đẹp trời chủ nhất, bạn Đạt đi uống 1 thùng bia và lái xe gắn máy SH 350i của Ý không có giấy phép thì bị phạt như thế nào
[2025-03-09 09:49:01,581] INFO [reasoning.auto_rag] Question validated as traffic-related via keyword: phạt
[2025-03-09 09:49:01,581] INFO [reasoning.auto_rag] Iteration 1: Retrieving documents for query: Vào 1 ngày đẹp trời chủ nhất, bạn Đạt đi uống 1 thùng bia và lái xe gắn máy SH 350i của Ý không có giấy phép thì bị phạt như thế nào
[2025-03-09 09:49:01,582] INFO [reasoning.auto_rag] Tokenized query: vào 1 ngày đẹp trời chủ nhất , bạn đạt đi uống 1 thùng bia và lái xe gắn_máy sh 350i của ý không có giấy_phép thì bị phạt như thế_nào
[2025-03-09 09:49:01,582] INFO [reasoning.auto_rag] Using basic DocumentRetriever for retrieval
[2025-03-09 09:49:01,582] INFO [retrieval.retriever] Original query: 'Vào 1 ngày đẹp trời chủ nhất, bạn Đạt đi uống 1 thùng bia và lái xe gắn máy SH 350i của Ý không có giấy phép thì bị phạt như thế nào'
[2025-03-09 09:49:01,582] INFO [retrieval.retriever] Tokenized query: 'vào 1 ngày đẹp trời chủ nhất , bạn đạt đi uống 1 thùng bia và lái xe gắn_máy sh 350i của ý không có giấy_phép thì bị phạt như thế_nào'
[2025-03-09 09:49:02,460] INFO [retrieval.retriever] Retrieved 3 documents for query
[2025-03-09 09:49:02,460] INFO [retrieval.retriever] Top result score: 0.5
[2025-03-09 09:49:02,461] INFO [retrieval.retriever] Score range: 0.4703015089035034 to 0.5
[2025-03-09 09:49:02,461] INFO [reasoning.auto_rag] DocumentRetriever returned 3 documents
[2025-03-09 09:49:02,461] INFO [reasoning.auto_rag] Retrieved document details:
[2025-03-09 09:49:02,461] INFO [reasoning.auto_rag] Doc 1 score: 0.5
[2025-03-09 09:49:02,461] INFO [reasoning.auto_rag] Doc 1 metadata: {'category': 'mô tô, gắn máy', 'fine_amount': 'Trừ điểm giấy phép lái xe 02 điểm', 'violation_type': 'đèn_tín_hiệu', 'original_text': 'Loại phương tiện: mô tô, gắn máy\nMức phạt: Trừ điểm giấy phép lái xe 02 điểm\nNội dung vi phạm: Đi vào khu vực cấm, đường có biển báo hiệu có nội dung cấm đi vào đối với loại phương tiện đang điều khiển'}
[2025-03-09 09:49:02,461] INFO [reasoning.auto_rag] Doc 2 score: 0.5
[2025-03-09 09:49:02,461] INFO [reasoning.auto_rag] Doc 2 metadata: {'category': 'ô tô', 'fine_amount': 'Tước quyền sử dụng giấy phép lái xe từ 22 tháng đến 24 tháng', 'violation_type': 'nồng_độ_cồn', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Tước quyền sử dụng giấy phép lái xe từ 22 tháng đến 24 tháng\nNội dung vi phạm: Không chấp hành yêu cầu kiểm tra về chất ma túy hoặc chất kích thích khác mà pháp luật cấm sử dụng'}
[2025-03-09 09:49:02,462] INFO [reasoning.auto_rag] Doc 3 score: 0.4703015089035034
[2025-03-09 09:49:02,462] INFO [reasoning.auto_rag] Doc 3 metadata: {'category': 'ô tô', 'fine_amount': 'Tước quyền sử dụng giấy phép lái xe từ 22 tháng đến 24 tháng', 'violation_type': 'nồng_độ_cồn', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Tước quyền sử dụng giấy phép lái xe từ 22 tháng đến 24 tháng\nNội dung vi phạm: Điều khiển xe trên đường mà trong máu hoặc hơi thở có nồng độ cồn vượt quá 80 miligam/100 mililít máu hoặc vượt quá 0,4 miligam/1 lít khí thở'}
[2025-03-09 09:49:02,463] INFO [reasoning.auto_rag] Context length: 704 characters
[2025-03-09 09:49:02,465] INFO [reasoning.auto_rag] Input tokens: 508
[2025-03-09 09:49:06,173] INFO [httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-03-09 09:49:06,185] INFO [reasoning.auto_rag] Output tokens: 223
[2025-03-09 09:49:06,185] INFO [reasoning.auto_rag] Decision: Cần thêm thông tin.
[2025-03-09 09:49:06,185] INFO [reasoning.auto_rag] Need more information, next query: Cần tìm thông tin về mức phạt cho việc lái xe gắn máy không có giấy phép và mức phạt khi lái xe gắn máy sau khi uống rượu bia.
[2025-03-09 09:49:06,185] INFO [reasoning.auto_rag] Iteration 2: Retrieving documents for query: Cần tìm thông tin về mức phạt cho việc lái xe gắn máy không có giấy phép và mức phạt khi lái xe gắn máy sau khi uống rượu bia.
[2025-03-09 09:49:06,185] INFO [reasoning.auto_rag] Tokenized query: cần tìm thông_tin về mức phạt cho việc lái xe gắn_máy không có giấy_phép và mức phạt khi lái xe gắn_máy sau khi uống rượu_bia .
[2025-03-09 09:49:06,185] INFO [reasoning.auto_rag] Using basic DocumentRetriever for retrieval
[2025-03-09 09:49:06,186] INFO [retrieval.retriever] Original query: 'Cần tìm thông tin về mức phạt cho việc lái xe gắn máy không có giấy phép và mức phạt khi lái xe gắn máy sau khi uống rượu bia.'
[2025-03-09 09:49:06,186] INFO [retrieval.retriever] Tokenized query: 'cần tìm thông_tin về mức phạt cho việc lái xe gắn_máy không có giấy_phép và mức phạt khi lái xe gắn_máy sau khi uống rượu_bia .'
[2025-03-09 09:49:06,737] INFO [retrieval.retriever] Retrieved 3 documents for query
[2025-03-09 09:49:06,737] INFO [retrieval.retriever] Top result score: 0.5067266821861267
[2025-03-09 09:49:06,738] INFO [retrieval.retriever] Score range: 0.5 to 0.5067266821861267
[2025-03-09 09:49:06,738] INFO [reasoning.auto_rag] DocumentRetriever returned 3 documents
[2025-03-09 09:49:06,738] INFO [reasoning.auto_rag] Retrieved document details:
[2025-03-09 09:49:06,738] INFO [reasoning.auto_rag] Doc 1 score: 0.5067266821861267
[2025-03-09 09:49:06,739] INFO [reasoning.auto_rag] Doc 1 metadata: {'category': 'mô tô, gắn máy', 'fine_amount': 'Tước quyền sử dụng giấy phép lái xe từ 22 tháng đến 24 tháng', 'violation_type': 'nồng_độ_cồn', 'original_text': 'Loại phương tiện: mô tô, gắn máy\nMức phạt: Tước quyền sử dụng giấy phép lái xe từ 22 tháng đến 24 tháng\nNội dung vi phạm: Không chấp hành yêu cầu kiểm tra về chất ma túy hoặc chất kích thích khác mà pháp luật cấm sử dụng'}
[2025-03-09 09:49:06,739] INFO [reasoning.auto_rag] Doc 2 score: 0.5
[2025-03-09 09:49:06,739] INFO [reasoning.auto_rag] Doc 2 metadata: {'category': 'mô tô, gắn máy', 'fine_amount': 'Phạt tiền từ 6.000.000 đồng đến 8.000.000 đồng', 'violation_type': 'lái_xe_nguy_hiểm', 'original_text': 'Loại phương tiện: mô tô, gắn máy\nMức phạt: Phạt tiền từ 6.000.000 đồng đến 8.000.000 đồng\nNội dung vi phạm:  Buông cả hai tay khi đang điều khiển xe; dùng chân điều khiển xe; ngồi về một bên điều khiển xe; nằm trên yên xe điều khiển xe; thay người điều khiển khi xe đang chạy; quay người về phía sau để điều khiển xe hoặc bịt mắt điều khiển xe'}
[2025-03-09 09:49:06,739] INFO [reasoning.auto_rag] Doc 3 score: 0.5
[2025-03-09 09:49:06,739] INFO [reasoning.auto_rag] Doc 3 metadata: {'category': 'ô tô', 'fine_amount': 'Tước quyền sử dụng giấy phép lái xe từ 22 tháng đến 24 tháng', 'violation_type': 'nồng_độ_cồn', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Tước quyền sử dụng giấy phép lái xe từ 22 tháng đến 24 tháng\nNội dung vi phạm: Không chấp hành yêu cầu kiểm tra về chất ma túy hoặc chất kích thích khác mà pháp luật cấm sử dụng'}
[2025-03-09 09:49:06,739] INFO [reasoning.auto_rag] Context length: 1519 characters
[2025-03-09 09:49:06,741] INFO [reasoning.auto_rag] Input tokens: 764
[2025-03-09 09:49:11,217] INFO [httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-03-09 09:49:11,224] INFO [reasoning.auto_rag] Output tokens: 257
[2025-03-09 09:49:11,225] INFO [reasoning.auto_rag] Decision: Cần thêm thông tin
[2025-03-09 09:49:11,225] INFO [reasoning.auto_rag] Need more information, next query: Cần tìm thông tin về mức phạt cho việc điều khiển xe gắn máy không có giấy phép lái xe và mức phạt cho việc lái xe sau khi uống bia.
[2025-03-09 09:49:11,225] WARNING [reasoning.auto_rag] Exiting loop without sufficient information
[2025-03-09 09:49:11,226] INFO [utils] Function process_question completed in 9.64 seconds
[2025-03-09 09:49:11,227] INFO [__main__] Question processed in 9.65 seconds
[2025-03-09 09:49:11,229] INFO [__main__] Needs web search: True
[2025-03-09 09:49:11,231] INFO [__main__] Web search prompt triggered
[2025-03-09 09:49:11,232] INFO [__main__] Displaying results
[2025-03-09 09:49:11,234] INFO [__main__] Response generated using: OpenAI GPT-4o mini
[2025-03-09 09:49:11,241] INFO [__main__] Cleaning up components
[2025-03-09 09:49:11,242] INFO [retrieval.vector_store] Closing Weaviate client connection
[2025-03-09 09:49:11,250] INFO [retrieval.vector_store] Weaviate client connection closed
[2025-03-09 09:49:11,250] INFO [__main__] Displaying web search prompt
[2025-03-09 09:52:55,249] INFO [__main__] Starting application
[2025-03-09 09:52:55,255] INFO [__main__] Selected LLM provider: openai
[2025-03-09 09:52:55,256] INFO [__main__] Initializing components with LLM provider: openai
[2025-03-09 09:52:55,259] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-09 09:52:55,260] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-09 09:52:55,261] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-09 09:52:56,022] INFO [__main__] Starting application
[2025-03-09 09:52:56,027] INFO [__main__] Selected LLM provider: vllm
[2025-03-09 09:52:56,027] INFO [__main__] Initializing components with LLM provider: vllm
[2025-03-09 09:52:56,028] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-09 09:52:56,030] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-09 09:52:56,032] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-09 09:52:56,109] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-09 09:52:56,342] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-09 09:52:56,346] INFO [retrieval.vector_store] Collection exists: True
[2025-03-09 09:52:56,346] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-09 09:52:56,347] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:52:56,349] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:52:56,595] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-09 09:52:56,831] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-09 09:52:56,836] INFO [retrieval.vector_store] Collection exists: True
[2025-03-09 09:52:56,836] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-09 09:52:56,837] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:52:56,840] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:53:00,325] INFO [__main__] Starting application
[2025-03-09 09:53:00,326] INFO [__main__] Selected LLM provider: openai
[2025-03-09 09:53:00,326] INFO [__main__] Initializing components with LLM provider: openai
[2025-03-09 09:53:00,327] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-09 09:53:00,327] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-09 09:53:00,327] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-09 09:53:01,503] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-09 09:53:01,527] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-09 09:53:01,795] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-09 09:53:01,797] INFO [retrieval.vector_store] Collection exists: True
[2025-03-09 09:53:01,797] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-09 09:53:01,798] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:53:01,800] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:53:01,847] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-09 09:53:01,997] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-09 09:53:02,003] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-09 09:53:02,003] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-09 09:53:02,126] INFO [__main__] Starting application
[2025-03-09 09:53:02,130] INFO [__main__] Selected LLM provider: vllm
[2025-03-09 09:53:02,130] INFO [__main__] Initializing components with LLM provider: vllm
[2025-03-09 09:53:02,131] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-09 09:53:02,131] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-09 09:53:02,131] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-09 09:53:02,213] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-09 09:53:02,214] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-09 09:53:02,215] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-09 09:53:02,736] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-09 09:53:02,976] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-09 09:53:02,983] INFO [retrieval.vector_store] Collection exists: True
[2025-03-09 09:53:02,983] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-09 09:53:02,983] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:53:02,985] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:53:04,298] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:53:04,298] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-09 09:53:04,298] INFO [reasoning.auto_rag] Setting up OpenAI LLM with model: gpt-4o-mini
[2025-03-09 09:53:04,298] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.OPENAI
[2025-03-09 09:53:04,298] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-09 09:53:04,298] INFO [__main__] Initializing web search integration
[2025-03-09 09:53:04,298] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-09 09:53:04,298] INFO [__main__] Components initialized successfully
[2025-03-09 09:53:06,823] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:53:06,824] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-09 09:53:06,824] INFO [reasoning.auto_rag] Setting up vLLM client with model: Qwen/Qwen2.5-14B-Instruct-AWQ
[2025-03-09 09:53:06,824] INFO [llm.vllm_client] Creating VLLMClient with config: {'api_url': 'http://192.168.100.125:8000', 'model_name': 'Qwen/Qwen2.5-14B-Instruct-AWQ', 'temperature': 0.2, 'max_tokens': 512, 'top_p': 0.95, 'timeout': 500, 'request_timeout': 500}
[2025-03-09 09:53:07,147] INFO [llm.vllm_client] Initialized vLLM client for model: Qwen/Qwen2.5-14B-Instruct-AWQ at http://192.168.100.125:8000
[2025-03-09 09:53:07,148] INFO [reasoning.auto_rag] Successfully initialized vLLM client with API URL: http://192.168.100.125:8000
[2025-03-09 09:53:07,148] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.VLLM
[2025-03-09 09:53:07,148] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-09 09:53:07,148] INFO [__main__] Initializing web search integration
[2025-03-09 09:53:07,148] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-09 09:53:07,148] INFO [__main__] Components initialized successfully
[2025-03-09 09:53:07,936] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-09 09:53:08,349] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-09 09:53:08,410] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-09 09:53:08,410] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-09 09:53:10,202] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-09 09:53:10,919] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-09 09:53:10,922] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-09 09:53:10,922] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-09 09:53:10,922] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:53:10,923] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-09 09:53:10,923] INFO [reasoning.auto_rag] Setting up OpenAI LLM with model: gpt-4o-mini
[2025-03-09 09:53:10,923] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.OPENAI
[2025-03-09 09:53:10,923] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-09 09:53:10,923] INFO [__main__] Initializing web search integration
[2025-03-09 09:53:10,924] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-09 09:53:10,924] INFO [__main__] Components initialized successfully
[2025-03-09 09:53:13,525] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:53:13,525] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-09 09:53:13,525] INFO [reasoning.auto_rag] Setting up vLLM client with model: Qwen/Qwen2.5-14B-Instruct-AWQ
[2025-03-09 09:53:13,525] INFO [llm.vllm_client] Creating VLLMClient with config: {'api_url': 'http://192.168.100.125:8000', 'model_name': 'Qwen/Qwen2.5-14B-Instruct-AWQ', 'temperature': 0.2, 'max_tokens': 512, 'top_p': 0.95, 'timeout': 500, 'request_timeout': 500}
[2025-03-09 09:53:13,556] INFO [llm.vllm_client] Initialized vLLM client for model: Qwen/Qwen2.5-14B-Instruct-AWQ at http://192.168.100.125:8000
[2025-03-09 09:53:13,556] INFO [reasoning.auto_rag] Successfully initialized vLLM client with API URL: http://192.168.100.125:8000
[2025-03-09 09:53:13,557] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.VLLM
[2025-03-09 09:53:13,557] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-09 09:53:13,557] INFO [__main__] Initializing web search integration
[2025-03-09 09:53:13,557] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-09 09:53:13,557] INFO [__main__] Components initialized successfully
[2025-03-09 09:53:23,139] INFO [__main__] Starting application
[2025-03-09 09:53:23,146] INFO [__main__] Selected LLM provider: vllm
[2025-03-09 09:53:23,149] INFO [__main__] Initializing components with LLM provider: vllm
[2025-03-09 09:53:23,151] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-09 09:53:23,151] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-09 09:53:23,152] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-09 09:53:23,236] INFO [__main__] Starting application
[2025-03-09 09:53:23,238] INFO [__main__] Selected LLM provider: vllm
[2025-03-09 09:53:23,238] INFO [__main__] Initializing components with LLM provider: vllm
[2025-03-09 09:53:23,239] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-09 09:53:23,240] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-09 09:53:23,245] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-09 09:53:23,585] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-09 09:53:23,594] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-09 09:53:23,809] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-09 09:53:23,813] INFO [retrieval.vector_store] Collection exists: True
[2025-03-09 09:53:23,814] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-09 09:53:23,814] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:53:23,817] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:53:23,822] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-09 09:53:23,826] INFO [retrieval.vector_store] Collection exists: True
[2025-03-09 09:53:23,826] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-09 09:53:23,826] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:53:23,828] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:53:28,950] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-09 09:53:29,471] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-09 09:53:29,476] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-09 09:53:29,476] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-09 09:53:29,757] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-09 09:53:30,366] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-09 09:53:30,370] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-09 09:53:30,371] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-09 09:53:31,631] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:53:31,632] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-09 09:53:31,632] INFO [reasoning.auto_rag] Setting up vLLM client with model: Qwen/Qwen2.5-14B-Instruct-AWQ
[2025-03-09 09:53:31,632] INFO [llm.vllm_client] Creating VLLMClient with config: {'api_url': 'http://192.168.100.125:8000', 'model_name': 'Qwen/Qwen2.5-14B-Instruct-AWQ', 'temperature': 0.2, 'max_tokens': 512, 'top_p': 0.95, 'timeout': 500, 'request_timeout': 500}
[2025-03-09 09:53:31,669] INFO [llm.vllm_client] Initialized vLLM client for model: Qwen/Qwen2.5-14B-Instruct-AWQ at http://192.168.100.125:8000
[2025-03-09 09:53:31,670] INFO [reasoning.auto_rag] Successfully initialized vLLM client with API URL: http://192.168.100.125:8000
[2025-03-09 09:53:31,670] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.VLLM
[2025-03-09 09:53:31,670] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-09 09:53:31,670] INFO [__main__] Initializing web search integration
[2025-03-09 09:53:31,670] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-09 09:53:31,670] INFO [__main__] Components initialized successfully
[2025-03-09 09:53:33,145] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:53:33,145] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-09 09:53:33,145] INFO [reasoning.auto_rag] Setting up vLLM client with model: Qwen/Qwen2.5-14B-Instruct-AWQ
[2025-03-09 09:53:33,145] INFO [llm.vllm_client] Creating VLLMClient with config: {'api_url': 'http://192.168.100.125:8000', 'model_name': 'Qwen/Qwen2.5-14B-Instruct-AWQ', 'temperature': 0.2, 'max_tokens': 512, 'top_p': 0.95, 'timeout': 500, 'request_timeout': 500}
[2025-03-09 09:53:33,176] INFO [llm.vllm_client] Initialized vLLM client for model: Qwen/Qwen2.5-14B-Instruct-AWQ at http://192.168.100.125:8000
[2025-03-09 09:53:33,176] INFO [reasoning.auto_rag] Successfully initialized vLLM client with API URL: http://192.168.100.125:8000
[2025-03-09 09:53:33,176] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.VLLM
[2025-03-09 09:53:33,176] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-09 09:53:33,176] INFO [__main__] Initializing web search integration
[2025-03-09 09:53:33,176] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-09 09:53:33,176] INFO [__main__] Components initialized successfully
[2025-03-09 09:53:33,177] INFO [__main__] Processing new question: Vào 1 ngày đẹp trời chủ nhất, bạn Đạt đi uống 1 thùng bia và lái xe gắn máy SH 350i của Ý không mang theo giấy tờ thì bị phạt như thế nào?
[2025-03-09 09:53:33,178] INFO [__main__] Processing question: Vào 1 ngày đẹp trời chủ nhất, bạn Đạt đi uống 1 thùng bia và lái xe gắn máy SH 350i của Ý không mang theo giấy tờ thì bị phạt như thế nào?
[2025-03-09 09:53:33,179] INFO [reasoning.auto_rag] Question validated as traffic-related via keyword: phạt
[2025-03-09 09:53:33,179] INFO [reasoning.auto_rag] Iteration 1: Retrieving documents for query: Vào 1 ngày đẹp trời chủ nhất, bạn Đạt đi uống 1 thùng bia và lái xe gắn máy SH 350i của Ý không mang theo giấy tờ thì bị phạt như thế nào?
[2025-03-09 09:53:33,181] INFO [reasoning.auto_rag] Tokenized query: vào 1 ngày đẹp trời chủ nhất , bạn đạt đi uống 1 thùng bia và lái xe gắn_máy sh 350i của ý không mang theo giấy_tờ thì bị phạt như thế_nào ?
[2025-03-09 09:53:33,181] INFO [reasoning.auto_rag] Using basic DocumentRetriever for retrieval
[2025-03-09 09:53:33,181] INFO [retrieval.retriever] Original query: 'Vào 1 ngày đẹp trời chủ nhất, bạn Đạt đi uống 1 thùng bia và lái xe gắn máy SH 350i của Ý không mang theo giấy tờ thì bị phạt như thế nào?'
[2025-03-09 09:53:33,181] INFO [retrieval.retriever] Tokenized query: 'vào 1 ngày đẹp trời chủ nhất , bạn đạt đi uống 1 thùng bia và lái xe gắn_máy sh 350i của ý không mang theo giấy_tờ thì bị phạt như thế_nào ?'
[2025-03-09 09:53:33,771] INFO [retrieval.retriever] Retrieved 5 documents for query
[2025-03-09 09:53:33,771] INFO [retrieval.retriever] Top result score: 0.6287093162536621
[2025-03-09 09:53:33,772] INFO [retrieval.retriever] Score range: 0.49211618304252625 to 0.6287093162536621
[2025-03-09 09:53:33,772] INFO [reasoning.auto_rag] DocumentRetriever returned 5 documents
[2025-03-09 09:53:33,772] INFO [reasoning.auto_rag] Retrieved document details:
[2025-03-09 09:53:33,773] INFO [reasoning.auto_rag] Doc 1 score: 0.6287093162536621
[2025-03-09 09:53:33,773] INFO [reasoning.auto_rag] Doc 1 metadata: {'category': 'ô tô', 'fine_amount': 'Phạt tiền từ 400.000 đồng đến 600.000 đồng - Điều kiện người lái xe', 'violation_type': 'giấy_tờ', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Phạt tiền từ 400.000 đồng đến 600.000 đồng - Điều kiện người lái xe\nNội dung vi phạm: Không mang theo chứng nhận bảo hiểm bắt buộc trách nhiệm dân sự của chủ xe cơ giới còn hiệu lực'}
[2025-03-09 09:53:33,774] INFO [reasoning.auto_rag] Doc 2 score: 0.6015063524246216
[2025-03-09 09:53:33,774] INFO [reasoning.auto_rag] Doc 2 metadata: {'category': 'ô tô', 'fine_amount': 'Phạt tiền từ 300.000 đồng đến 400.000 đồng - Điều kiện người lái xe', 'violation_type': 'giấy_tờ', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Phạt tiền từ 300.000 đồng đến 400.000 đồng - Điều kiện người lái xe\nNội dung vi phạm: Không mang theo giấy chứng nhận kiểm định an toàn kỹ thuật và bảo vệ môi trường'}
[2025-03-09 09:53:33,774] INFO [reasoning.auto_rag] Doc 3 score: 0.5403785109519958
[2025-03-09 09:53:33,775] INFO [reasoning.auto_rag] Doc 3 metadata: {'category': 'ô tô', 'fine_amount': 'Phạt tiền từ 300.000 đồng đến 400.000 đồng - Điều kiện người lái xe', 'violation_type': 'giấy_tờ', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Phạt tiền từ 300.000 đồng đến 400.000 đồng - Điều kiện người lái xe\nNội dung vi phạm: Không mang theo chứng nhận đăng ký xe'}
[2025-03-09 09:53:33,775] INFO [reasoning.auto_rag] Context length: 997 characters
[2025-03-09 09:53:33,777] INFO [reasoning.auto_rag] Input tokens: 904
[2025-03-09 09:53:39,376] INFO [httpx] HTTP Request: POST http://192.168.100.125:8000/v1/completions "HTTP/1.1 200 OK"
[2025-03-09 09:53:39,378] INFO [reasoning.auto_rag] Output tokens: 711
[2025-03-09 09:53:39,379] INFO [reasoning.auto_rag] Decision: Cần thêm thông tin
[2025-03-09 09:53:39,379] INFO [reasoning.auto_rag] Need more information, next query: Tìm hiểu về mức phạt khi lái xe gắn máy mà không mang theo giấy tờ
[2025-03-09 09:53:39,379] INFO [reasoning.auto_rag] Iteration 2: Retrieving documents for query: Tìm hiểu về mức phạt khi lái xe gắn máy mà không mang theo giấy tờ
[2025-03-09 09:53:39,379] INFO [reasoning.auto_rag] Tokenized query: tìm_hiểu về mức phạt khi lái xe gắn_máy mà không mang theo giấy_tờ
[2025-03-09 09:53:39,379] INFO [reasoning.auto_rag] Using basic DocumentRetriever for retrieval
[2025-03-09 09:53:39,380] INFO [retrieval.retriever] Original query: 'Tìm hiểu về mức phạt khi lái xe gắn máy mà không mang theo giấy tờ'
[2025-03-09 09:53:39,380] INFO [retrieval.retriever] Tokenized query: 'tìm_hiểu về mức phạt khi lái xe gắn_máy mà không mang theo giấy_tờ'
[2025-03-09 09:53:39,982] INFO [retrieval.retriever] Retrieved 5 documents for query
[2025-03-09 09:53:39,982] INFO [retrieval.retriever] Top result score: 0.7579599618911743
[2025-03-09 09:53:39,983] INFO [retrieval.retriever] Score range: 0.5521240234375 to 0.7579599618911743
[2025-03-09 09:53:39,983] INFO [reasoning.auto_rag] DocumentRetriever returned 5 documents
[2025-03-09 09:53:39,984] INFO [reasoning.auto_rag] Retrieved document details:
[2025-03-09 09:53:39,984] INFO [reasoning.auto_rag] Doc 1 score: 0.7579599618911743
[2025-03-09 09:53:39,985] INFO [reasoning.auto_rag] Doc 1 metadata: {'category': 'ô tô', 'fine_amount': 'Phạt tiền từ 300.000 đồng đến 400.000 đồng - Điều kiện người lái xe', 'violation_type': 'giấy_tờ', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Phạt tiền từ 300.000 đồng đến 400.000 đồng - Điều kiện người lái xe\nNội dung vi phạm: Không mang theo chứng nhận đăng ký xe'}
[2025-03-09 09:53:39,985] INFO [reasoning.auto_rag] Doc 2 score: 0.6501345038414001
[2025-03-09 09:53:39,985] INFO [reasoning.auto_rag] Doc 2 metadata: {'category': 'ô tô', 'fine_amount': 'Phạt tiền từ 300.000 đồng đến 400.000 đồng - Điều kiện người lái xe', 'violation_type': 'giấy_tờ', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Phạt tiền từ 300.000 đồng đến 400.000 đồng - Điều kiện người lái xe\nNội dung vi phạm: Không mang theo giấy phép lái xe'}
[2025-03-09 09:53:39,986] INFO [reasoning.auto_rag] Doc 3 score: 0.5899961590766907
[2025-03-09 09:53:39,986] INFO [reasoning.auto_rag] Doc 3 metadata: {'category': 'ô tô', 'fine_amount': 'Phạt tiền từ 300.000 đồng đến 400.000 đồng - Điều kiện người lái xe', 'violation_type': 'giấy_tờ', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Phạt tiền từ 300.000 đồng đến 400.000 đồng - Điều kiện người lái xe\nNội dung vi phạm: Không mang theo giấy chứng nhận kiểm định an toàn kỹ thuật và bảo vệ môi trường'}
[2025-03-09 09:53:39,987] INFO [reasoning.auto_rag] Context length: 2015 characters
[2025-03-09 09:53:39,989] INFO [reasoning.auto_rag] Input tokens: 1405
[2025-03-09 09:53:45,499] INFO [httpx] HTTP Request: POST http://192.168.100.125:8000/v1/completions "HTTP/1.1 200 OK"
[2025-03-09 09:53:45,505] INFO [reasoning.auto_rag] Output tokens: 794
[2025-03-09 09:53:45,505] INFO [reasoning.auto_rag] Decision: Cần thêm thông tin
[2025-03-09 09:53:45,505] INFO [reasoning.auto_rag] Need more information, next query: Tìm hiểu xem việc uống bia có bị coi là chất kích thích không và mức phạt khi lái xe sau khi uống bia
[2025-03-09 09:53:45,506] WARNING [reasoning.auto_rag] Exiting loop without sufficient information
[2025-03-09 09:53:45,506] INFO [utils] Function process_question completed in 12.33 seconds
[2025-03-09 09:53:45,507] INFO [__main__] Question processed in 12.33 seconds
[2025-03-09 09:53:45,508] INFO [__main__] Needs web search: True
[2025-03-09 09:53:45,509] INFO [__main__] Web search prompt triggered
[2025-03-09 09:53:45,510] INFO [__main__] Displaying results
[2025-03-09 09:53:45,512] INFO [__main__] Response generated using: Qwen2.5-14B (vLLM)
[2025-03-09 09:53:45,527] INFO [__main__] Cleaning up components
[2025-03-09 09:53:45,528] INFO [retrieval.vector_store] Closing Weaviate client connection
[2025-03-09 09:53:45,541] INFO [retrieval.vector_store] Weaviate client connection closed
[2025-03-09 09:53:45,542] INFO [__main__] Displaying web search prompt
[2025-03-09 09:54:42,941] INFO [__main__] Starting application
[2025-03-09 09:54:42,953] INFO [__main__] Selected LLM provider: vllm
[2025-03-09 09:54:42,955] INFO [__main__] Initializing components with LLM provider: vllm
[2025-03-09 09:54:42,955] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-09 09:54:42,956] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-09 09:54:42,957] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-09 09:54:43,061] INFO [__main__] Starting application
[2025-03-09 09:54:43,063] INFO [__main__] Selected LLM provider: vllm
[2025-03-09 09:54:43,063] INFO [__main__] Initializing components with LLM provider: vllm
[2025-03-09 09:54:43,063] INFO [retrieval.vector_store] Initializing connection to Weaviate at https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud
[2025-03-09 09:54:43,063] INFO [retrieval.vector_store] Using collection: ND168
[2025-03-09 09:54:43,063] INFO [retrieval.vector_store] Creating new Weaviate client connection
[2025-03-09 09:54:43,372] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-09 09:54:43,440] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/meta "HTTP/1.1 200 OK"
[2025-03-09 09:54:43,593] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-09 09:54:43,603] INFO [retrieval.vector_store] Collection exists: True
[2025-03-09 09:54:43,603] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-09 09:54:43,603] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:54:43,604] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:54:43,677] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-09 09:54:43,686] INFO [retrieval.vector_store] Collection exists: True
[2025-03-09 09:54:43,687] INFO [retrieval.vector_store] Successfully connected to Weaviate
[2025-03-09 09:54:43,687] INFO [retrieval.vector_store] Loading embedding model: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:54:43,690] INFO [sentence_transformers.SentenceTransformer] Load pretrained SentenceTransformer: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:54:48,457] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-09 09:54:48,703] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-09 09:54:48,709] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-09 09:54:48,710] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-09 09:54:49,059] INFO [sentence_transformers.SentenceTransformer] 2 prompts are loaded, with the keys: ['query', 'text']
[2025-03-09 09:54:49,558] INFO [httpx] HTTP Request: GET https://eypxka08rk6gbnyt57idzq.c0.us-west3.gcp.weaviate.cloud/v1/schema/ND168 "HTTP/1.1 200 OK"
[2025-03-09 09:54:49,563] INFO [retrieval.vector_store] Successfully initialized vector store and index for collection ND168
[2025-03-09 09:54:49,563] INFO [retrieval.retriever] Retriever setup complete with similarity_top_k=5
[2025-03-09 09:54:50,824] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:54:50,824] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-09 09:54:50,824] INFO [reasoning.auto_rag] Setting up vLLM client with model: Qwen/Qwen2.5-14B-Instruct-AWQ
[2025-03-09 09:54:50,824] INFO [llm.vllm_client] Creating VLLMClient with config: {'api_url': 'http://192.168.100.125:8000', 'model_name': 'Qwen/Qwen2.5-14B-Instruct-AWQ', 'temperature': 0.2, 'max_tokens': 512, 'top_p': 0.95, 'timeout': 500, 'request_timeout': 500}
[2025-03-09 09:54:50,856] INFO [llm.vllm_client] Initialized vLLM client for model: Qwen/Qwen2.5-14B-Instruct-AWQ at http://192.168.100.125:8000
[2025-03-09 09:54:50,856] INFO [reasoning.auto_rag] Successfully initialized vLLM client with API URL: http://192.168.100.125:8000
[2025-03-09 09:54:50,856] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.VLLM
[2025-03-09 09:54:50,856] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-09 09:54:50,856] INFO [__main__] Initializing web search integration
[2025-03-09 09:54:50,857] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-09 09:54:50,857] INFO [__main__] Components initialized successfully
[2025-03-09 09:54:53,229] INFO [retrieval.search_pipline] Initialized CrossEncoder with model: dangvantuan/vietnamese-document-embedding
[2025-03-09 09:54:53,229] INFO [retrieval.search_pipline] Initialized SearchPipeline
[2025-03-09 09:54:53,230] INFO [reasoning.auto_rag] Setting up vLLM client with model: Qwen/Qwen2.5-14B-Instruct-AWQ
[2025-03-09 09:54:53,230] INFO [llm.vllm_client] Creating VLLMClient with config: {'api_url': 'http://192.168.100.125:8000', 'model_name': 'Qwen/Qwen2.5-14B-Instruct-AWQ', 'temperature': 0.2, 'max_tokens': 512, 'top_p': 0.95, 'timeout': 500, 'request_timeout': 500}
[2025-03-09 09:54:53,265] INFO [llm.vllm_client] Initialized vLLM client for model: Qwen/Qwen2.5-14B-Instruct-AWQ at http://192.168.100.125:8000
[2025-03-09 09:54:53,265] INFO [reasoning.auto_rag] Successfully initialized vLLM client with API URL: http://192.168.100.125:8000
[2025-03-09 09:54:53,265] INFO [reasoning.auto_rag] Initialized Traffic AutoRAG with LLM provider: LLMProvider.VLLM
[2025-03-09 09:54:53,265] INFO [reasoning.auto_rag] Using basic DocumentRetriever for document retrieval
[2025-03-09 09:54:53,266] INFO [__main__] Initializing web search integration
[2025-03-09 09:54:53,266] INFO [web_handle.web_search] Initialized WebSearchIntegrator
[2025-03-09 09:54:53,266] INFO [__main__] Components initialized successfully
[2025-03-09 09:54:53,267] INFO [__main__] Processing new question: Vào 1 ngày đẹp trời chủ nhất, bạn Đạt đi uống 1 thùng bia và lái xe máy SH 350i của Ý không mang theo giấy tờ thì bị phạt như thế nào?
[2025-03-09 09:54:53,268] INFO [__main__] Processing question: Vào 1 ngày đẹp trời chủ nhất, bạn Đạt đi uống 1 thùng bia và lái xe máy SH 350i của Ý không mang theo giấy tờ thì bị phạt như thế nào?
[2025-03-09 09:54:53,268] INFO [reasoning.auto_rag] Question validated as traffic-related via keyword: phạt
[2025-03-09 09:54:53,268] INFO [reasoning.auto_rag] Iteration 1: Retrieving documents for query: Vào 1 ngày đẹp trời chủ nhất, bạn Đạt đi uống 1 thùng bia và lái xe máy SH 350i của Ý không mang theo giấy tờ thì bị phạt như thế nào?
[2025-03-09 09:54:53,269] INFO [reasoning.auto_rag] Tokenized query: vào 1 ngày đẹp trời chủ nhất , bạn đạt đi uống 1 thùng bia và lái xe_máy sh 350i của ý không mang theo giấy_tờ thì bị phạt như thế_nào ?
[2025-03-09 09:54:53,269] INFO [reasoning.auto_rag] Using basic DocumentRetriever for retrieval
[2025-03-09 09:54:53,270] INFO [retrieval.retriever] Original query: 'Vào 1 ngày đẹp trời chủ nhất, bạn Đạt đi uống 1 thùng bia và lái xe máy SH 350i của Ý không mang theo giấy tờ thì bị phạt như thế nào?'
[2025-03-09 09:54:53,273] INFO [retrieval.retriever] Tokenized query: 'vào 1 ngày đẹp trời chủ nhất , bạn đạt đi uống 1 thùng bia và lái xe_máy sh 350i của ý không mang theo giấy_tờ thì bị phạt như thế_nào ?'
[2025-03-09 09:54:54,296] INFO [retrieval.retriever] Retrieved 5 documents for query
[2025-03-09 09:54:54,297] INFO [retrieval.retriever] Top result score: 0.6497311592102051
[2025-03-09 09:54:54,297] INFO [retrieval.retriever] Score range: 0.5 to 0.6497311592102051
[2025-03-09 09:54:54,297] INFO [reasoning.auto_rag] DocumentRetriever returned 5 documents
[2025-03-09 09:54:54,297] INFO [reasoning.auto_rag] Retrieved document details:
[2025-03-09 09:54:54,298] INFO [reasoning.auto_rag] Doc 1 score: 0.6497311592102051
[2025-03-09 09:54:54,298] INFO [reasoning.auto_rag] Doc 1 metadata: {'category': 'ô tô', 'fine_amount': 'Phạt tiền từ 400.000 đồng đến 600.000 đồng - Điều kiện người lái xe', 'violation_type': 'giấy_tờ', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Phạt tiền từ 400.000 đồng đến 600.000 đồng - Điều kiện người lái xe\nNội dung vi phạm: Không mang theo chứng nhận bảo hiểm bắt buộc trách nhiệm dân sự của chủ xe cơ giới còn hiệu lực'}
[2025-03-09 09:54:54,298] INFO [reasoning.auto_rag] Doc 2 score: 0.6274877786636353
[2025-03-09 09:54:54,298] INFO [reasoning.auto_rag] Doc 2 metadata: {'category': 'ô tô', 'fine_amount': 'Phạt tiền từ 300.000 đồng đến 400.000 đồng - Điều kiện người lái xe', 'violation_type': 'giấy_tờ', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Phạt tiền từ 300.000 đồng đến 400.000 đồng - Điều kiện người lái xe\nNội dung vi phạm: Không mang theo giấy chứng nhận kiểm định an toàn kỹ thuật và bảo vệ môi trường'}
[2025-03-09 09:54:54,299] INFO [reasoning.auto_rag] Doc 3 score: 0.5641801357269287
[2025-03-09 09:54:54,299] INFO [reasoning.auto_rag] Doc 3 metadata: {'category': 'ô tô', 'fine_amount': 'Phạt tiền từ 300.000 đồng đến 400.000 đồng - Điều kiện người lái xe', 'violation_type': 'giấy_tờ', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Phạt tiền từ 300.000 đồng đến 400.000 đồng - Điều kiện người lái xe\nNội dung vi phạm: Không mang theo chứng nhận đăng ký xe'}
[2025-03-09 09:54:54,299] INFO [reasoning.auto_rag] Context length: 997 characters
[2025-03-09 09:54:54,301] INFO [reasoning.auto_rag] Input tokens: 901
[2025-03-09 09:54:59,864] INFO [httpx] HTTP Request: POST http://192.168.100.125:8000/v1/completions "HTTP/1.1 200 OK"
[2025-03-09 09:54:59,865] INFO [reasoning.auto_rag] Output tokens: 810
[2025-03-09 09:54:59,866] INFO [reasoning.auto_rag] Decision: Cần thêm thông tin
[2025-03-09 09:54:59,866] INFO [reasoning.auto_rag] Need more information, next query: Tìm hiểu mức phạt khi lái xe máy không mang theo giấy tờ
[2025-03-09 09:54:59,866] INFO [reasoning.auto_rag] Iteration 2: Retrieving documents for query: Tìm hiểu mức phạt khi lái xe máy không mang theo giấy tờ
[2025-03-09 09:54:59,867] INFO [reasoning.auto_rag] Tokenized query: tìm_hiểu mức phạt khi lái xe_máy không mang theo giấy_tờ
[2025-03-09 09:54:59,867] INFO [reasoning.auto_rag] Using basic DocumentRetriever for retrieval
[2025-03-09 09:54:59,867] INFO [retrieval.retriever] Original query: 'Tìm hiểu mức phạt khi lái xe máy không mang theo giấy tờ'
[2025-03-09 09:54:59,868] INFO [retrieval.retriever] Tokenized query: 'tìm_hiểu mức phạt khi lái xe_máy không mang theo giấy_tờ'
[2025-03-09 09:55:00,512] INFO [retrieval.retriever] Retrieved 5 documents for query
[2025-03-09 09:55:00,512] INFO [retrieval.retriever] Top result score: 0.9986766576766968
[2025-03-09 09:55:00,512] INFO [retrieval.retriever] Score range: 0.79994797706604 to 0.9986766576766968
[2025-03-09 09:55:00,512] INFO [reasoning.auto_rag] DocumentRetriever returned 5 documents
[2025-03-09 09:55:00,512] INFO [reasoning.auto_rag] Retrieved document details:
[2025-03-09 09:55:00,512] INFO [reasoning.auto_rag] Doc 1 score: 0.9986766576766968
[2025-03-09 09:55:00,512] INFO [reasoning.auto_rag] Doc 1 metadata: {'category': 'ô tô', 'fine_amount': 'Phạt tiền từ 300.000 đồng đến 400.000 đồng - Điều kiện người lái xe', 'violation_type': 'giấy_tờ', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Phạt tiền từ 300.000 đồng đến 400.000 đồng - Điều kiện người lái xe\nNội dung vi phạm: Không mang theo chứng nhận đăng ký xe'}
[2025-03-09 09:55:00,513] INFO [reasoning.auto_rag] Doc 2 score: 0.9192651510238647
[2025-03-09 09:55:00,513] INFO [reasoning.auto_rag] Doc 2 metadata: {'category': 'ô tô', 'fine_amount': 'Phạt tiền từ 300.000 đồng đến 400.000 đồng - Điều kiện người lái xe', 'violation_type': 'giấy_tờ', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Phạt tiền từ 300.000 đồng đến 400.000 đồng - Điều kiện người lái xe\nNội dung vi phạm: Không mang theo giấy phép lái xe'}
[2025-03-09 09:55:00,514] INFO [reasoning.auto_rag] Doc 3 score: 0.8524302244186401
[2025-03-09 09:55:00,514] INFO [reasoning.auto_rag] Doc 3 metadata: {'category': 'ô tô', 'fine_amount': 'Phạt tiền từ 400.000 đồng đến 600.000 đồng - Điều kiện người lái xe', 'violation_type': 'giấy_tờ', 'original_text': 'Loại phương tiện: ô tô\nMức phạt: Phạt tiền từ 400.000 đồng đến 600.000 đồng - Điều kiện người lái xe\nNội dung vi phạm: Không mang theo chứng nhận bảo hiểm bắt buộc trách nhiệm dân sự của chủ xe cơ giới còn hiệu lực'}
[2025-03-09 09:55:00,514] INFO [reasoning.auto_rag] Context length: 2033 characters
[2025-03-09 09:55:00,516] INFO [reasoning.auto_rag] Input tokens: 1408
[2025-03-09 09:55:06,009] INFO [httpx] HTTP Request: POST http://192.168.100.125:8000/v1/completions "HTTP/1.1 200 OK"
[2025-03-09 09:55:06,011] INFO [reasoning.auto_rag] Output tokens: 839
[2025-03-09 09:55:06,011] INFO [reasoning.auto_rag] Decision: Cần thêm thông tin
[2025-03-09 09:55:06,011] INFO [reasoning.auto_rag] Need more information, next query: Tìm hiểu về mức phạt khi lái xe máy không mang theo giấy tờ và mức phạt khi lái xe sau khi uống bia
[2025-03-09 09:55:06,012] WARNING [reasoning.auto_rag] Exiting loop without sufficient information
[2025-03-09 09:55:06,012] INFO [utils] Function process_question completed in 12.74 seconds
[2025-03-09 09:55:06,012] INFO [__main__] Question processed in 12.74 seconds
[2025-03-09 09:55:06,013] INFO [__main__] Needs web search: True
[2025-03-09 09:55:06,013] INFO [__main__] Web search prompt triggered
[2025-03-09 09:55:06,013] INFO [__main__] Displaying results
[2025-03-09 09:55:06,014] INFO [__main__] Response generated using: Qwen2.5-14B (vLLM)
[2025-03-09 09:55:06,021] INFO [__main__] Cleaning up components
[2025-03-09 09:55:06,021] INFO [retrieval.vector_store] Closing Weaviate client connection
[2025-03-09 09:55:06,024] INFO [retrieval.vector_store] Weaviate client connection closed
[2025-03-09 09:55:06,025] INFO [__main__] Displaying web search prompt
